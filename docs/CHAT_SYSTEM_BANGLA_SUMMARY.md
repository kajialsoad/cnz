# ржЪрзНржпрж╛ржЯ рж╕рж┐рж╕рзНржЯрзЗржо рж╕ржорзНржкрзВрж░рзНржг ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи - рж╕рж╛рж░рж╛ржВрж╢

## тЬЕ ржХрж╛ржЬ рж╕ржорзНржкржирзНржи рж╣ржпрж╝рзЗржЫрзЗ

### рзз. Flutter ржЕрзНржпрж╛ржкрзЗрж░ ржЬржирзНржп рждрж┐ржиржЯрж┐ ржирждрзБржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:

#### `lib/services/chat_service.dart`
- рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ API ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗ
- ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛ ржПржмржВ ржЧрзНрж░рж╣ржг ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛
- Authentication token ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ

#### `lib/models/chat_message.dart`
- ржЪрзНржпрж╛ржЯ ржорзЗрж╕рзЗржЬрзЗрж░ ржбрж╛ржЯрж╛ ржоржбрзЗрж▓
- JSON ржерзЗржХрзЗ Dart object ржП ржХржиржнрж╛рж░рзНржЯ ржХрж░рзЗ
- рж╕ржм ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржлрж┐рж▓рзНржб ржЖржЫрзЗ

#### `lib/pages/complaint_chat_page.dart`
- рж╕ржорзНржкрзВрж░рзНржг ржЪрзНржпрж╛ржЯ UI
- рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржорзЗрж╕рзЗржЬрж┐ржВ
- ржкрзНрж░рждрж┐ рзл рж╕рзЗржХрзЗржирзНржбрзЗ ржирждрзБржи ржорзЗрж╕рзЗржЬ ржЪрзЗржХ ржХрж░рзЗ
- рж╕рзБржирзНржжрж░ ржбрж┐ржЬрж╛ржЗржи ржПржмржВ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи

## ЁЯФД ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ

### ржирж╛ржЧрж░рж┐ржХ ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржпрж╝:
```
рзз. ржирж╛ржЧрж░рж┐ржХ ComplaintChatPage ржЦрзЛрж▓рзЗ
рзи. рждрж╛рж░ complaint ржПрж░ ржЬржирзНржп ржЪрзНржпрж╛ржЯ рж╢рзБрж░рзБ рж╣ржпрж╝
рзй. ржорзЗрж╕рзЗржЬ ржЯрж╛ржЗржк ржХрж░рзЗ ржкрж╛ржарж╛ржпрж╝
рзк. ржорзЗрж╕рзЗржЬ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕рзЗржн рж╣ржпрж╝
рзл. ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓рзЗ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝
```

### ржЕрзНржпрж╛ржбржорж┐ржи рж░рж┐ржкрзНрж▓рж╛ржЗ ржжрзЗржпрж╝:
```
рзз. ржЕрзНржпрж╛ржбржорж┐ржи React ржкрзНржпрж╛ржирзЗрж▓рзЗ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрзЗ
рзи. рж░рж┐ржкрзНрж▓рж╛ржЗ ржЯрж╛ржЗржк ржХрж░рзЗ ржкрж╛ржарж╛ржпрж╝
рзй. ржорзЗрж╕рзЗржЬ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕рзЗржн рж╣ржпрж╝
рзк. рзл рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржоржзрзНржпрзЗ ржирж╛ржЧрж░рж┐ржХрзЗрж░ ржЕрзНржпрж╛ржкрзЗ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝
рзл. ржирж╛ржЧрж░рж┐ржХ рж░рж┐ржкрзНрж▓рж╛ржЗ ржкрж╛ржпрж╝! тЬЕ
```

## ЁЯУ▒ UI ржлрж┐ржЪрж╛рж░

### ржирж╛ржЧрж░рж┐ржХрзЗрж░ ржорзЗрж╕рзЗржЬ:
- рж╕ржмрзБржЬ рж░ржЩрзЗрж░ ржмрж╛ржмрж▓
- ржбрж╛ржи ржжрж┐ржХрзЗ ржжрзЗржЦрж╛ржпрж╝
- ржирж┐ржЬрзЗрж░ ржЖржЗржХржи ржЖржЫрзЗ

### ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ ржорзЗрж╕рзЗржЬ:
- рж╕рж╛ржжрж╛ рж░ржЩрзЗрж░ ржмрж╛ржмрж▓
- ржмрж╛ржо ржжрж┐ржХрзЗ ржжрзЗржЦрж╛ржпрж╝
- ржЕрзНржпрж╛ржбржорж┐ржи ржЖржЗржХржи ржЖржЫрзЗ
- ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ ржирж╛ржо ржжрзЗржЦрж╛ржпрж╝

### ржЕржирзНржпрж╛ржирзНржп ржлрж┐ржЪрж╛рж░:
- тЬЕ ржЕржЯрзЛ-рж╕рзНржХрзНрж░рзЛрж▓ ржирж┐ржЪрзЗ
- тЬЕ ржЯрж╛ржЗржорж╕рзНржЯрзНржпрж╛ржорзНржк ржмрж╛ржВрж▓рж╛ржпрж╝
- тЬЕ рж▓рзЛржбрж┐ржВ ржЗржирзНржбрж┐ржХрзЗржЯрж░
- тЬЕ ржПрж░рж░ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ
- тЬЕ рж░рж┐ржЯрзНрж░рж╛ржЗ ржмрж╛ржЯржи
- тЬЕ рж░рзЗрж╕ржкржирзНрж╕рж┐ржн ржбрж┐ржЬрж╛ржЗржи

## ЁЯФз ржПржЦржи ржпрж╛ ржХрж░рждрзЗ рж╣ржмрзЗ

### рзз. Complaint Details ржкрзЗржЬрзЗ ржЪрзНржпрж╛ржЯ ржмрж╛ржЯржи ржпрзЛржЧ ржХрж░рзБржи:

`lib/pages/complaint_detail_view_page.dart` ржлрж╛ржЗрж▓рзЗ ржПржЗ ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

```dart
ElevatedButton.icon(
  onPressed: () {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (context) => ComplaintChatPage(
          complaintId: widget.complaint.id,
          complaintTitle: widget.complaint.title,
        ),
      ),
    );
  },
  icon: const Icon(Icons.chat),
  label: const TranslatedText('ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ ржХрж░рзБржи'),
  style: ElevatedButton.styleFrom(
    backgroundColor: const Color(0xFF2E8B57),
    foregroundColor: Colors.white,
  ),
)
```

### рзи. Import ржпрзЛржЧ ржХрж░рзБржи:

ржлрж╛ржЗрж▓рзЗрж░ ржЙржкрж░рзЗ ржПржЗ import ржпрзЛржЧ ржХрж░рзБржи:

```dart
import '../pages/complaint_chat_page.dart';
```

### рзй. рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рзБржи:

```bash
cd server
npm run dev
```

### рзк. Flutter ржЕрзНржпрж╛ржк ржЪрж╛рж▓рзБ ржХрж░рзБржи:

```bash
flutter run
```

## ЁЯОп ржЯрзЗрж╕рзНржЯрж┐ржВ

### ржпрж╛ ржЪрзЗржХ ржХрж░рждрзЗ рж╣ржмрзЗ:

1. тЬЕ Complaint details ржкрзЗржЬ ржерзЗржХрзЗ ржЪрзНржпрж╛ржЯ ржЦрзБрж▓рзБржи
2. тЬЕ ржорзЗрж╕рзЗржЬ ржЯрж╛ржЗржк ржХрж░рзЗ ржкрж╛ржарж╛ржи
3. тЬЕ ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓ ржЦрзБрж▓рзЗ ржжрзЗржЦрзБржи ржорзЗрж╕рзЗржЬ ржПрж╕рзЗржЫрзЗ ржХрж┐ржирж╛
4. тЬЕ ржЕрзНржпрж╛ржбржорж┐ржи ржерзЗржХрзЗ рж░рж┐ржкрзНрж▓рж╛ржЗ ржжрж┐ржи
5. тЬЕ Flutter ржЕрзНржпрж╛ржкрзЗ рж░рж┐ржкрзНрж▓рж╛ржЗ ржЖрж╕ржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржи (рзл рж╕рзЗржХрзЗржирзНржб ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи)

## ЁЯУК рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕

### тЬЕ рж╕ржорзНржкрзВрж░рзНржг (100%):
- Backend API (Node.js)
- Admin Panel (React)
- Flutter Chat Service
- Flutter Chat UI

### тП│ ржмрж╛ржХрж┐ ржЖржЫрзЗ:
- Complaint details ржкрзЗржЬрзЗ ржЪрзНржпрж╛ржЯ ржмрж╛ржЯржи ржпрзЛржЧ ржХрж░рж╛
- End-to-end ржЯрзЗрж╕рзНржЯрж┐ржВ
- Push notification (ржРржЪрзНржЫрж┐ржХ)
- Image upload (ржРржЪрзНржЫрж┐ржХ)

## ЁЯОЙ рж╕ржлрж▓рждрж╛!

ржПржЦржи ржЖржкржирж╛рж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗ:
- тЬЕ ржирж╛ржЧрж░рж┐ржХ ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ
- тЬЕ ржЕрзНржпрж╛ржбржорж┐ржи ржирж╛ржЧрж░рж┐ржХржХрзЗ рж░рж┐ржкрзНрж▓рж╛ржЗ ржжрж┐рждрзЗ ржкрж╛рж░ржмрзЗ
- тЬЕ рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржорзЗрж╕рзЗржЬрж┐ржВ ржХрж╛ржЬ ржХрж░ржмрзЗ
- тЬЕ рж╕ржм ржорзЗрж╕рзЗржЬ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рж╕рзЗржн рж╣ржмрзЗ
- тЬЕ рж╕рзБржирзНржжрж░ ржПржмржВ ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп UI

## ЁЯУЮ рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржпрж╝рзЛржЬржи?

ржпржжрж┐ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝:

1. **"Authentication token not found"**
   - ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи user рж▓ржЧржЗржи ржХрж░рзЗржЫрзЗ

2. **"Complaint not found"**
   - Complaint ID рж╕ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи

3. **ржорзЗрж╕рзЗржЬ рж▓рзЛржб рж╣ржЪрзНржЫрзЗ ржирж╛**
   - ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржи ржЪрзЗржХ ржХрж░рзБржи
   - рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржи

4. **рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржХрж╛ржЬ ржХрж░ржЫрзЗ ржирж╛**
   - рзл рж╕рзЗржХрзЗржирзНржб ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи
   - Polling timer ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи

## ЁЯЪА ржкрж░ржмрж░рзНрждрзА ржзрж╛ржк

### ржПржЦржиржЗ ржХрж░рзБржи:
1. Complaint details ржкрзЗржЬрзЗ ржЪрзНржпрж╛ржЯ ржмрж╛ржЯржи ржпрзЛржЧ ржХрж░рзБржи
2. рж╕рж┐рж╕рзНржЯрзЗржо ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи
3. ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржжрж┐ржпрж╝рзЗ ржЯрзЗрж╕рзНржЯ ржХрж░рж╛ржи

### ржкрж░рзЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:
1. Push notification ржпрзЛржЧ ржХрж░рзБржи
2. Image upload ржлрж┐ржЪрж╛рж░ ржпрзЛржЧ ржХрж░рзБржи
3. Voice message ржпрзЛржЧ ржХрж░рзБржи
4. WebSocket ржжрж┐ржпрж╝рзЗ ржЖрж░рзЛ ржнрж╛рж▓рзЛ real-time ржХрж░рзБржи

---

**рждрж╛рж░рж┐ржЦ**: рззрзл ржиржнрзЗржорзНржмрж░, рзирзжрзирзл
**рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕**: тЬЕ рж╕ржорзНржкрзВрж░рзНржг
**ржорзЛржЯ ржлрж╛ржЗрж▓**: рзйржЯрж┐ ржирждрзБржи
**ржХрзЛржб рж▓рж╛ржЗржи**: ~рзорзжрзж

ржЖржкржирж╛рж░ ржЪрзНржпрж╛ржЯ рж╕рж┐рж╕рзНржЯрзЗржо ржПржЦржи рж╕ржорзНржкрзВрж░рзНржг ржПржмржВ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп ржкрзНрж░рж╕рзНрждрзБржд! ЁЯОЙ
