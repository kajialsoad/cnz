var pe=Object.defineProperty;var ve=(d,h,u)=>h in d?pe(d,h,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[h]=u;var me=(d,h,u)=>ve(d,typeof h!="symbol"?h+"":h,u);import{r as l,j as e,D as oe,E as ie,J as le,F as p,L as O,N as F,al as de,P,K as G,R as J,S as ge,U as xe,a9 as he,V as ue,W as _,aF as Y,ac as X,a7 as ee,ad as re,ae as se,af as $,ag as r,ah as ae,an as A,T as C,ai as D,aj as U,I as H,aw as fe,ap as te,aq as ne,aK as We,aD as Ce,a1 as K,aJ as ye,a4 as Se,Y as je,bO as Ze,Z as we}from"./index-wC2ewM-h.js";import{D as be}from"./Delete-DLZSRr4F.js";import{A as ce}from"./Add-CdCtiklN.js";import{w as Q}from"./wardService-9fTrWUFe.js";import{S as Ne}from"./Snackbar-BYJ0d-0i.js";const Ae=({open:d,onClose:h,onSave:u,cityCorporation:s,mode:o})=>{const[a,n]=l.useState({code:"",name:"",minWard:"",maxWard:"",minZone:"",maxZone:""}),[x,Z]=l.useState({}),[v,S]=l.useState(!1),[k,w]=l.useState(null);l.useEffect(()=>{var i,j,c,f;n(o==="edit"&&s?{code:s.code,name:s.name,minWard:((i=s.minWard)==null?void 0:i.toString())||"1",maxWard:((j=s.maxWard)==null?void 0:j.toString())||"100",minZone:((c=s.minZone)==null?void 0:c.toString())||"1",maxZone:((f=s.maxZone)==null?void 0:f.toString())||"20"}:{code:"",name:"",minWard:"1",maxWard:"100",minZone:"1",maxZone:"20"}),Z({}),w(null)},[s,o,d]);const E=()=>{const i={};if(o==="create"&&(a.code.trim()?/^[A-Z]{2,10}$/.test(a.code.trim())||(i.code="Code must be 2-10 uppercase letters (e.g., DSCC, DNCC)"):i.code="Code is required"),a.name.trim()?a.name.trim().length<3&&(i.name="Name must be at least 3 characters"):i.name="Name is required",!a.minWard.trim())i.minWard="Minimum ward is required";else{const j=parseInt(a.minWard);(isNaN(j)||j<1)&&(i.minWard="Minimum ward must be a positive number")}if(!a.maxWard.trim())i.maxWard="Maximum ward is required";else{const j=parseInt(a.maxWard);(isNaN(j)||j<1)&&(i.maxWard="Maximum ward must be a positive number")}if(a.minWard&&a.maxWard){const j=parseInt(a.minWard),c=parseInt(a.maxWard);!isNaN(j)&&!isNaN(c)&&j>=c&&(i.maxWard="Maximum ward must be greater than minimum ward")}if(!a.minZone.trim())i.minZone="Minimum zone is required";else{const j=parseInt(a.minZone);(isNaN(j)||j<1)&&(i.minZone="Minimum zone must be a positive number")}if(!a.maxZone.trim())i.maxZone="Maximum zone is required";else{const j=parseInt(a.maxZone);(isNaN(j)||j<1)&&(i.maxZone="Maximum zone must be a positive number")}if(a.minZone&&a.maxZone){const j=parseInt(a.minZone),c=parseInt(a.maxZone);!isNaN(j)&&!isNaN(c)&&j>=c&&(i.maxZone="Maximum zone must be greater than minimum zone")}return Z(i),Object.keys(i).length===0},y=(i,j)=>{n(c=>({...c,[i]:j})),x[i]&&Z(c=>{const f={...c};return delete f[i],f})},z=async()=>{if(E()){S(!0),w(null);try{const i={name:a.name.trim(),minWard:parseInt(a.minWard),maxWard:parseInt(a.maxWard),minZone:parseInt(a.minZone),maxZone:parseInt(a.maxZone)};o==="create"&&(i.code=a.code.trim().toUpperCase()),await u(i),b()}catch(i){console.error("Error saving city corporation:",i),w(i.message||"Failed to save city corporation")}finally{S(!1)}}},b=()=>{v||(n({code:"",name:"",minWard:"1",maxWard:"100",minZone:"1",maxZone:"20"}),Z({}),w(null),h())};return e.jsxs(oe,{open:d,onClose:b,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(ie,{sx:{fontWeight:600,pb:1},children:o==="create"?"Add New City Corporation":"Edit City Corporation"}),e.jsx(le,{children:e.jsxs(p,{sx:{display:"flex",flexDirection:"column",gap:2.5,pt:2},children:[k&&e.jsx(O,{severity:"error",onClose:()=>w(null),children:k}),o==="create"&&e.jsx(F,{label:"City Corporation Code",value:a.code,onChange:i=>y("code",i.target.value.toUpperCase()),error:!!x.code,helperText:x.code||"e.g., DSCC, DNCC, CTGCC",fullWidth:!0,required:!0,disabled:v,inputProps:{maxLength:10,style:{textTransform:"uppercase"}}}),e.jsx(F,{label:"City Corporation Name",value:a.name,onChange:i=>y("name",i.target.value),error:!!x.name,helperText:x.name||"e.g., Dhaka South City Corporation",fullWidth:!0,required:!0,disabled:v}),e.jsxs(p,{children:[e.jsx(p,{sx:{fontWeight:600,color:"text.secondary",mb:1.5},children:"Ward Range"}),e.jsxs(p,{sx:{display:"flex",gap:2},children:[e.jsx(F,{label:"Minimum Ward *",type:"number",value:a.minWard,onChange:i=>y("minWard",i.target.value),error:!!x.minWard,helperText:x.minWard||"Starting ward number",fullWidth:!0,required:!0,disabled:v,inputProps:{min:1}}),e.jsx(F,{label:"Maximum Ward *",type:"number",value:a.maxWard,onChange:i=>y("maxWard",i.target.value),error:!!x.maxWard,helperText:x.maxWard||(s!=null&&s.actualMaxWard&&s.actualMaxWard>parseInt(a.maxWard||"0")?`âš ï¸ Ward ${s.actualMaxWard} exists! Set at least ${s.actualMaxWard}`:s!=null&&s.actualMaxWard?`Current highest: Ward ${s.actualMaxWard}`:"Use 9999 for unlimited"),fullWidth:!0,required:!0,disabled:v,inputProps:{min:1,max:9999}})]})]}),e.jsxs(p,{children:[e.jsx(p,{sx:{fontWeight:600,color:"text.secondary",mb:1.5},children:"Zone Range"}),e.jsxs(p,{sx:{display:"flex",gap:2},children:[e.jsx(F,{label:"Minimum Zone *",type:"number",value:a.minZone,onChange:i=>y("minZone",i.target.value),error:!!x.minZone,helperText:x.minZone||"Starting zone number",fullWidth:!0,required:!0,disabled:v,inputProps:{min:1}}),e.jsx(F,{label:"Maximum Zone *",type:"number",value:a.maxZone,onChange:i=>y("maxZone",i.target.value),error:!!x.maxZone,helperText:x.maxZone||(s!=null&&s.actualMaxZone&&s.actualMaxZone>parseInt(a.maxZone||"0")?`âš ï¸ Zone ${s.actualMaxZone} exists! Set at least ${s.actualMaxZone}`:s!=null&&s.actualMaxZone?`Current highest: Zone ${s.actualMaxZone}`:"Use 9999 for unlimited"),fullWidth:!0,required:!0,disabled:v,inputProps:{min:1,max:9999}})]})]})]})}),e.jsxs(de,{sx:{px:3,pb:2.5},children:[e.jsx(P,{onClick:b,disabled:v,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(P,{onClick:z,variant:"contained",disabled:v,sx:{textTransform:"none",minWidth:100,backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"}},children:v?e.jsx(G,{size:24}):o==="create"?"Create":"Save Changes"})]})]})};class ke{constructor(){me(this,"apiClient");this.apiClient=J.create({baseURL:ge.BASE_URL,timeout:ge.TIMEOUT,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.apiClient.interceptors.request.use(h=>{try{const u=localStorage.getItem("accessToken");u&&(h.headers.Authorization=`Bearer ${u}`)}catch(u){console.error("Error getting token:",u)}return h},h=>Promise.reject(h)),this.apiClient.interceptors.response.use(h=>h,h=>{var u;return((u=h.response)==null?void 0:u.status)===401&&window.location.pathname!=="/login"&&window.location.assign("/login"),Promise.reject(h)})}async getThanasByCityCorporation(h,u){var s,o;try{const a={cityCorporationCode:h};return u&&u!=="ALL"&&(a.status=u),(await this.apiClient.get("/api/admin/thanas",{params:a})).data.data}catch(a){throw J.isAxiosError(a)?new Error(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to fetch thanas"):a}}async createThana(h){var u,s;try{return(await this.apiClient.post("/api/admin/thanas",h)).data.data}catch(o){throw J.isAxiosError(o)?new Error(((s=(u=o.response)==null?void 0:u.data)==null?void 0:s.message)||"Failed to create thana"):o}}async updateThana(h,u){var s,o;try{return(await this.apiClient.put(`/api/admin/thanas/${h}`,u)).data.data}catch(a){throw J.isAxiosError(a)?new Error(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to update thana"):a}}async getThanaStats(h){var u,s;try{return(await this.apiClient.get(`/api/admin/thanas/${h}/statistics`)).data.data}catch(o){throw J.isAxiosError(o)?new Error(((s=(u=o.response)==null?void 0:u.data)==null?void 0:s.message)||"Failed to fetch thana statistics"):o}}}new ke;const Ee=({open:d,onClose:h,onSave:u,zone:s,cityCorporationId:o,cityCorporationName:a,mode:n})=>{const[x,Z]=l.useState(1),[v,S]=l.useState(""),[k,w]=l.useState(""),[E,y]=l.useState(""),[z,b]=l.useState(""),[i,j]=l.useState(""),[c,f]=l.useState(!1),[m,W]=l.useState(null),[L,R]=l.useState([]),[t,g]=l.useState(!1);l.useEffect(()=>{(async()=>{if(d&&n==="create"&&o){g(!0);try{console.log("ðŸ” Fetching available zones for CC:",o);const N=await Y.getAvailableZoneNumbers(o);console.log("âœ… Available zone numbers:",N),R(N),N.length>0&&Z(N[0])}catch(N){console.error("âŒ Error fetching available zones:",N),W("Failed to load available zones")}finally{g(!1)}}})()},[d,n,o]),l.useEffect(()=>{n==="edit"&&s?(Z(s.zoneNumber),S(s.name||""),w(s.officerName||""),y(s.officerDesignation||""),b(s.officerSerialNumber||""),j(s.officerPhone||"")):(S(""),w(""),y(""),b(""),j("")),W(null)},[n,s,d]);const I=async()=>{var T,N;try{f(!0),W(null);const M=n==="create"?{zoneNumber:x,name:v.trim()||void 0,cityCorporationId:o,officerName:k.trim()||void 0,officerDesignation:E.trim()||void 0,officerSerialNumber:z.trim()||void 0,officerPhone:i.trim()||void 0}:{name:v.trim()||void 0,officerName:k.trim()||void 0,officerDesignation:E.trim()||void 0,officerSerialNumber:z.trim()||void 0,officerPhone:i.trim()||void 0};await u(M),V()}catch(M){console.error("Error saving zone:",M),W(((N=(T=M.response)==null?void 0:T.data)==null?void 0:N.message)||M.message||"Failed to save zone")}finally{f(!1)}},V=()=>{c||(W(null),h())};return e.jsxs(oe,{open:d,onClose:V,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(ie,{sx:{fontWeight:600,pb:1},children:n==="create"?"Add New Zone":"Edit Zone"}),e.jsxs(le,{sx:{pt:2},children:[m&&e.jsx(O,{severity:"error",sx:{mb:2},onClose:()=>W(null),children:m}),e.jsxs(p,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[e.jsx(F,{fullWidth:!0,label:"City Corporation",value:a,disabled:!0,variant:"outlined"}),e.jsxs(xe,{fullWidth:!0,children:[e.jsx(he,{children:"Zone Number *"}),e.jsx(ue,{value:x,onChange:T=>Z(Number(T.target.value)),label:"Zone Number *",disabled:n==="edit"||c||t,children:n==="edit"?e.jsxs(_,{value:x,children:["Zone ",x]}):t?e.jsxs(_,{disabled:!0,children:[e.jsx(G,{size:20,sx:{mr:1}}),"Loading available zones..."]}):L.length===0?e.jsx(_,{disabled:!0,children:"No available zones (all zones are in use)"}):L.map(T=>e.jsxs(_,{value:T,children:["Zone ",T]},T))}),n==="create"&&!t&&e.jsx(p,{sx:{mt:.5,fontSize:"0.75rem",color:"text.secondary"},children:L.length===0?"All zones are already in use for this city corporation":`${L.length} zone(s) available`})]}),e.jsx(F,{fullWidth:!0,label:"Zone Name (Optional)",value:v,onChange:T=>S(T.target.value),placeholder:`Zone ${x}`,disabled:c,variant:"outlined",helperText:"Leave empty to use default name (e.g., Zone 1)"}),e.jsxs(p,{sx:{mt:1},children:[e.jsx(p,{sx:{borderTop:"1px solid #e0e0e0",pt:2,mb:2},children:e.jsx(p,{sx:{fontWeight:600,color:"text.secondary",mb:2},children:"Zone Officer Information (Optional)"})}),e.jsx(F,{fullWidth:!0,label:"Officer Name",value:k,onChange:T=>w(T.target.value),disabled:c,variant:"outlined",sx:{mb:2.5}}),e.jsx(F,{fullWidth:!0,label:"Officer Designation",value:E,onChange:T=>y(T.target.value),disabled:c,variant:"outlined",sx:{mb:2.5}}),e.jsx(F,{fullWidth:!0,label:"Officer Serial Number",value:z,onChange:T=>b(T.target.value),disabled:c,variant:"outlined",sx:{mb:2.5}}),e.jsx(F,{fullWidth:!0,label:"Officer Phone Number",value:i,onChange:T=>j(T.target.value),disabled:c,variant:"outlined"})]})]})]}),e.jsxs(de,{sx:{px:3,pb:2.5},children:[e.jsx(P,{onClick:V,disabled:c,sx:{textTransform:"none",px:3},children:"Cancel"}),e.jsx(P,{onClick:I,variant:"contained",disabled:c||n==="create"&&L.length===0,sx:{textTransform:"none",px:3,backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"}},children:c?e.jsx(G,{size:24,sx:{color:"white"}}):n==="create"?"Create Zone":"Update Zone"})]})]})},Te=({zones:d,loading:h,onEdit:u,onDelete:s,onSelectZone:o,selectedZoneId:a})=>h?e.jsx(X,{component:ee,elevation:0,children:e.jsxs(re,{children:[e.jsx(se,{children:e.jsxs($,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(r,{sx:{fontWeight:600},children:"Zone Number"}),e.jsx(r,{sx:{fontWeight:600},children:"Zone Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Officer Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Officer Designation"}),e.jsx(r,{sx:{fontWeight:600},children:"Officer Phone"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Wards"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Users"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ae,{children:Array.from({length:3}).map((n,x)=>e.jsxs($,{children:[e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})})]},x))})]})}):d.length===0?e.jsx(p,{sx:{textAlign:"center",py:4},children:e.jsx(C,{variant:"body1",color:"text.secondary",children:'No zones added yet. Click "Add Zone" to create the first zone.'})}):e.jsx(X,{component:ee,elevation:0,children:e.jsxs(re,{children:[e.jsx(se,{children:e.jsxs($,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(r,{sx:{fontWeight:600},children:"Zone Number"}),e.jsx(r,{sx:{fontWeight:600},children:"Zone Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Officer Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Officer Designation"}),e.jsx(r,{sx:{fontWeight:600},children:"Officer Phone"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Wards"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Users"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ae,{children:d.map(n=>{var x,Z;return e.jsxs($,{onClick:()=>o(n),sx:{cursor:"pointer",backgroundColor:a===n.id?"#e3f2fd":"transparent","&:hover":{backgroundColor:a===n.id?"#e3f2fd":"#f8f9fa"}},children:[e.jsx(r,{children:e.jsxs(C,{variant:"body1",sx:{fontWeight:600},children:["Zone ",n.zoneNumber]})}),e.jsx(r,{children:e.jsx(C,{variant:"body1",children:n.name||`Zone ${n.zoneNumber}`})}),e.jsx(r,{children:e.jsx(C,{variant:"body2",color:"text.secondary",children:n.officerName||"-"})}),e.jsx(r,{children:e.jsx(C,{variant:"body2",color:"text.secondary",children:n.officerDesignation||"-"})}),e.jsx(r,{children:e.jsx(C,{variant:"body2",color:"text.secondary",children:n.officerPhone||"-"})}),e.jsx(r,{children:e.jsx(D,{label:((x=n._count)==null?void 0:x.wards)||n.totalWards||0,size:"small",sx:{backgroundColor:"#f3e5f5",color:"#7b1fa2",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:((Z=n._count)==null?void 0:Z.users)||n.totalUsers||0,size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:n.status,size:"small",sx:{backgroundColor:n.status==="ACTIVE"?"#e8f5e8":"#ffebee",color:n.status==="ACTIVE"?"#2e7d2e":"#c62828",fontWeight:500}})}),e.jsx(r,{children:e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(U,{title:"Edit Zone",children:e.jsx(H,{size:"small",onClick:v=>{v.stopPropagation(),u(n)},sx:{color:"#1976d2","&:hover":{backgroundColor:"#e3f2fd"}},children:e.jsx(fe,{fontSize:"small"})})}),e.jsx(U,{title:"Delete Zone",children:e.jsx(H,{size:"small",onClick:v=>{v.stopPropagation(),s(n)},sx:{color:"#c62828","&:hover":{backgroundColor:"#ffebee"}},children:e.jsx(be,{fontSize:"small"})})})]})})]},n.id)})})]})}),Ie=({cityCorporationId:d,cityCorporationName:h,cityCorporationCode:u,onZoneSelect:s})=>{var I,V,T;const[o,a]=l.useState([]),[n,x]=l.useState(!1),[Z,v]=l.useState(null),[S,k]=l.useState(null),[w,E]=l.useState(!1),[y,z]=l.useState("create"),[b,i]=l.useState(null),[j,c]=l.useState(!1);l.useEffect(()=>{console.log("ðŸ”„ ZoneManagement: cityCorporationId changed:",d),d&&f()},[d]);const f=async()=>{var N,M,B;try{console.log("ðŸ“¡ Fetching zones for city corporation:",d),x(!0),v(null);const q=await Y.getZonesByCityCorporation(d,"ALL");console.log("âœ… Zones fetched:",q.length,"zones"),console.log("   First zone:",q[0]),a(q)}catch(q){console.error("âŒ Error fetching zones:",q),console.error("   Error details:",(N=q.response)==null?void 0:N.data),v(((B=(M=q.response)==null?void 0:M.data)==null?void 0:B.message)||q.message||"Failed to load zones")}finally{x(!1)}},m=()=>{k(null),z("create"),E(!0)},W=N=>{k(N),z("edit"),E(!0)},L=async N=>{try{y==="create"?await Y.createZone(N):S&&await Y.updateZone(S.id,N),await f(),E(!1)}catch(M){throw console.error("Error saving zone:",M),M}},R=N=>{i(N),c(!0)},t=async()=>{var N,M;if(b)try{await Y.deleteZone(b.id),await f(),c(!1),i(null),(S==null?void 0:S.id)===b.id&&(k(null),s==null||s(null))}catch(B){console.error("Error deleting zone:",B),v(((M=(N=B.response)==null?void 0:N.data)==null?void 0:M.message)||B.message||"Failed to delete zone"),c(!1)}},g=N=>{k(N),s==null||s(N)};return e.jsxs(te,{sx:{borderRadius:2,border:"2px solid #4CAF50",mt:3,boxShadow:"0 4px 12px rgba(76, 175, 80, 0.15)"},children:[e.jsxs(ne,{sx:{p:3,backgroundColor:"#f1f8f4"},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(p,{children:[e.jsxs(C,{variant:"h5",sx:{fontWeight:700,mb:.5,color:"#2e7d32"},children:["ðŸ¢ Zone Management - ",h]}),e.jsxs(C,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:["Manage zones for ",u]})]}),e.jsx(P,{variant:"contained",startIcon:e.jsx(ce,{}),onClick:m,sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"},textTransform:"none",px:3,py:1.5,fontSize:"1rem",fontWeight:600},children:"Add Zone"})]}),Z&&e.jsx(O,{severity:"error",sx:{mb:3},onClose:()=>v(null),children:Z}),e.jsx(Te,{zones:o,loading:n,onEdit:W,onDelete:R,onSelectZone:g,selectedZoneId:S==null?void 0:S.id})]}),e.jsx(Ee,{open:w,onClose:()=>{E(!1),k(null)},onSave:L,zone:y==="edit"?S:null,cityCorporationId:d,cityCorporationName:h,mode:y}),e.jsxs(oe,{open:j,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(ie,{children:"Delete Zone"}),e.jsxs(le,{children:[e.jsxs(C,{children:["Are you sure you want to delete Zone ",b==null?void 0:b.zoneNumber,"?"]}),b&&(((I=b._count)==null?void 0:I.wards)||0)>0&&e.jsxs(O,{severity:"warning",sx:{mt:2},children:["This zone has ",(V=b._count)==null?void 0:V.wards," ward(s). You must remove all wards before deleting the zone."]})]}),e.jsxs(de,{children:[e.jsx(P,{onClick:()=>c(!1),sx:{textTransform:"none"},children:"Cancel"}),e.jsx(P,{onClick:t,color:"error",variant:"contained",sx:{textTransform:"none"},disabled:!!(b&&(((T=b._count)==null?void 0:T.wards)||0)>0),children:"Delete"})]})]})]})},ze=({wards:d,loading:h,onEdit:u,onDelete:s})=>h?e.jsx(X,{component:ee,elevation:0,children:e.jsxs(re,{children:[e.jsx(se,{children:e.jsxs($,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(r,{sx:{fontWeight:600},children:"Ward Number"}),e.jsx(r,{sx:{fontWeight:600},children:"Inspector Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Inspector Serial"}),e.jsx(r,{sx:{fontWeight:600},children:"Inspector Phone"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Users"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ae,{children:Array.from({length:3}).map((o,a)=>e.jsxs($,{children:[e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})})]},a))})]})}):!d||!Array.isArray(d)?(console.error("Invalid wards data:",d),e.jsx(p,{sx:{textAlign:"center",py:4},children:e.jsx(C,{variant:"body1",color:"text.secondary",children:"Error loading wards. Please try again."})})):d.length===0?e.jsx(p,{sx:{textAlign:"center",py:4},children:e.jsx(C,{variant:"body1",color:"text.secondary",children:'No wards added yet. Click "Add Wards" to create wards for this zone.'})}):e.jsxs(e.Fragment,{children:[e.jsx(p,{sx:{mb:2,p:2,backgroundColor:"#f8f9fa",borderRadius:1},children:e.jsxs(C,{variant:"body2",color:"text.secondary",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"}),' Click the Edit button to assign inspector name and serial number to wards. Wards without assigned inspectors will show "Not Assigned".']})}),e.jsx(X,{component:ee,elevation:0,children:e.jsxs(re,{children:[e.jsx(se,{children:e.jsxs($,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(r,{sx:{fontWeight:600},children:"Ward Number"}),e.jsx(r,{sx:{fontWeight:600},children:"Inspector Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Inspector Serial"}),e.jsx(r,{sx:{fontWeight:600},children:"Inspector Phone"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Users"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ae,{children:d.map(o=>{var a;return e.jsxs($,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(r,{children:e.jsxs(C,{variant:"body1",sx:{fontWeight:600},children:["Ward ",o.wardNumber]})}),e.jsx(r,{children:o.inspectorName?e.jsx(C,{variant:"body2",color:"text.secondary",children:o.inspectorName}):e.jsx(U,{title:"Click Edit to assign inspector",children:e.jsx(D,{label:"Not Assigned",size:"small",sx:{backgroundColor:"#fff3e0",color:"#e65100",fontWeight:500,cursor:"pointer"}})})}),e.jsx(r,{children:o.inspectorSerialNumber?e.jsx(C,{variant:"body2",color:"text.secondary",children:o.inspectorSerialNumber}):e.jsx(U,{title:"Click Edit to assign serial number",children:e.jsx(D,{label:"Not Assigned",size:"small",sx:{backgroundColor:"#fff3e0",color:"#e65100",fontWeight:500,cursor:"pointer"}})})}),e.jsx(r,{children:o.inspectorPhone?e.jsx(C,{variant:"body2",color:"text.secondary",children:o.inspectorPhone}):e.jsx(U,{title:"Click Edit to assign phone number",children:e.jsx(D,{label:"No Phone",size:"small",sx:{backgroundColor:"#fff3e0",color:"#e65100",fontWeight:500,cursor:"pointer"}})})}),e.jsx(r,{children:e.jsx(D,{label:((a=o._count)==null?void 0:a.users)||o.totalUsers||0,size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:o.status,size:"small",sx:{backgroundColor:o.status==="ACTIVE"?"#e8f5e8":"#ffebee",color:o.status==="ACTIVE"?"#2e7d2e":"#c62828",fontWeight:500}})}),e.jsxs(r,{children:[e.jsx(U,{title:"Edit Ward",children:e.jsx(H,{size:"small",onClick:()=>u(o),sx:{color:"#1976d2","&:hover":{backgroundColor:"#e3f2fd"},mr:1},children:e.jsx(fe,{fontSize:"small"})})}),e.jsx(U,{title:"Delete Ward",children:e.jsx(H,{size:"small",onClick:()=>s(o.id),sx:{color:"#d32f2f","&:hover":{backgroundColor:"#ffebee"}},children:e.jsx(be,{fontSize:"small"})})})]})]},o.id)})})]})})]}),Fe=({open:d,onClose:h,onSave:u,ward:s})=>{const[o,a]=l.useState(""),[n,x]=l.useState(""),[Z,v]=l.useState([]),[S,k]=l.useState(""),[w,E]=l.useState(""),[y,z]=l.useState(""),[b,i]=l.useState(!1),[j,c]=l.useState(!1),[f,m]=l.useState(null);l.useEffect(()=>{var t,g,I;s&&(a(((t=s.wardNumber)==null?void 0:t.toString())||""),x(s.zoneId||""),k(s.inspectorName||""),E(s.inspectorSerialNumber||""),z(s.inspectorPhone||""),(I=(g=s.zone)==null?void 0:g.cityCorporation)!=null&&I.id&&W(s.zone.cityCorporation.id)),m(null)},[s,d]);const W=async t=>{try{c(!0);const g=await Y.getZonesByCityCorporation(t,"ACTIVE");v(g)}catch(g){console.error("Error fetching zones:",g)}finally{c(!1)}},L=async()=>{var t,g;try{i(!0),m(null);const I={wardNumber:parseInt(o),zoneId:n?Number(n):void 0,inspectorName:S.trim()||void 0,inspectorSerialNumber:w.trim()||void 0,inspectorPhone:y.trim()||void 0};await u(I),R()}catch(I){console.error("Error saving ward:",I),m(((g=(t=I.response)==null?void 0:t.data)==null?void 0:g.message)||I.message||"Failed to save ward")}finally{i(!1)}},R=()=>{b||(m(null),h())};return e.jsxs(oe,{open:d,onClose:R,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsxs(ie,{sx:{fontWeight:600,pb:1},children:["Edit Ward ",s.wardNumber]}),e.jsxs(le,{sx:{pt:2},children:[f&&e.jsx(O,{severity:"error",sx:{mb:2},onClose:()=>m(null),children:f}),e.jsxs(p,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[e.jsx(F,{fullWidth:!0,label:"Ward Number",value:o,onChange:t=>a(t.target.value),disabled:b,variant:"outlined",type:"number",helperText:"Ensure this Ward Number is unique within the City Corporation"}),e.jsxs(xe,{fullWidth:!0,variant:"outlined",children:[e.jsx(he,{id:"zone-select-label",children:"Zone"}),e.jsx(ue,{labelId:"zone-select-label",value:n,onChange:t=>x(t.target.value),label:"Zone",disabled:b||j,children:Z.map(t=>e.jsx(_,{value:t.id,children:`Zone ${t.zoneNumber}${t.name?` - ${t.name}`:""}`},t.id))})]}),e.jsxs(p,{sx:{mt:1},children:[e.jsx(p,{sx:{borderTop:"1px solid #e0e0e0",pt:2,mb:2},children:e.jsx(p,{sx:{fontWeight:600,color:"text.secondary",mb:2},children:"Ward Inspector Information"})}),e.jsx(F,{fullWidth:!0,label:"Inspector Name",value:S,onChange:t=>k(t.target.value),disabled:b,variant:"outlined",sx:{mb:2.5},helperText:"Enter the name of the cleanliness inspector for this ward"}),e.jsx(F,{fullWidth:!0,label:"Inspector Serial Number",value:w,onChange:t=>E(t.target.value),disabled:b,variant:"outlined",sx:{mb:2.5},helperText:"Enter the serial number of the inspector"}),e.jsx(F,{fullWidth:!0,label:"Inspector Phone Number",value:y,onChange:t=>z(t.target.value),disabled:b,variant:"outlined",helperText:"Enter the contact number of the inspector"})]})]})]}),e.jsxs(de,{sx:{px:3,pb:2.5},children:[e.jsx(P,{onClick:R,disabled:b,sx:{textTransform:"none",px:3},children:"Cancel"}),e.jsx(P,{onClick:L,variant:"contained",disabled:b,sx:{textTransform:"none",px:3,backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"}},children:b?e.jsx(G,{size:24,sx:{color:"white"}}):"Update Ward"})]})]})},Me=({open:d,onClose:h,onSave:u,zoneId:s,zoneName:o})=>{const[a,n]=l.useState([]),[x,Z]=l.useState([]),[v,S]=l.useState(!1),[k,w]=l.useState(!1),[E,y]=l.useState(null);l.useEffect(()=>{d&&s&&z()},[d,s]);const z=async()=>{var f,m;try{w(!0),y(null);const W=await Q.getAvailableWardNumbers(s);Z(W)}catch(W){console.error("Error fetching available ward numbers:",W),y(((m=(f=W.response)==null?void 0:f.data)==null?void 0:m.message)||W.message||"Failed to load available wards")}finally{w(!1)}},b=f=>{const m=f.target.value;n(typeof m=="string"?m.split(",").map(Number):m)},i=async()=>{var f,m;try{if(S(!0),y(null),a.length===0){y("Please select at least one ward");return}if(a.length>12){y("Maximum 12 wards can be added to a zone");return}await u(a),j()}catch(W){console.error("Error saving wards:",W),y(((m=(f=W.response)==null?void 0:f.data)==null?void 0:m.message)||W.message||"Failed to save wards")}finally{S(!1)}},j=()=>{v||(n([]),y(null),h())},c=a.length>12;return e.jsxs(oe,{open:d,onClose:j,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsxs(ie,{sx:{fontWeight:600,pb:1},children:["Add Wards to ",o]}),e.jsxs(le,{sx:{pt:2},children:[E&&e.jsx(O,{severity:"error",sx:{mb:2},onClose:()=>y(null),children:E}),k?e.jsx(p,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(G,{})}):x.length===0?e.jsx(O,{severity:"info",children:"No available ward numbers. All wards have been added to this zone."}):e.jsxs(p,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[e.jsxs(xe,{fullWidth:!0,children:[e.jsx(he,{children:"Select Wards (up to 12)"}),e.jsx(ue,{multiple:!0,value:a,onChange:b,label:"Select Wards (up to 12)",disabled:v,renderValue:f=>e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:f.map(m=>e.jsx(D,{label:`Ward ${m}`,size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2"}},m))}),children:x.map(f=>e.jsxs(_,{value:f,children:[e.jsx(We,{checked:a.includes(f)}),e.jsx(Ce,{primary:`Ward ${f}`})]},f))})]}),e.jsxs(p,{sx:{p:2,backgroundColor:"#f8f9fa",borderRadius:1,border:"1px solid #e0e0e0"},children:[e.jsx(C,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Selection Summary"}),e.jsxs(C,{variant:"body2",color:"text.secondary",children:["Selected: ",a.length," ward(s)"]}),e.jsxs(C,{variant:"body2",color:"text.secondary",children:["Available: ",x.length," ward(s)"]}),e.jsx(C,{variant:"body2",color:"text.secondary",children:"Maximum allowed: 12 wards per zone"})]}),c&&e.jsxs(O,{severity:"warning",children:["Maximum 12 wards can be added to a zone. Please deselect"," ",a.length-12," ward(s)."]}),a.length>0&&!c&&e.jsxs(O,{severity:"info",children:[a.length," ward(s) will be created. You can add inspector information later by editing each ward."]})]})]}),e.jsxs(de,{sx:{px:3,pb:2.5},children:[e.jsx(P,{onClick:j,disabled:v,sx:{textTransform:"none",px:3},children:"Cancel"}),e.jsx(P,{onClick:i,variant:"contained",disabled:v||k||a.length===0||c||x.length===0,sx:{textTransform:"none",px:3,backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"}},children:v?e.jsx(G,{size:24,sx:{color:"white"}}):`Add ${a.length} Ward${a.length!==1?"s":""}`})]})]})},De=({zone:d})=>{const[h,u]=l.useState([]),[s,o]=l.useState(!1),[a,n]=l.useState(null),[x,Z]=l.useState(null),[v,S]=l.useState(!1),[k,w]=l.useState(!1);l.useEffect(()=>{d?E():u([])},[d]);const E=async()=>{var c,f;if(d)try{o(!0),n(null);const m=await Q.getWardsByZone(d.id,"ALL");let W=[];Array.isArray(m)?W=m:m&&typeof m=="object"&&(Array.isArray(m.wards)?W=m.wards:Array.isArray(m.data)&&(W=m.data)),u(W)}catch(m){console.error("Error fetching wards:",m),n(((f=(c=m.response)==null?void 0:c.data)==null?void 0:f.message)||m.message||"Failed to load wards"),u([])}finally{o(!1)}},y=()=>{w(!0)},z=c=>{Z(c),S(!0)},b=async c=>{if(d)try{await Q.createWardsBulk(d.id,c),await E(),w(!1)}catch(f){throw console.error("Error creating wards:",f),f}},i=async c=>{if(x)try{await Q.updateWard(x.id,c),await E(),S(!1),Z(null)}catch(f){throw console.error("Error updating ward:",f),f}},j=async c=>{var f,m;if(window.confirm("Are you sure you want to delete this ward?"))try{await Q.deleteWard(c),await E()}catch(W){console.error("Error deleting ward:",W),n(((m=(f=W.response)==null?void 0:f.data)==null?void 0:m.message)||W.message||"Failed to delete ward")}};return d?e.jsxs(te,{sx:{borderRadius:2,border:"2px solid #2196F3",mt:3,boxShadow:"0 4px 12px rgba(33, 150, 243, 0.15)"},children:[e.jsxs(ne,{sx:{p:3,backgroundColor:"#e3f2fd"},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(p,{children:[e.jsxs(C,{variant:"h5",sx:{fontWeight:700,mb:.5,color:"#1565c0"},children:["ðŸ“ Ward Management - ",d.name||`Zone ${d.zoneNumber}`]}),e.jsxs(C,{variant:"body1",color:"text.secondary",sx:{fontWeight:500},children:["Manage wards for Zone ",d.zoneNumber]})]}),e.jsx(P,{variant:"contained",startIcon:e.jsx(ce,{}),onClick:y,sx:{backgroundColor:"#2196F3","&:hover":{backgroundColor:"#1976d2"},textTransform:"none",px:3,py:1.5,fontSize:"1rem",fontWeight:600},children:"Add Wards"})]}),a&&e.jsx(O,{severity:"error",sx:{mb:3},onClose:()=>n(null),children:a}),e.jsx(ze,{wards:h,loading:s,onEdit:z,onDelete:j})]}),e.jsx(Me,{open:k,onClose:()=>w(!1),onSave:b,zoneId:d.id,zoneName:d.name||`Zone ${d.zoneNumber}`}),x&&e.jsx(Fe,{open:v,onClose:()=>{S(!1),Z(null)},onSave:i,ward:x})]}):e.jsx(te,{sx:{borderRadius:2,border:"1px solid #e0e0e0",mt:3},children:e.jsx(ne,{sx:{p:3},children:e.jsx(p,{sx:{textAlign:"center",py:4},children:e.jsx(C,{variant:"body1",color:"text.secondary",children:"Select a zone to manage its wards"})})})})},Ve=()=>{const[d,h]=l.useState([]),[u,s]=l.useState(!0),[o,a]=l.useState(null),[n,x]=l.useState(null),[Z,v]=l.useState(null),[S,k]=l.useState(!1),[w,E]=l.useState("create"),[y,z]=l.useState({open:!1,message:"",severity:"success"});l.useEffect(()=>{b()},[]);const b=async()=>{var t;try{s(!0),a(null);const g=await K.getCityCorporations("ALL");console.log("ðŸ¢ City Corporations Response:",g),console.log("ðŸ“Š First City Corp Data:",(t=g.cityCorporations)==null?void 0:t[0]),h(g.cityCorporations||[])}catch(g){console.error("Error fetching city corporations:",g),a(g.message||"Failed to load city corporations"),W("Failed to load city corporations","error"),h([])}finally{s(!1)}},i=()=>{x(null),E("create"),k(!0)},j=t=>{x(t),E("edit"),k(!0)},c=async t=>{try{if(w==="create"?(await K.createCityCorporation(t),W("City corporation created successfully","success")):n&&(console.log("ðŸ”„ Updating city corporation:",n.code,t),await K.updateCityCorporation(n.code,t),W("City corporation updated successfully","success")),console.log("ðŸ“¡ Fetching updated city corporations..."),s(!0),await b(),n){const I=(await K.getCityCorporations("ALL")).cityCorporations.find(V=>V.code===n.code);I&&(console.log("âœ… Updated selected city corporation:",I),x(I))}s(!1),console.log("âœ… City corporations refreshed")}catch(g){throw console.error("Error saving city corporation:",g),s(!1),g}},f=async t=>{try{const g=t.status==="ACTIVE"?"INACTIVE":"ACTIVE";await K.updateCityCorporation(t.code,{status:g}),W(`City corporation ${g==="ACTIVE"?"activated":"deactivated"} successfully`,"success"),await b(),(n==null?void 0:n.code)===t.code&&x(I=>I?{...I,status:g}:null)}catch(g){console.error("Error toggling city corporation status:",g),W("Failed to update city corporation status","error")}},m=t=>{console.log("ðŸ¢ Selected City Corporation:",t),x(t),v(null)},W=(t,g)=>{z({open:!0,message:t,severity:g})},L=()=>{z(t=>({...t,open:!1}))},R=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsx(ye,{children:e.jsxs(Se,{title:"City Corporation Management",children:[e.jsxs(p,{sx:{width:"100%",maxWidth:"100%",px:1.5,mx:0},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsxs(p,{children:[e.jsx(C,{variant:"h4",sx:{fontWeight:600,mb:.5,color:"text.primary"},children:"City Corporation Management"}),e.jsx(C,{variant:"body1",color:"text.secondary",children:"Manage city corporations and their thanas/areas"})]}),e.jsx(P,{variant:"contained",startIcon:e.jsx(ce,{}),onClick:i,sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"},textTransform:"none",px:3,py:1.5,borderRadius:2},children:"Add City Corporation"})]}),o&&e.jsx(O,{severity:"error",sx:{mb:3},onClose:()=>a(null),children:o}),e.jsx(te,{sx:{borderRadius:2,border:"1px solid #e0e0e0",mb:3},children:e.jsxs(ne,{sx:{p:3},children:[e.jsx(C,{variant:"h6",sx:{fontWeight:600,mb:3},children:"City Corporations"}),e.jsx(X,{component:ee,elevation:0,children:e.jsxs(re,{children:[e.jsx(se,{children:e.jsxs($,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(r,{sx:{fontWeight:600},children:"Code"}),e.jsx(r,{sx:{fontWeight:600},children:"Name"}),e.jsx(r,{sx:{fontWeight:600},children:"Zone Range"}),e.jsx(r,{sx:{fontWeight:600},children:"Ward Range"}),e.jsx(r,{sx:{fontWeight:600},children:"Status"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Users"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Complaints"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Zones"}),e.jsx(r,{sx:{fontWeight:600},children:"Total Wards"}),e.jsx(r,{sx:{fontWeight:600},children:"Created"}),e.jsx(r,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ae,{children:u?Array.from({length:3}).map((t,g)=>e.jsxs($,{children:[e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})}),e.jsx(r,{children:e.jsx(A,{variant:"rectangular",height:30})})]},g)):d.length===0?e.jsx($,{children:e.jsx(r,{colSpan:11,children:e.jsxs(p,{sx:{textAlign:"center",py:4},children:[e.jsx(je,{sx:{fontSize:48,color:"#9e9e9e",mb:2}}),e.jsx(C,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"No city corporations added yet"}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(ce,{}),onClick:i,sx:{textTransform:"none"},children:"Add First City Corporation"})]})})}):d.map(t=>e.jsxs($,{onClick:()=>m(t),sx:{cursor:"pointer",backgroundColor:(n==null?void 0:n.id)===t.id?"#e3f2fd":"transparent","&:hover":{backgroundColor:(n==null?void 0:n.id)===t.id?"#e3f2fd":"#f8f9fa"}},children:[e.jsx(r,{children:e.jsx(C,{variant:"body1",sx:{fontWeight:600},children:t.code})}),e.jsx(r,{children:e.jsx(C,{variant:"body1",sx:{fontWeight:500},children:t.name})}),e.jsx(r,{children:e.jsxs(C,{variant:"body2",color:"text.secondary",children:[t.minZone," - ",t.maxZone]})}),e.jsx(r,{children:e.jsxs(C,{variant:"body2",color:"text.secondary",children:[t.minWard," - ",t.maxWard]})}),e.jsx(r,{children:e.jsx(D,{label:t.status,size:"small",sx:{backgroundColor:t.status==="ACTIVE"?"#e8f5e8":"#ffebee",color:t.status==="ACTIVE"?"#2e7d2e":"#c62828",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:t.totalUsers||0,size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:t.totalComplaints||0,size:"small",sx:{backgroundColor:"#fff3e0",color:"#e65100",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:t.totalZones||0,size:"small",sx:{backgroundColor:"#f3e5f5",color:"#7b1fa2",fontWeight:500}})}),e.jsx(r,{children:e.jsx(D,{label:t.totalWards||0,size:"small",sx:{backgroundColor:"#e1f5fe",color:"#0277bd",fontWeight:500}})}),e.jsx(r,{children:e.jsx(C,{variant:"body2",color:"text.secondary",children:R(t.createdAt)})}),e.jsx(r,{children:e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(U,{title:"Edit",children:e.jsx(H,{size:"small",onClick:g=>{g.stopPropagation(),j(t)},sx:{color:"#1976d2","&:hover":{backgroundColor:"#e3f2fd"}},children:e.jsx(fe,{fontSize:"small"})})}),e.jsx(U,{title:t.status==="ACTIVE"?"Deactivate":"Activate",children:e.jsx(H,{size:"small",onClick:g=>{g.stopPropagation(),f(t)},sx:{color:t.status==="ACTIVE"?"#c62828":"#2e7d2e","&:hover":{backgroundColor:t.status==="ACTIVE"?"#ffebee":"#e8f5e8"}},children:t.status==="ACTIVE"?e.jsx(Ze,{fontSize:"small"}):e.jsx(we,{fontSize:"small"})})})]})})]},t.id))})]})})]})}),n?e.jsx(p,{sx:{mt:3},children:e.jsx(Ie,{cityCorporationId:n.id,cityCorporationName:n.name,cityCorporationCode:n.code,onZoneSelect:v})}):e.jsx(te,{sx:{borderRadius:2,border:"2px dashed #9e9e9e",mt:3,backgroundColor:"#fafafa"},children:e.jsxs(ne,{sx:{p:4,textAlign:"center"},children:[e.jsx(je,{sx:{fontSize:64,color:"#9e9e9e",mb:2}}),e.jsx(C,{variant:"h6",sx:{fontWeight:600,mb:1,color:"#616161"},children:"Select a City Corporation"}),e.jsx(C,{variant:"body1",color:"text.secondary",children:"Click on any City Corporation from the table above to manage its zones and wards"})]})}),Z&&e.jsx(p,{sx:{mt:3},children:e.jsx(De,{zone:Z})}),!1]}),e.jsx(Ae,{open:S,onClose:()=>{k(!1),x(null)},onSave:c,cityCorporation:w==="edit"?n:void 0,mode:w}),e.jsx(Ne,{open:y.open,autoHideDuration:6e3,onClose:L,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(O,{onClose:L,severity:y.severity,sx:{width:"100%"},children:y.message})})]})})};export{Ve as default};
