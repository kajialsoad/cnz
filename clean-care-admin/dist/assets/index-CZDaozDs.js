import{j as e,bf as Le,g as D,C as ae,p as Q,s as ce,t as de,T as s,i as J,v as xe,w as he,br as ve,bs as Ce,bt as Se,x as ue,b as O,B as d,bh as x,_ as te,av as re,$ as ne,a1 as N,bg as V,F as Oe,A as Ue,H as fe,D as H,az as k,bi as Ze,bj as Fe,bk as je,bl as Xe,bm as _e,e as G,f as Y,I as qe,Z as Be,bn as He,bo as me,m as ge,aq as Ge,au as Ye,as as be,at as B,bp as Qe,bq as Je,ar as Ke,aW as es}from"./mui-vendor-Brc-2iiC.js";import{r as u,a as ze}from"./react-vendor-D7yrL1sD.js";import{k as ss,d as Ie,e as Z,n as L,U as R,u as ts,o as ee,p as le,q as se,r as rs,M as ns}from"./index-DBuvollO.js";import{u as We,C as y}from"./index.esm-BZx2A40c.js";import{A as Ee}from"./AvatarUpload-DOZ5OuKq.js";import{a as os}from"./activityLogService-4TQmaHer.js";import{f as is}from"./format-DAszCIR7.js";import"./query-vendor-CZVuOxbJ.js";import"./chart-vendor-CrjdDA16.js";const Me=({value:t,onChange:h,cityCorporationCode:f,label:r="Assigned Zones",error:w,helperText:m,disabled:g})=>{const[v,p]=u.useState([]),[A,$]=u.useState(!1),[l,W]=u.useState(!1);u.useEffect(()=>{f?(async()=>{try{$(!0);const E=await ss.getZones({cityCorporationCode:f,status:"ACTIVE"});E.zones&&p(E.zones)}catch(E){console.error("Failed to fetch zones:",E)}finally{$(!1)}})():p([])},[f]);const T=v.filter(a=>t.includes(a.id));return e.jsx(Le,{multiple:!0,open:l,onOpen:()=>W(!0),onClose:()=>W(!1),options:v,getOptionLabel:a=>a.name||`Zone ${a.id}`,value:T,onChange:(a,E)=>{const C=E.map(b=>b.id);h(C)},isOptionEqualToValue:(a,E)=>a.id===E.id,loading:A,disabled:g,renderTags:(a,E)=>a.map((C,b)=>u.createElement(Q,{label:C.name||`Zone ${C.id}`,...E({index:b}),size:"small",key:C.id})),renderInput:a=>e.jsx(D,{...a,label:r,error:w,helperText:m,InputProps:{...a.InputProps,endAdornment:e.jsxs(ze.Fragment,{children:[A?e.jsx(ae,{color:"inherit",size:20}):null,a.InputProps.endAdornment]})}}),noOptionsText:"No zones found"})},ye=["‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø","‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤","‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶®"],as=({open:t,onClose:h,onSuccess:f})=>{const[r,w]=u.useState(0),[m,g]=u.useState(void 0),[v,p]=u.useState(!1),[A,$]=u.useState([]),{control:l,handleSubmit:W,watch:T,reset:a,setValue:E,getValues:C,formState:{errors:b}}=We({defaultValues:{firstName:"",lastName:"",phone:"",email:"",password:"",cityCorporationCode:"",zoneIds:[],permissions:{zones:[],categories:[],features:{viewOnlyMode:!1,chat:!0,customerProfile:!0,reviews:!0,messaging:!0,complaintManagement:!0,complaintApproval:!0,adminManagement:!0,reports:"download"}}},shouldUnregister:!1}),I=T("cityCorporationCode");u.useEffect(()=>{t&&(async()=>{try{const j=await Ie.getCityCorporations();$(j.cityCorporations||[])}catch(j){console.error("Error loading city corporations:",j)}})()},[t]);const S=()=>{w(i=>i+1)},F=()=>{w(i=>i-1)},X=()=>{w(0),a(),g(void 0),h()},_=async i=>{var j,n;console.log("üöÄ Final Form Data (onSubmit arg):",i),console.log("üßê getValues() result:",C()),console.log("‚ùå Form Errors:",b),i.firstName||console.error("CRITICAL: firstName is missing in data object!"),p(!0);try{const c={firstName:i.firstName,lastName:i.lastName,phone:i.phone,email:i.email||void 0,password:i.password,cityCorporationCode:i.cityCorporationCode||void 0,zoneId:void 0,permissions:i.permissions},P=await Z.createSuperAdmin(c);i.zoneIds&&i.zoneIds.length>0&&await Z.assignZones(P.id,i.zoneIds),L.success("‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"),X(),f()}catch(c){console.error("Error creating super admin:",c),L.error(((n=(j=c.response)==null?void 0:j.data)==null?void 0:n.message)||"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}finally{p(!1)}},U=()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{display:r===0?"block":"none"},children:e.jsxs(x,{spacing:2,children:[e.jsx(x,{direction:"row",spacing:2,alignItems:"center",justifyContent:"center",children:e.jsx(Ee,{currentAvatar:m,onUpload:async i=>g(i),size:80,initials:"?"})}),e.jsx(y,{name:"firstName",control:l,rules:{required:"‡¶®‡¶æ‡¶Æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï"},render:({field:i})=>{var j;return e.jsx(D,{...i,label:"‡¶®‡¶æ‡¶Æ *",placeholder:"‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",error:!!b.firstName,helperText:(j=b.firstName)==null?void 0:j.message,fullWidth:!0})}}),e.jsx(y,{name:"lastName",control:l,rules:{required:"‡¶™‡¶¶‡¶¨‡ßÄ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï"},render:({field:i})=>{var j;return e.jsx(D,{...i,label:"‡¶™‡¶¶‡¶¨‡ßÄ *",placeholder:"‡¶™‡¶¶‡¶¨‡ßÄ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",error:!!b.lastName,helperText:(j=b.lastName)==null?void 0:j.message,fullWidth:!0})}}),e.jsx(y,{name:"phone",control:l,rules:{required:"‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï",pattern:{value:/^01[0-9]{9}$/,message:"‡¶∏‡¶†‡¶ø‡¶ï ‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶® (‡ßß‡ßß ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü)"}},render:({field:i})=>{var j;return e.jsx(D,{...i,label:"‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ *",placeholder:"01XXXXXXXXX",error:!!b.phone,helperText:(j=b.phone)==null?void 0:j.message,fullWidth:!0})}}),e.jsx(y,{name:"email",control:l,rules:{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®"}},render:({field:i})=>{var j;return e.jsx(D,{...i,label:"‡¶á‡¶Æ‡ßá‡¶á‡¶≤",placeholder:"email@example.com",error:!!b.email,helperText:(j=b.email)==null?void 0:j.message,fullWidth:!0})}}),e.jsx(y,{name:"password",control:l,rules:{required:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï",minLength:{value:8,message:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ßÆ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá"}},render:({field:i})=>{var j;return e.jsx(D,{...i,type:"password",label:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *",placeholder:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",error:!!b.password,helperText:(j=b.password)==null?void 0:j.message,fullWidth:!0})}})]})}),e.jsx(d,{sx:{display:r===1?"block":"none"},children:e.jsxs(x,{spacing:2,children:[e.jsx(y,{name:"cityCorporationCode",control:l,rules:{required:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"},render:({field:i})=>e.jsxs(te,{fullWidth:!0,error:!!b.cityCorporationCode,children:[e.jsx(re,{children:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶® *"}),e.jsx(ne,{...i,label:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶® *",children:A.map(j=>e.jsx(N,{value:j.code,children:j.name},j.code))}),b.cityCorporationCode&&e.jsx(s,{variant:"caption",color:"error",sx:{mt:.5,ml:2},children:b.cityCorporationCode.message})]})}),e.jsx(y,{name:"zoneIds",control:l,rules:{required:"‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ú‡ßã‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"},render:({field:i})=>{var j;return e.jsx(Me,{value:i.value,onChange:i.onChange,cityCorporationCode:I,label:"‡¶ú‡ßã‡¶® (‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá) *",error:!!b.zoneIds,helperText:(j=b.zoneIds)==null?void 0:j.message,disabled:!I||v})}}),e.jsxs(d,{sx:{bgcolor:"#fff3cd",p:2,borderRadius:1,border:"1px solid #ffc107"},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#856404",mb:1},children:"‚ö†Ô∏è ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø:"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ",e.jsx("strong",{children:"Zone"})," ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Ø‡¶º‡¶ø‡¶§‡ßç‡¶¨‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ Zone ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ",e.jsx("strong",{children:"Ward"})," ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ Zone ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ",e.jsx("strong",{children:"Admin"})," (Ward Inspector) ‡¶¶‡ßá‡¶∞ manage ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ Zone ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ",e.jsx("strong",{children:"User"})," ‡¶è‡¶¨‡¶Ç ",e.jsx("strong",{children:"Complaint"})," ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"]})]})]})}),e.jsx(d,{sx:{display:r===2?"block":"none"},children:e.jsxs(x,{spacing:2.5,children:[e.jsx(s,{variant:"subtitle2",sx:{fontWeight:600,color:"#1e2939"},children:"‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏"}),e.jsx(d,{sx:{bgcolor:"#f0f9ff",p:2,borderRadius:1,border:"1px solid #3b82f6"},children:e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(d,{children:[e.jsx(s,{sx:{fontWeight:600,color:"#1e40af"},children:"View Only Mode"}),e.jsx(s,{variant:"body2",sx:{color:"#64748b",fontSize:12},children:"‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá, ‡¶ï‡ßã‡¶®‡ßã action ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ"})]}),e.jsx(y,{name:"permissions.features.viewOnlyMode",control:l,render:({field:i})=>e.jsx(V,{checked:i.value,onChange:i.onChange,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3b82f6"}}})})]})}),T("permissions.features.viewOnlyMode")&&e.jsxs(d,{sx:{bgcolor:"#fef3c7",p:2,borderRadius:1,border:"1px solid #f59e0b"},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#92400e",mb:1},children:"‚ÑπÔ∏è View Only Mode ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶Ü‡¶õ‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ User List ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ Admin List ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ Complaint ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ ‡¶ï‡ßã‡¶®‡ßã action ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ (edit, delete, approve ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø)"})]}),!T("permissions.features.viewOnlyMode")&&e.jsxs(x,{spacing:2,children:[e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#64748b"},children:"Advanced Permissions"}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ü‡ßÅ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞"}),e.jsx(y,{name:"permissions.features.chat",control:l,render:({field:i})=>e.jsx(V,{checked:i.value,onChange:i.onChange,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ü‡ßÅ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®"}),e.jsx(y,{name:"permissions.features.customerProfile",control:l,render:({field:i})=>e.jsx(V,{checked:i.value,onChange:i.onChange,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®"}),e.jsx(y,{name:"permissions.features.reviews",control:l,render:({field:i})=>e.jsx(V,{checked:i.value,onChange:i.onChange,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°"}),e.jsx(y,{name:"permissions.features.messaging",control:l,render:({field:i})=>e.jsx(V,{checked:i.value,onChange:i.onChange,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠‡¶æ‡¶≤ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏"}),e.jsx(y,{name:"permissions.features.complaintApproval",control:l,render:({field:i})=>e.jsx(V,{checked:i.value,onChange:i.onChange,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]})]})]})})]});return e.jsxs(ce,{open:t,onClose:X,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{sx:{fontWeight:700},children:"‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®"}),e.jsx(J,{onClick:X,disabled:v,children:e.jsx(xe,{})})]}),e.jsxs(he,{dividers:!0,children:[e.jsx(ve,{activeStep:r,sx:{mb:3},children:ye.map(i=>e.jsx(Ce,{children:e.jsx(Se,{children:i})},i))}),U()]}),e.jsxs(ue,{children:[e.jsx(O,{onClick:X,disabled:v,children:"‡¶¨‡¶æ‡¶§‡¶ø‡¶≤"}),r>0&&e.jsx(O,{onClick:F,disabled:v,children:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ"}),r<ye.length-1?e.jsx(O,{variant:"contained",onClick:S,sx:{bgcolor:"#3fa564"},children:"‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ"}):e.jsx(O,{variant:"contained",onClick:W(_),disabled:v,sx:{bgcolor:"#3fa564"},children:v?"‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...":"‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®"})]})]})},we=["‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø","‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤","‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶®"],ls=({open:t,onClose:h,onSuccess:f,superAdmin:r})=>{const[w,m]=u.useState(0),[g,v]=u.useState(void 0),[p,A]=u.useState(!1),[$,l]=u.useState([]),[W,T]=u.useState(!1),{control:a,handleSubmit:E,watch:C,reset:b,setValue:I,formState:{errors:S}}=We({defaultValues:{firstName:"",lastName:"",phone:"",email:"",address:"",password:"",cityCorporationCode:"",zoneIds:[],status:R.ACTIVE,role:"SUPER_ADMIN",permissions:{zones:[],categories:[],features:{viewOnlyMode:!1,chat:!0,customerProfile:!0,reviews:!0,messaging:!0,complaintManagement:!0,complaintApproval:!0,adminManagement:!0,reports:"download"}}}}),F=C("cityCorporationCode");u.useEffect(()=>{(async()=>{if(t&&r){I("firstName",r.firstName),I("lastName",r.lastName),I("phone",r.phone),I("email",r.email||""),I("address",r.address||""),I("cityCorporationCode",r.cityCorporationCode||""),I("status",r.status),I("role",r.role),v(r.avatar||void 0),r.permissions&&I("permissions",r.permissions);try{const c=await Z.getAssignedZones(r.id);c&&c.length>0?I("zoneIds",c.map(P=>P.zoneId)):r.zoneId?I("zoneIds",[r.zoneId]):I("zoneIds",[])}catch(c){console.error("Error loading assigned zones:",c),r.zoneId&&I("zoneIds",[r.zoneId])}}})()},[t,r,I]),u.useEffect(()=>{t&&(async()=>{try{const c=await Ie.getCityCorporations();l(c.cityCorporations||[])}catch(c){console.error("Error loading city corporations:",c)}})()},[t]);const X=()=>{m(n=>n+1)},_=()=>{m(n=>n-1)},U=()=>{p||(m(0),T(!1),b(),v(void 0),h())},i=async n=>{var c,P;if(r){A(!0);try{const q={firstName:n.firstName,lastName:n.lastName,phone:n.phone,email:n.email||void 0,address:n.address||void 0,cityCorporationCode:n.cityCorporationCode||void 0,zoneId:void 0,status:n.status,permissions:n.permissions,avatar:g||void 0};W&&n.password&&(q.password=n.password),await Z.updateSuperAdmin(r.id,q),n.zoneIds&&await Z.updateZones(r.id,n.zoneIds),L.success("‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"),U(),f()}catch(q){console.error("Error updating super admin:",q),L.error(((P=(c=q.response)==null?void 0:c.data)==null?void 0:P.message)||"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}finally{A(!1)}}},j=()=>{switch(w){case 0:return e.jsxs(x,{spacing:2,children:[e.jsx(x,{direction:"row",spacing:2,alignItems:"center",justifyContent:"center",children:e.jsx(Ee,{currentAvatar:g,onUpload:async n=>v(n),size:80,initials:r?`${r.firstName.charAt(0)}${r.lastName.charAt(0)}`:"?"})}),e.jsx(y,{name:"firstName",control:a,rules:{required:"‡¶®‡¶æ‡¶Æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï"},render:({field:n})=>{var c;return e.jsx(D,{...n,label:"‡¶®‡¶æ‡¶Æ *",placeholder:"‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",error:!!S.firstName,helperText:(c=S.firstName)==null?void 0:c.message,disabled:p,fullWidth:!0})}}),e.jsx(y,{name:"lastName",control:a,rules:{required:"‡¶™‡¶¶‡¶¨‡ßÄ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï"},render:({field:n})=>{var c;return e.jsx(D,{...n,label:"‡¶™‡¶¶‡¶¨‡ßÄ *",placeholder:"‡¶™‡¶¶‡¶¨‡ßÄ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",error:!!S.lastName,helperText:(c=S.lastName)==null?void 0:c.message,disabled:p,fullWidth:!0})}}),e.jsx(y,{name:"phone",control:a,rules:{required:"‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï",pattern:{value:/^01[0-9]{9}$/,message:"‡¶∏‡¶†‡¶ø‡¶ï ‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶® (‡ßß‡ßß ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü)"}},render:({field:n})=>{var c;return e.jsx(D,{...n,label:"‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ *",placeholder:"01XXXXXXXXX",error:!!S.phone,helperText:(c=S.phone)==null?void 0:c.message,disabled:p,fullWidth:!0})}}),e.jsx(y,{name:"email",control:a,rules:{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®"}},render:({field:n})=>{var c;return e.jsx(D,{...n,label:"‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)",placeholder:"email@example.com",error:!!S.email,helperText:(c=S.email)==null?void 0:c.message,disabled:p,fullWidth:!0})}}),e.jsx(y,{name:"address",control:a,render:({field:n})=>e.jsx(D,{...n,label:"‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)",placeholder:"‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",disabled:p,fullWidth:!0,multiline:!0,rows:2})}),e.jsx(y,{name:"status",control:a,render:({field:n})=>e.jsxs(te,{fullWidth:!0,disabled:p,children:[e.jsx(re,{children:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ *"}),e.jsxs(ne,{...n,label:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ *",children:[e.jsx(N,{value:R.ACTIVE,children:"‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º"}),e.jsx(N,{value:R.INACTIVE,children:"‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º"}),e.jsx(N,{value:R.SUSPENDED,children:"‡¶∏‡ßç‡¶•‡¶ó‡¶ø‡¶§"})]})]})}),e.jsx(y,{name:"role",control:a,render:({field:n})=>e.jsxs(te,{fullWidth:!0,disabled:p,children:[e.jsx(re,{children:"‡¶∞‡ßã‡¶≤"}),e.jsxs(ne,{...n,label:"‡¶∞‡ßã‡¶≤",children:[e.jsx(N,{value:"ADMIN",children:"‡¶è‡¶°‡¶Æ‡¶ø‡¶® (Admin)"}),e.jsx(N,{value:"SUPER_ADMIN",children:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®"}),e.jsx(N,{value:"MASTER_ADMIN",children:"‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®"})]})]})}),e.jsx(Oe,{control:e.jsx(V,{checked:W,onChange:n=>T(n.target.checked),disabled:p}),label:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"}),W&&e.jsx(y,{name:"password",control:a,rules:{required:W?"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï":!1,minLength:{value:8,message:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ßÆ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá"}},render:({field:n})=>{var c;return e.jsx(D,{...n,type:"password",label:"‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *",placeholder:"‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",error:!!S.password,helperText:(c=S.password)==null?void 0:c.message,disabled:p,fullWidth:!0})}})]});case 1:return e.jsxs(x,{spacing:2,children:[e.jsx(y,{name:"cityCorporationCode",control:a,rules:{required:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"},render:({field:n})=>e.jsxs(te,{fullWidth:!0,error:!!S.cityCorporationCode,disabled:p,children:[e.jsx(re,{children:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶® *"}),e.jsx(ne,{...n,label:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶® *",children:$.map(c=>e.jsx(N,{value:c.code,children:c.name},c.code))}),S.cityCorporationCode&&e.jsx(s,{variant:"caption",color:"error",sx:{mt:.5,ml:2},children:S.cityCorporationCode.message})]})}),e.jsx(y,{name:"zoneIds",control:a,rules:{required:"‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ú‡ßã‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"},render:({field:n})=>{var c;return e.jsx(Me,{value:n.value,onChange:n.onChange,cityCorporationCode:F,label:"‡¶ú‡ßã‡¶® (‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá) *",error:!!S.zoneIds,helperText:(c=S.zoneIds)==null?void 0:c.message,disabled:!F||p})}}),e.jsxs(d,{sx:{bgcolor:"#fff3cd",p:2,borderRadius:1,border:"1px solid #ffc107"},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#856404",mb:1},children:"‚ö†Ô∏è ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø:"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ",e.jsx("strong",{children:"Zone"})," ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Ø‡¶º‡¶ø‡¶§‡ßç‡¶¨‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ Zone ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ",e.jsx("strong",{children:"Ward"})," ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ Zone ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ",e.jsx("strong",{children:"Admin"})," (Ward Inspector) ‡¶¶‡ßá‡¶∞ manage ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontSize:13},children:["‚Ä¢ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ Zone ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ",e.jsx("strong",{children:"User"})," ‡¶è‡¶¨‡¶Ç ",e.jsx("strong",{children:"Complaint"})," ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"]})]})]});case 2:return e.jsxs(x,{spacing:2.5,children:[e.jsx(s,{variant:"subtitle2",sx:{fontWeight:600,color:"#1e2939"},children:"‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏"}),e.jsx(d,{sx:{bgcolor:"#f0f9ff",p:2,borderRadius:1,border:"1px solid #3b82f6"},children:e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(d,{children:[e.jsx(s,{sx:{fontWeight:600,color:"#1e40af"},children:"View Only Mode"}),e.jsx(s,{variant:"body2",sx:{color:"#64748b",fontSize:12},children:"‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá, ‡¶ï‡ßã‡¶®‡ßã action ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ"})]}),e.jsx(y,{name:"permissions.features.viewOnlyMode",control:a,render:({field:n})=>e.jsx(V,{checked:n.value,onChange:n.onChange,disabled:p,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3b82f6"}}})})]})}),C("permissions.features.viewOnlyMode")&&e.jsxs(d,{sx:{bgcolor:"#fef3c7",p:2,borderRadius:1,border:"1px solid #f59e0b"},children:[e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#92400e",mb:1},children:"‚ÑπÔ∏è View Only Mode ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶Ü‡¶õ‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ User List ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ Admin List ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ Complaint ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá"}),e.jsx(s,{variant:"body2",sx:{color:"#78350f",fontSize:13},children:"‚Ä¢ ‡¶ï‡ßã‡¶®‡ßã action ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ (edit, delete, approve ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø)"})]}),!C("permissions.features.viewOnlyMode")&&e.jsxs(x,{spacing:2,children:[e.jsx(s,{variant:"body2",sx:{fontWeight:600,color:"#64748b"},children:"Advanced Permissions"}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ü‡ßÅ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞"}),e.jsx(y,{name:"permissions.features.chat",control:a,render:({field:n})=>e.jsx(V,{checked:n.value,onChange:n.onChange,disabled:p,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ü‡ßÅ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®"}),e.jsx(y,{name:"permissions.features.customerProfile",control:a,render:({field:n})=>e.jsx(V,{checked:n.value,onChange:n.onChange,disabled:p,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®"}),e.jsx(y,{name:"permissions.features.reviews",control:a,render:({field:n})=>e.jsx(V,{checked:n.value,onChange:n.onChange,disabled:p,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°"}),e.jsx(y,{name:"permissions.features.messaging",control:a,render:({field:n})=>e.jsx(V,{checked:n.value,onChange:n.onChange,disabled:p,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{children:"‡¶è‡¶™‡ßç‡¶∞‡ßÅ‡¶≠‡¶æ‡¶≤ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏"}),e.jsx(y,{name:"permissions.features.complaintApproval",control:a,render:({field:n})=>e.jsx(V,{checked:n.value,onChange:n.onChange,disabled:p,sx:{"& .Mui-checked+.MuiSwitch-track":{bgcolor:"#3fa564"}}})})]})]})]});default:return null}};return r?e.jsxs(ce,{open:t,onClose:U,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{sx:{fontWeight:700},children:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®"}),e.jsx(J,{onClick:U,disabled:p,children:e.jsx(xe,{})})]}),e.jsxs(he,{dividers:!0,children:[e.jsx(ve,{activeStep:w,sx:{mb:3},children:we.map(n=>e.jsx(Ce,{children:e.jsx(Se,{children:n})},n))}),j()]}),e.jsxs(ue,{children:[e.jsx(O,{onClick:U,disabled:p,children:"‡¶¨‡¶æ‡¶§‡¶ø‡¶≤"}),w>0&&e.jsx(O,{onClick:_,disabled:p,children:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ"}),w<we.length-1?e.jsx(O,{variant:"contained",onClick:X,sx:{bgcolor:"#3fa564"},children:"‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ"}):e.jsx(O,{variant:"contained",onClick:E(i),disabled:p,sx:{bgcolor:"#3fa564"},children:p?"‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...":"‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®"})]})]}):null},cs=({open:t,onClose:h,superAdmin:f})=>{var T,a,E;const{user:r}=ts(),[w,m]=u.useState(null),[g,v]=u.useState(!1),[p,A]=u.useState(null);u.useEffect(()=>{t&&(f!=null&&f.id)?$(f.id):(m(null),A(null))},[t,f]);const $=async C=>{try{v(!0),A(null);const b=await Z.getSuperAdminById(C);m(b)}catch(b){console.error("Error fetching super admin details:",b),A("Failed to load latest details"),m(f)}finally{v(!1)}};if(!f)return null;const l=w||f,W=C=>C?new Date(C).toLocaleDateString("bn-BD",{year:"numeric",month:"long",day:"numeric"}):"N/A";return e.jsxs(ce,{open:t,onClose:h,maxWidth:"md",fullWidth:!0,children:[e.jsxs(de,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{sx:{fontWeight:700},children:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§"}),e.jsx(J,{onClick:h,children:e.jsx(xe,{})})]}),e.jsxs(he,{dividers:!0,children:[g&&e.jsx(d,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(ae,{size:24})}),p&&e.jsxs(Ue,{severity:"warning",sx:{mb:2},children:[p," - Showing cached data"]}),e.jsxs(x,{spacing:3,sx:{opacity:g?.6:1,transition:"opacity 0.2s"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(fe,{sx:{width:80,height:80,bgcolor:"#2b7fff",fontSize:32,fontWeight:700},src:l.avatar||void 0,children:(T=l.firstName)==null?void 0:T.charAt(0).toUpperCase()}),e.jsxs(d,{sx:{flex:1},children:[e.jsxs(s,{variant:"h5",sx:{fontWeight:700,mb:.5},children:[l.firstName," ",l.lastName]}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Q,{label:l.role,size:"small",sx:{bgcolor:"#eff6ff",color:"#155dfc"}}),e.jsx(Q,{label:l.status==="ACTIVE"?"‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º":"‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º",size:"small",sx:{bgcolor:l.status==="ACTIVE"?"#dcfce7":"#fee2e2",color:l.status==="ACTIVE"?"#008236":"#dc2626"}})]})]})]}),e.jsx(H,{}),e.jsxs(d,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:700,mb:2},children:"‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{size:{xs:12,sm:6},children:e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Ze,{sx:{color:"#4a5565"}}),e.jsxs(d,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"}),e.jsx(s,{variant:"body1",sx:{fontWeight:600},children:l.phone})]})]})}),l.email&&e.jsx(k,{size:{xs:12,sm:6},children:e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Fe,{sx:{color:"#4a5565"}}),e.jsxs(d,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶á‡¶Æ‡ßá‡¶á‡¶≤"}),e.jsx(s,{variant:"body1",sx:{fontWeight:600},children:l.email})]})]})}),l.address&&e.jsx(k,{size:{xs:12},children:e.jsxs(x,{direction:"row",spacing:1,alignItems:"flex-start",children:[e.jsx(je,{sx:{color:"#4a5565",mt:.5}}),e.jsxs(d,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ"}),e.jsx(s,{variant:"body1",sx:{fontWeight:600},children:l.address})]})]})})]})]}),e.jsx(H,{}),e.jsxs(d,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:700,mb:2},children:"‡¶è‡¶≤‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø"}),e.jsx(k,{container:!0,spacing:2,children:e.jsx(k,{size:{xs:12,sm:6},children:e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(je,{sx:{color:"#4a5565"}}),e.jsxs(d,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶∏‡¶ø‡¶ü‡¶ø ‡¶ï‡¶∞‡ßç‡¶™‡ßã‡¶∞‡ßá‡¶∂‡¶®"}),e.jsx(s,{variant:"body1",sx:{fontWeight:600},children:((a=l.cityCorporation)==null?void 0:a.name)||"N/A"})]})]})})}),l.assignedZones&&l.assignedZones.length>0&&e.jsxs(d,{sx:{mt:2},children:[e.jsx(s,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡ßã‡¶® ‡¶∏‡¶Æ‡ßÇ‡¶π"}),e.jsx(x,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:l.assignedZones.map(C=>e.jsx(Q,{label:C.zone.name,size:"small",variant:"outlined",color:"primary",sx:{mb:.5}},C.zone.id))})]})]}),e.jsx(H,{}),l.statistics&&e.jsxs(d,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:700,mb:2},children:"‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{size:{xs:6,sm:3},children:e.jsxs(d,{sx:{textAlign:"center",p:2,bgcolor:"#f9fafb",borderRadius:2},children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"#155dfc"},children:l.statistics.totalComplaints||0}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó"})]})}),e.jsx(k,{size:{xs:6,sm:3},children:e.jsxs(d,{sx:{textAlign:"center",p:2,bgcolor:"#f0fdf4",borderRadius:2},children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"#00a63e"},children:l.statistics.resolvedComplaints||0}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"})]})}),e.jsx(k,{size:{xs:6,sm:3},children:e.jsxs(d,{sx:{textAlign:"center",p:2,bgcolor:"#fff7ed",borderRadius:2},children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"#d08700"},children:l.statistics.pendingComplaints||0}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç"})]})}),e.jsx(k,{size:{xs:6,sm:3},children:e.jsxs(d,{sx:{textAlign:"center",p:2,bgcolor:"#eff6ff",borderRadius:2},children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"#155dfc"},children:l.statistics.inProgressComplaints||0}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶ö‡¶≤‡¶Æ‡¶æ‡¶®"})]})})]})]}),e.jsx(H,{}),e.jsxs(d,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:700,mb:2},children:"‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡¶•‡ßç‡¶Ø"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{size:{xs:12,sm:6},children:e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Xe,{sx:{color:"#4a5565"}}),e.jsxs(d,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"}),e.jsx(s,{variant:"body1",sx:{fontWeight:600},children:W(l.createdAt)})]})]})}),(r==null?void 0:r.role)==="MASTER_ADMIN"&&e.jsxs(k,{size:{xs:12},children:[e.jsx(H,{sx:{my:1}}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"flex-start",sx:{mt:1},children:[e.jsx(_e,{sx:{color:"#d32f2f",mt:.5}}),e.jsxs(d,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° (Visible only to MASTER ADMIN)"}),e.jsx(s,{variant:"body1",sx:{fontFamily:"monospace"},children:l.visiblePassword?e.jsx("span",{style:{color:"#2e7d32",fontWeight:"bold"},children:l.visiblePassword}):e.jsxs("span",{style:{color:"#666"},children:["Hash: ",(E=l.passwordHash)==null?void 0:E.substring(0,20),"... (Reset to see actual)"]})})]})]})]})]})]})]})]}),e.jsx(ue,{children:e.jsx(O,{variant:"contained",onClick:h,sx:{bgcolor:"#3fa564"},children:"‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®"})})]})},ds={locale:{1:"‡ßß",2:"‡ß®",3:"‡ß©",4:"‡ß™",5:"‡ß´",6:"‡ß¨",7:"‡ß≠",8:"‡ßÆ",9:"‡ßØ",0:"‡ß¶"}},xs={narrow:["‡¶ñ‡ßç‡¶∞‡¶ø‡¶É‡¶™‡ßÇ‡¶É","‡¶ñ‡ßç‡¶∞‡¶ø‡¶É"],abbreviated:["‡¶ñ‡ßç‡¶∞‡¶ø‡¶É‡¶™‡ßÇ‡¶∞‡ßç‡¶¨","‡¶ñ‡ßç‡¶∞‡¶ø‡¶É"],wide:["‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶™‡ßÇ‡¶∞‡ßç‡¶¨","‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶"]},hs={narrow:["‡ßß","‡ß®","‡ß©","‡ß™"],abbreviated:["‡ßß‡¶§‡ßç‡¶∞‡ßà","‡ß®‡¶§‡ßç‡¶∞‡ßà","‡ß©‡¶§‡ßç‡¶∞‡ßà","‡ß™‡¶§‡ßç‡¶∞‡ßà"],wide:["‡ßß‡¶Æ ‡¶§‡ßç‡¶∞‡ßà‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï","‡ß®‡ßü ‡¶§‡ßç‡¶∞‡ßà‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï","‡ß©‡ßü ‡¶§‡ßç‡¶∞‡ßà‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï","‡ß™‡¶∞‡ßç‡¶• ‡¶§‡ßç‡¶∞‡ßà‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï"]},us={narrow:["‡¶ú‡¶æ‡¶®‡ßÅ","‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ","‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö","‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤","‡¶Æ‡ßá","‡¶ú‡ßÅ‡¶®","‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á","‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü","‡¶∏‡ßá‡¶™‡ßç‡¶ü","‡¶Ö‡¶ï‡ßç‡¶ü‡ßã","‡¶®‡¶≠‡ßá","‡¶°‡¶ø‡¶∏‡ßá"],abbreviated:["‡¶ú‡¶æ‡¶®‡ßÅ","‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ","‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö","‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤","‡¶Æ‡ßá","‡¶ú‡ßÅ‡¶®","‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á","‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü","‡¶∏‡ßá‡¶™‡ßç‡¶ü","‡¶Ö‡¶ï‡ßç‡¶ü‡ßã","‡¶®‡¶≠‡ßá","‡¶°‡¶ø‡¶∏‡ßá"],wide:["‡¶ú‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø","‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø","‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö","‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤","‡¶Æ‡ßá","‡¶ú‡ßÅ‡¶®","‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á","‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü","‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞","‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞","‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞","‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞"]},fs={narrow:["‡¶∞","‡¶∏‡ßã","‡¶Æ","‡¶¨‡ßÅ","‡¶¨‡ßÉ","‡¶∂‡ßÅ","‡¶∂"],short:["‡¶∞‡¶¨‡¶ø","‡¶∏‡ßã‡¶Æ","‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤","‡¶¨‡ßÅ‡¶ß","‡¶¨‡ßÉ‡¶π","‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞","‡¶∂‡¶®‡¶ø"],abbreviated:["‡¶∞‡¶¨‡¶ø","‡¶∏‡ßã‡¶Æ","‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤","‡¶¨‡ßÅ‡¶ß","‡¶¨‡ßÉ‡¶π","‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞","‡¶∂‡¶®‡¶ø"],wide:["‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞","‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞","‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞","‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞","‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞ ","‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞","‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞"]},ps={narrow:{am:"‡¶™‡ßÇ",pm:"‡¶Ö‡¶™",midnight:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§",noon:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®",morning:"‡¶∏‡¶ï‡¶æ‡¶≤",afternoon:"‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤",evening:"‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ",night:"‡¶∞‡¶æ‡¶§"},abbreviated:{am:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßç‡¶®",pm:"‡¶Ö‡¶™‡¶∞‡¶æ‡¶π‡ßç‡¶®",midnight:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§",noon:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®",morning:"‡¶∏‡¶ï‡¶æ‡¶≤",afternoon:"‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤",evening:"‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ",night:"‡¶∞‡¶æ‡¶§"},wide:{am:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßç‡¶®",pm:"‡¶Ö‡¶™‡¶∞‡¶æ‡¶π‡ßç‡¶®",midnight:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§",noon:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®",morning:"‡¶∏‡¶ï‡¶æ‡¶≤",afternoon:"‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤",evening:"‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ",night:"‡¶∞‡¶æ‡¶§"}},js={narrow:{am:"‡¶™‡ßÇ",pm:"‡¶Ö‡¶™",midnight:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§",noon:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®",morning:"‡¶∏‡¶ï‡¶æ‡¶≤",afternoon:"‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤",evening:"‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ",night:"‡¶∞‡¶æ‡¶§"},abbreviated:{am:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßç‡¶®",pm:"‡¶Ö‡¶™‡¶∞‡¶æ‡¶π‡ßç‡¶®",midnight:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§",noon:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®",morning:"‡¶∏‡¶ï‡¶æ‡¶≤",afternoon:"‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤",evening:"‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ",night:"‡¶∞‡¶æ‡¶§"},wide:{am:"‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßç‡¶®",pm:"‡¶Ö‡¶™‡¶∞‡¶æ‡¶π‡ßç‡¶®",midnight:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§",noon:"‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®",morning:"‡¶∏‡¶ï‡¶æ‡¶≤",afternoon:"‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤",evening:"‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ",night:"‡¶∞‡¶æ‡¶§"}};function ms(t,h){if(t>18&&t<=31)return h+"‡¶∂‡ßá";switch(t){case 1:return h+"‡¶≤‡¶æ";case 2:case 3:return h+"‡¶∞‡¶æ";case 4:return h+"‡¶†‡¶æ";default:return h+"‡¶á"}}const gs=(t,h)=>{const f=Number(t),r=ke(f);if((h==null?void 0:h.unit)==="date")return ms(f,r);if(f>10||f===0)return r+"‡¶§‡¶Æ";switch(f%10){case 2:case 3:return r+"‡ßü";case 4:return r+"‡¶∞‡ßç‡¶•";case 6:return r+"‡¶∑‡ßç‡¶†";default:return r+"‡¶Æ"}};function ke(t){return t.toString().replace(/\d/g,function(h){return ds.locale[h]})}const bs={ordinalNumber:gs,era:ee({values:xs,defaultWidth:"wide"}),quarter:ee({values:hs,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ee({values:us,defaultWidth:"wide"}),day:ee({values:fs,defaultWidth:"wide"}),dayPeriod:ee({values:ps,defaultWidth:"wide",formattingValues:js,defaultFormattingWidth:"wide"})},ys={lessThanXSeconds:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°"},xSeconds:{one:"‡ßß ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°",other:"{{count}} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°"},halfAMinute:"‡¶Ü‡¶ß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü",lessThanXMinutes:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü"},xMinutes:{one:"‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü",other:"{{count}} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü"},aboutXHours:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶ò‡¶®‡ßç‡¶ü‡¶æ"},xHours:{one:"‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ",other:"{{count}} ‡¶ò‡¶®‡ßç‡¶ü‡¶æ"},xDays:{one:"‡ßß ‡¶¶‡¶ø‡¶®",other:"{{count}} ‡¶¶‡¶ø‡¶®"},aboutXWeeks:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π"},xWeeks:{one:"‡ßß ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π",other:"{{count}} ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π"},aboutXMonths:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶Æ‡¶æ‡¶∏",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶Æ‡¶æ‡¶∏"},xMonths:{one:"‡ßß ‡¶Æ‡¶æ‡¶∏",other:"{{count}} ‡¶Æ‡¶æ‡¶∏"},aboutXYears:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶¨‡¶õ‡¶∞",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶¨‡¶õ‡¶∞"},xYears:{one:"‡ßß ‡¶¨‡¶õ‡¶∞",other:"{{count}} ‡¶¨‡¶õ‡¶∞"},overXYears:{one:"‡ßß ‡¶¨‡¶õ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø",other:"{{count}} ‡¶¨‡¶õ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø"},almostXYears:{one:"‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ßß ‡¶¨‡¶õ‡¶∞",other:"‡¶™‡ßç‡¶∞‡¶æ‡ßü {{count}} ‡¶¨‡¶õ‡¶∞"}},ws=(t,h,f)=>{let r;const w=ys[t];return typeof w=="string"?r=w:h===1?r=w.one:r=w.other.replace("{{count}}",ke(h)),f!=null&&f.addSuffix?f.comparison&&f.comparison>0?r+" ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá":r+" ‡¶Ü‡¶ó‡ßá":r},vs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cs={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ss={full:"{{date}} {{time}} '‡¶∏‡¶Æ‡ßü'",long:"{{date}} {{time}} '‡¶∏‡¶Æ‡ßü'",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zs={date:le({formats:vs,defaultWidth:"full"}),time:le({formats:Cs,defaultWidth:"full"}),dateTime:le({formats:Ss,defaultWidth:"full"})},Is={lastWeek:"'‡¶ó‡¶§' eeee '‡¶∏‡¶Æ‡ßü' p",yesterday:"'‡¶ó‡¶§‡¶ï‡¶æ‡¶≤' '‡¶∏‡¶Æ‡ßü' p",today:"'‡¶Ü‡¶ú' '‡¶∏‡¶Æ‡ßü' p",tomorrow:"'‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤' '‡¶∏‡¶Æ‡ßü' p",nextWeek:"eeee '‡¶∏‡¶Æ‡ßü' p",other:"P"},Ws=(t,h,f,r)=>Is[t],Es=/^(\d+)(‡¶Æ|‡ßü|‡¶∞‡ßç‡¶•|‡¶∑‡ßç‡¶†|‡¶∂‡ßá|‡¶á|‡¶§‡¶Æ)?/i,Ms=/\d+/i,ks={narrow:/^(‡¶ñ‡ßç‡¶∞‡¶ø‡¶É‡¶™‡ßÇ‡¶É|‡¶ñ‡ßç‡¶∞‡¶ø‡¶É)/i,abbreviated:/^(‡¶ñ‡ßç‡¶∞‡¶ø‡¶É‡¶™‡ßÇ‡¶∞‡ßç‡¶¨|‡¶ñ‡ßç‡¶∞‡¶ø‡¶É)/i,wide:/^(‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶™‡ßÇ‡¶∞‡ßç‡¶¨|‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶)/i},As={narrow:[/^‡¶ñ‡ßç‡¶∞‡¶ø‡¶É‡¶™‡ßÇ‡¶É/i,/^‡¶ñ‡ßç‡¶∞‡¶ø‡¶É/i],abbreviated:[/^‡¶ñ‡ßç‡¶∞‡¶ø‡¶É‡¶™‡ßÇ‡¶∞‡ßç‡¶¨/i,/^‡¶ñ‡ßç‡¶∞‡¶ø‡¶É/i],wide:[/^‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶™‡ßÇ‡¶∞‡ßç‡¶¨/i,/^‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶/i]},Ts={narrow:/^[‡ßß‡ß®‡ß©‡ß™]/i,abbreviated:/^[‡ßß‡ß®‡ß©‡ß™]‡¶§‡ßç‡¶∞‡ßà/i,wide:/^[‡ßß‡ß®‡ß©‡ß™](‡¶Æ|‡ßü|‡¶∞‡ßç‡¶•)? ‡¶§‡ßç‡¶∞‡ßà‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï/i},Ps={any:[/‡ßß/i,/‡ß®/i,/‡ß©/i,/‡ß™/i]},Ns={narrow:/^(‡¶ú‡¶æ‡¶®‡ßÅ|‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ|‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö|‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤|‡¶Æ‡ßá|‡¶ú‡ßÅ‡¶®|‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á|‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü|‡¶∏‡ßá‡¶™‡ßç‡¶ü|‡¶Ö‡¶ï‡ßç‡¶ü‡ßã|‡¶®‡¶≠‡ßá|‡¶°‡¶ø‡¶∏‡ßá)/i,abbreviated:/^(‡¶ú‡¶æ‡¶®‡ßÅ|‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ|‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö|‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤|‡¶Æ‡ßá|‡¶ú‡ßÅ‡¶®|‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á|‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü|‡¶∏‡ßá‡¶™‡ßç‡¶ü|‡¶Ö‡¶ï‡ßç‡¶ü‡ßã|‡¶®‡¶≠‡ßá|‡¶°‡¶ø‡¶∏‡ßá)/i,wide:/^(‡¶ú‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø|‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø|‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö|‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤|‡¶Æ‡ßá|‡¶ú‡ßÅ‡¶®|‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á|‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü|‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞|‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞|‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞|‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞)/i},Vs={any:[/^‡¶ú‡¶æ‡¶®‡ßÅ/i,/^‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ/i,/^‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö/i,/^‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤/i,/^‡¶Æ‡ßá/i,/^‡¶ú‡ßÅ‡¶®/i,/^‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á/i,/^‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü/i,/^‡¶∏‡ßá‡¶™‡ßç‡¶ü/i,/^‡¶Ö‡¶ï‡ßç‡¶ü‡ßã/i,/^‡¶®‡¶≠‡ßá/i,/^‡¶°‡¶ø‡¶∏‡ßá/i]},Ds={narrow:/^(‡¶∞|‡¶∏‡ßã|‡¶Æ|‡¶¨‡ßÅ|‡¶¨‡ßÉ|‡¶∂‡ßÅ|‡¶∂)+/i,short:/^(‡¶∞‡¶¨‡¶ø|‡¶∏‡ßã‡¶Æ|‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤|‡¶¨‡ßÅ‡¶ß|‡¶¨‡ßÉ‡¶π|‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞|‡¶∂‡¶®‡¶ø)+/i,abbreviated:/^(‡¶∞‡¶¨‡¶ø|‡¶∏‡ßã‡¶Æ|‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤|‡¶¨‡ßÅ‡¶ß|‡¶¨‡ßÉ‡¶π|‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞|‡¶∂‡¶®‡¶ø)+/i,wide:/^(‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞|‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞|‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞|‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞|‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞ |‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞|‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞)+/i},Rs={narrow:[/^‡¶∞/i,/^‡¶∏‡ßã/i,/^‡¶Æ/i,/^‡¶¨‡ßÅ/i,/^‡¶¨‡ßÉ/i,/^‡¶∂‡ßÅ/i,/^‡¶∂/i],short:[/^‡¶∞‡¶¨‡¶ø/i,/^‡¶∏‡ßã‡¶Æ/i,/^‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤/i,/^‡¶¨‡ßÅ‡¶ß/i,/^‡¶¨‡ßÉ‡¶π/i,/^‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞/i,/^‡¶∂‡¶®‡¶ø/i],abbreviated:[/^‡¶∞‡¶¨‡¶ø/i,/^‡¶∏‡ßã‡¶Æ/i,/^‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤/i,/^‡¶¨‡ßÅ‡¶ß/i,/^‡¶¨‡ßÉ‡¶π/i,/^‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞/i,/^‡¶∂‡¶®‡¶ø/i],wide:[/^‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞/i,/^‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞/i,/^‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞/i,/^‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞/i,/^‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞ /i,/^‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞/i,/^‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞/i]},$s={narrow:/^(‡¶™‡ßÇ|‡¶Ö‡¶™|‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§|‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®|‡¶∏‡¶ï‡¶æ‡¶≤|‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤|‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ|‡¶∞‡¶æ‡¶§)/i,abbreviated:/^(‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßç‡¶®|‡¶Ö‡¶™‡¶∞‡¶æ‡¶π‡ßç‡¶®|‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§|‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®|‡¶∏‡¶ï‡¶æ‡¶≤|‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤|‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ|‡¶∞‡¶æ‡¶§)/i,wide:/^(‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßç‡¶®|‡¶Ö‡¶™‡¶∞‡¶æ‡¶π‡ßç‡¶®|‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§|‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®|‡¶∏‡¶ï‡¶æ‡¶≤|‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤|‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ|‡¶∞‡¶æ‡¶§)/i},Ls={any:{am:/^‡¶™‡ßÇ/i,pm:/^‡¶Ö‡¶™/i,midnight:/^‡¶Æ‡¶ß‡ßç‡¶Ø‡¶∞‡¶æ‡¶§/i,noon:/^‡¶Æ‡¶ß‡ßç‡¶Ø‡¶æ‡¶π‡ßç‡¶®/i,morning:/‡¶∏‡¶ï‡¶æ‡¶≤/i,afternoon:/‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤/i,evening:/‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ/i,night:/‡¶∞‡¶æ‡¶§/i}},Os={ordinalNumber:rs({matchPattern:Es,parsePattern:Ms,valueCallback:t=>parseInt(t,10)}),era:se({matchPatterns:ks,defaultMatchWidth:"wide",parsePatterns:As,defaultParseWidth:"wide"}),quarter:se({matchPatterns:Ts,defaultMatchWidth:"wide",parsePatterns:Ps,defaultParseWidth:"any",valueCallback:t=>t+1}),month:se({matchPatterns:Ns,defaultMatchWidth:"wide",parsePatterns:Vs,defaultParseWidth:"any"}),day:se({matchPatterns:Ds,defaultMatchWidth:"wide",parsePatterns:Rs,defaultParseWidth:"wide"}),dayPeriod:se({matchPatterns:$s,defaultMatchWidth:"wide",parsePatterns:Ls,defaultParseWidth:"any"})},Us={code:"bn",formatDistance:ws,formatLong:zs,formatRelative:Ws,localize:bs,match:Os,options:{weekStartsOn:0,firstWeekContainsDate:1}},Zs={CREATE_USER:"‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®",UPDATE_USER:"‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®",DELETE_USER:"‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßá‡¶õ‡ßá‡¶®",UPDATE_USER_STATUS:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®",UPDATE_USER_PERMISSIONS:"‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®"},Fs={USER:"‡¶á‡¶â‡¶ú‡¶æ‡¶∞",COMPLAINT:"‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó",MESSAGE:"‡¶Æ‡ßá‡¶∏‡ßá‡¶ú",ZONE:"‡¶ú‡ßã‡¶®",WARD:"‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°"},Xs=t=>t.includes("CREATE")?"#00a63e":t.includes("UPDATE")?"#155dfc":t.includes("DELETE")?"#e7000b":"#4a5565",_s=t=>{const h=Zs[t.action]||t.action,f=Fs[t.entityType]||t.entityType;if(t.action==="CREATE_USER"&&t.newValue)return`${t.newValue.name} ‡¶®‡¶æ‡¶Æ‡ßá ‡¶®‡¶§‡ßÅ‡¶® ${f} ${h}`;if(t.action==="UPDATE_USER"&&t.oldValue&&t.newValue){const r=[];return t.oldValue.name!==t.newValue.name&&r.push(`‡¶®‡¶æ‡¶Æ: ${t.oldValue.name} ‚Üí ${t.newValue.name}`),t.oldValue.phone!==t.newValue.phone&&r.push(`‡¶´‡ßã‡¶®: ${t.oldValue.phone} ‚Üí ${t.newValue.phone}`),t.oldValue.status!==t.newValue.status&&r.push(`‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ${t.oldValue.status} ‚Üí ${t.newValue.status}`),r.length>0?`${t.newValue.name} ‡¶è‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ${h}: ${r.join(", ")}`:`${t.newValue.name} ‡¶è‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ${h}`}return t.action==="DELETE_USER"&&t.oldValue?`${t.oldValue.name} ‡¶®‡¶æ‡¶Æ‡ßá ${f} ${h}`:t.action==="UPDATE_USER_PERMISSIONS"&&t.newValue?`${f} ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ${h}`:`${f} ${h}`},qs=t=>{try{const h=new Date(t),r=Math.floor((new Date().getTime()-h.getTime())/(1e3*60));return r<1?"‡¶è‡¶á‡¶Æ‡¶æ‡¶§‡ßç‡¶∞":r<60?`${r} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶Ü‡¶ó‡ßá`:r<1440?`${Math.floor(r/60)} ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡¶Ü‡¶ó‡ßá`:is(h,"dd MMM yyyy, hh:mm a",{locale:Us})}catch{return t}},Bs=()=>{const[t,h]=u.useState([]),[f,r]=u.useState(!0),w=u.useCallback(async()=>{r(!0);try{const m=await os.getActivityLogs({page:1,limit:10,entityType:"USER"});m&&m.logs&&h(m.logs)}catch(m){console.error("Error loading activities:",m),L.error("‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶≤‡¶æ‡¶™ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}finally{r(!1)}},[]);return u.useEffect(()=>{w()},[w]),e.jsx(G,{sx:{borderRadius:2,boxShadow:"0px 1px 3px 0px #0000001a, 0px 1px 2px -1px #0000001a"},children:e.jsxs(Y,{children:[e.jsx(s,{sx:{fontSize:20,fontWeight:700,color:"#1e2939",mb:2},children:"‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶≤‡¶æ‡¶™"}),f?e.jsx(d,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(ae,{size:32})}):t.length===0?e.jsx(d,{sx:{textAlign:"center",py:4},children:e.jsx(s,{sx:{color:"#6a7282",fontSize:14},children:"‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶≤‡¶æ‡¶™ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø"})}):e.jsx(x,{spacing:2,children:t.map((m,g)=>e.jsxs(ze.Fragment,{children:[e.jsxs(x,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(fe,{sx:{bgcolor:Xs(m.action),width:40,height:40,fontSize:16},children:m.user.firstName.charAt(0).toUpperCase()}),e.jsxs(d,{sx:{flex:1,minWidth:0},children:[e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.jsxs(s,{sx:{fontSize:14,fontWeight:600,color:"#1e2939"},children:[m.user.firstName," ",m.user.lastName]}),e.jsx(Q,{label:m.user.role,size:"small",sx:{height:20,fontSize:11,bgcolor:"#f3f4f6",color:"#4a5565"}})]}),e.jsx(s,{sx:{fontSize:14,color:"#4a5565",mt:.5,wordBreak:"break-word"},children:_s(m)}),e.jsx(s,{sx:{fontSize:12,color:"#9ca3af",mt:.5},children:qs(m.timestamp)})]})]}),g<t.length-1&&e.jsx(H,{})]},m.id))})]})})},oe=({title:t,value:h,bg:f,color:r})=>e.jsx(G,{sx:{borderRadius:2,boxShadow:"0px 1px 3px 0px #0000001a, 0px 1px 2px -1px #0000001a"},children:e.jsx(Y,{sx:{bgcolor:f,borderRadius:2},children:e.jsxs(x,{spacing:.5,children:[e.jsx(s,{sx:{color:"#4a5565",fontSize:14},children:t}),e.jsx(s,{sx:{fontSize:24,fontWeight:700,color:r},children:h})]})})}),ie=({bg:t})=>e.jsx(G,{sx:{borderRadius:2,boxShadow:"0px 1px 3px 0px #0000001a, 0px 1px 2px -1px #0000001a"},children:e.jsx(Y,{sx:{bgcolor:t,borderRadius:2},children:e.jsxs(x,{spacing:.5,children:[e.jsx(d,{sx:{width:"60%",height:14,bgcolor:"rgba(0,0,0,0.1)",borderRadius:1}}),e.jsx(d,{sx:{width:"40%",height:28,bgcolor:"rgba(0,0,0,0.15)",borderRadius:1,mt:.5}})]})})}),rt=()=>{const[t,h]=u.useState(!1),[f,r]=u.useState(!1),[w,m]=u.useState(!1),[g,v]=u.useState([]),[p,A]=u.useState(R.ACTIVE),[$,l]=u.useState(null),[W,T]=u.useState([]),[a,E]=u.useState(null),[C,b]=u.useState(!0),[I,S]=u.useState(!0),[F,X]=u.useState(""),[_,U]=u.useState(1),[i,j]=u.useState(1),n=20,c=u.useCallback(async()=>{b(!0);try{const o=await Z.getSuperAdmins({page:_,limit:n,search:F||void 0,status:p==="ALL"?void 0:p});T(o.users),j(o.pagination.totalPages)}catch(o){console.error("Error loading super admins:",o),L.error("‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}finally{b(!1)}},[_,F,p]),P=u.useCallback(async()=>{S(!0);try{const o=await Z.getSuperAdminStatistics();E(o)}catch(o){console.error("Error loading statistics:",o),L.error("‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}finally{S(!1)}},[]);u.useEffect(()=>{c()},[c]),u.useEffect(()=>{P()},[P]);const q=o=>{X(o),U(1)},Ae=async(o,M)=>{var z,K;if(window.confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ${M} ‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`))try{await Z.deleteSuperAdmin(o),L.success("‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"),c(),P()}catch(pe){console.error("Error deleting super admin:",pe),L.error(((K=(z=pe.response)==null?void 0:z.data)==null?void 0:K.message)||"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}},Te=async()=>{var o,M;if(g.length!==0&&window.confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ${g.length} ‡¶ú‡¶® ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`))try{await Z.bulkDeleteSuperAdmins(g),L.success("‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"),v([]),c(),P()}catch(z){console.error("Error deleting super admins:",z),L.error(((M=(o=z.response)==null?void 0:o.data)==null?void 0:M.message)||"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•")}},Pe=o=>{if(o.target.checked){const M=W.map(z=>z.id);v(M);return}v([])},Ne=o=>{const M=g.indexOf(o);let z=[];M===-1?z=z.concat(g,o):M===0?z=z.concat(g.slice(1)):M===g.length-1?z=z.concat(g.slice(0,-1)):M>0&&(z=z.concat(g.slice(0,M),g.slice(M+1))),v(z)},Ve=()=>{c(),P()},De=o=>{l(o),r(!0)},Re=()=>{c(),P()},$e=o=>{l(o),m(!0)};return e.jsx(ns,{title:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü",children:e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",lg:"1fr 400px"},gap:3},children:[e.jsxs(x,{spacing:3,children:[e.jsx(G,{sx:{borderRadius:2,boxShadow:"0px 1px 3px 0px #0000001a, 0px 1px 2px -1px #0000001a"},children:e.jsxs(Y,{children:[e.jsx(s,{sx:{fontSize:24,fontWeight:700,color:"#1e2939",mb:2},children:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü"}),e.jsx(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(4, 1fr)"},gap:2},children:I?e.jsxs(e.Fragment,{children:[e.jsx(ie,{bg:"#eff6ff"}),e.jsx(ie,{bg:"#f0fdf4"}),e.jsx(ie,{bg:"#fef2f2"}),e.jsx(ie,{bg:"#faf5ff"})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{title:"‡¶Æ‡ßã‡¶ü ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®",value:((a==null?void 0:a.statusBreakdown.active)??0)+((a==null?void 0:a.statusBreakdown.inactive)??0),bg:"#eff6ff",color:"#155dfc"}),e.jsx(oe,{title:"‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º",value:(a==null?void 0:a.statusBreakdown.active)??0,bg:"#f0fdf4",color:"#00a63e"}),e.jsx(oe,{title:"‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º",value:(a==null?void 0:a.statusBreakdown.inactive)??0,bg:"#fef2f2",color:"#e7000b"}),e.jsx(oe,{title:"‡¶Ü‡¶ú ‡¶®‡¶§‡ßÅ‡¶®",value:`+${(a==null?void 0:a.newUsersThisMonth)||0}`,bg:"#faf5ff",color:"#9810fa"})]})})]})}),e.jsx(G,{sx:{borderRadius:2,boxShadow:"0px 1px 3px 0px #0000001a, 0px 1px 2px -1px #0000001a"},children:e.jsxs(Y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,flexWrap:"wrap"},children:[e.jsx(D,{value:F,onChange:o=>q(o.target.value),placeholder:"‡¶®‡¶æ‡¶Æ/‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...",fullWidth:!0,slotProps:{input:{startAdornment:e.jsx(qe,{position:"start",children:e.jsx(Be,{sx:{color:"#0a0a0a80"}})})}},sx:{maxWidth:700}}),e.jsxs(te,{size:"small",sx:{minWidth:150},children:[e.jsx(re,{children:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏"}),e.jsxs(ne,{value:p,label:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏",onChange:o=>{A(o.target.value),U(1)},children:[e.jsx(N,{value:"ALL",children:"‡¶∏‡¶ï‡¶≤"}),e.jsx(N,{value:R.ACTIVE,children:"‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º"}),e.jsx(N,{value:R.INACTIVE,children:"‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º"}),e.jsx(N,{value:R.PENDING,children:"‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®"}),e.jsx(N,{value:R.SUSPENDED,children:"‡¶∏‡ßç‡¶•‡¶ó‡¶ø‡¶§"})]})]}),e.jsx(O,{variant:"contained",sx:{bgcolor:"#3fa564",whiteSpace:"nowrap"},startIcon:e.jsx(He,{}),onClick:()=>h(!0),children:"‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®"}),g.length>0&&e.jsxs(O,{variant:"outlined",color:"error",startIcon:e.jsx(me,{}),onClick:Te,children:["‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶® (",g.length,")"]})]})}),e.jsx(s,{sx:{fontSize:20,color:"#000000"},children:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ"}),C?e.jsx(d,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(ae,{})}):W.length===0?e.jsx(G,{sx:{borderRadius:2},children:e.jsx(Y,{children:e.jsx(s,{sx:{textAlign:"center",py:4,color:"#6a7282"},children:"‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø"})})}):e.jsxs(e.Fragment,{children:[e.jsxs(G,{sx:{borderRadius:2,boxShadow:"0px 1px 3px 0px #0000001a, 0px 1px 2px -1px #0000001a"},children:[e.jsx(d,{sx:{bgcolor:"#f9fafb",borderBottom:"1px solid #e5e7eb",px:3,py:1.5},children:e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:"50px 25% 20% 15% 12% 1fr",gap:2,alignItems:"center"},children:[e.jsx(ge,{indeterminate:g.length>0&&g.length<W.length,checked:W.length>0&&g.length===W.length,onChange:Pe}),e.jsx(s,{sx:{color:"#364153",fontWeight:700,fontSize:14},children:"‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®"}),e.jsx(s,{sx:{color:"#364153",fontWeight:700,fontSize:14},children:"‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶ì ‡¶ú‡ßã‡¶®"}),e.jsx(s,{sx:{color:"#364153",fontWeight:700,fontSize:14},children:"‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£"}),e.jsx(s,{sx:{color:"#364153",fontWeight:700,fontSize:14},children:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏"}),e.jsx(s,{sx:{color:"#364153",fontWeight:700,fontSize:14},children:"‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶®"})]})}),e.jsx(Y,{sx:{px:0},children:e.jsxs(Ge,{children:[e.jsx(Ye,{children:W.map(o=>{var z;const M=g.indexOf(o.id)!==-1;return e.jsxs(be,{hover:!0,selected:M,children:[e.jsx(B,{padding:"checkbox",sx:{width:"50px"},children:e.jsx(ge,{checked:M,onChange:()=>Ne(o.id)})}),e.jsx(B,{sx:{width:"25%"},children:e.jsxs(x,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(fe,{src:o.avatar||void 0,alt:`${o.firstName} ${o.lastName}`,sx:{bgcolor:"#2b7fff"},children:o.firstName.charAt(0).toUpperCase()}),e.jsxs(d,{children:[e.jsxs(s,{sx:{fontSize:16,fontWeight:700},children:[o.firstName," ",o.lastName]}),e.jsx(s,{sx:{fontSize:14,color:"#4a5565"},children:o.phone})]})]})}),e.jsxs(B,{sx:{width:"20%"},children:[e.jsx(s,{sx:{fontSize:14,color:"#1e2939",fontWeight:600},children:((z=o.cityCorporation)==null?void 0:z.name)||"N/A"}),o.assignedZones&&o.assignedZones.length>0?e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:.5},children:o.assignedZones.map(K=>e.jsx(Q,{label:K.zone.name,size:"small",sx:{fontSize:"0.7rem",height:20}},K.zone.id))}):e.jsxs(d,{children:[e.jsx(s,{sx:{fontSize:13,color:"#4a5565",fontWeight:600},children:o.zone?`üè¢ ${o.zone.name}`:"‚ö†Ô∏è ‡¶ú‡ßã‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶®‡ßá‡¶á"}),o.zone&&e.jsxs(s,{sx:{fontSize:12,color:"#6b7280"},children:["‡¶ú‡ßã‡¶® ‡¶®‡¶Ç: ",o.zone.zoneNumber||"N/A"]})]}),o.address&&e.jsxs(s,{sx:{fontSize:12,color:"#6b7280",mt:.5},children:["üìç ",o.address]})]}),e.jsx(B,{sx:{width:"15%"},children:e.jsx(x,{spacing:.5,children:o.zone||o.assignedZones&&o.assignedZones.length>0?e.jsxs(e.Fragment,{children:[e.jsx(s,{sx:{fontSize:13,color:"#059669",fontWeight:600},children:"‚úì ‡¶ú‡ßã‡¶® ‡¶Ö‡¶´‡¶ø‡¶∏‡¶æ‡¶∞"}),e.jsx(s,{sx:{fontSize:12,color:"#4a5565"},children:"üë• ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡ßá"}),e.jsx(s,{sx:{fontSize:12,color:"#4a5565"},children:"üìç ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá"})]}):e.jsx(s,{sx:{fontSize:13,color:"#dc2626"},children:"‚ö†Ô∏è ‡¶ú‡ßã‡¶® assign ‡¶ï‡¶∞‡ßÅ‡¶®"})})}),e.jsx(B,{sx:{width:"12%"},children:e.jsx(x,{direction:"row",spacing:1,alignItems:"center",children:e.jsx(Q,{label:o.status===R.ACTIVE?"‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º":"‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º",size:"small",sx:{bgcolor:o.status===R.ACTIVE?"#dcfce7":"#fef2f2",color:o.status===R.ACTIVE?"#008236":"#e7000b"}})})}),e.jsx(B,{sx:{width:"20%"},children:e.jsxs(x,{direction:"row",spacing:2,alignItems:"center",children:[e.jsxs(x,{children:[e.jsxs(s,{sx:{fontSize:14,color:"#1e2939",fontWeight:700},children:["‡¶Æ‡ßã‡¶ü: ",o.statistics.totalComplaints]}),e.jsxs(x,{direction:"row",spacing:2,children:[e.jsxs(s,{sx:{fontSize:12,color:"#00a63e"},children:["‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®: ",o.statistics.resolvedComplaints]}),e.jsxs(s,{sx:{fontSize:12,color:"#d08700"},children:["‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç: ",o.statistics.pendingComplaints]})]})]}),e.jsx(H,{orientation:"vertical",flexItem:!0}),e.jsxs(x,{direction:"row",spacing:1,children:[e.jsx(J,{size:"small",onClick:()=>$e(o),sx:{color:"#155dfc"},children:e.jsx(Qe,{})}),e.jsx(J,{size:"small",onClick:()=>De(o),children:e.jsx(Je,{})}),e.jsx(J,{size:"small",color:"error",onClick:()=>Ae(o.id,`${o.firstName} ${o.lastName}`),children:e.jsx(me,{})})]})]})})]},o.id)})}),e.jsx(Ke,{sx:{display:"none"},children:e.jsx(be,{children:e.jsx(B,{})})})]})})]}),i>1&&e.jsx(d,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(es,{count:i,page:_,onChange:(o,M)=>U(M),color:"primary"})})]}),e.jsx(as,{open:t,onClose:()=>h(!1),onSuccess:Ve}),e.jsx(ls,{open:f,onClose:()=>{r(!1),l(null)},onSuccess:Re,superAdmin:$}),e.jsx(cs,{open:w,onClose:()=>{m(!1),l(null)},superAdmin:$})]}),e.jsx(d,{sx:{display:{xs:"none",lg:"block"}},children:e.jsx(Bs,{})})]})})};export{rt as default};
