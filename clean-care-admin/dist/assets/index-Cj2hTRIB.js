var er=Object.defineProperty;var tr=(e,t,n)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Jt=(e,t,n)=>tr(e,typeof t!="symbol"?t+"":t,n);import{j as s,e as V,cB as Se,T as I,f as G,be as q,B as j,F as Qt,bd as Et,D as nr,g as be,b as le,Q as rr,C as ze,b6 as bn,cC as sr,p as Zt,q as Ct,i as It,bm as or,aA as ir,a6 as ar,s as vn,t as mn,v as lr,w as yn,x as wn,A as Cn,aP as cr,cD as dr,cE as ur,cF as hr,aj as fr,cG as gr,cH as pr,G as N,aK as xr,aL as en,cI as br,bk as vr}from"./mui-vendor-Y6GvQTLC.js";import{r as a,a as Q,c as Ye}from"./react-vendor-D7yrL1sD.js";import{A as tn,n as P,M as mr}from"./index-B_PiLh6w.js";import{b as je}from"./botMessageService-B9xVnXdY.js";import{a as yr}from"./query-vendor-D4yC0Jq7.js";import{u as wr,C as it}from"./index.esm-BZx2A40c.js";import"./chart-vendor-BgnY-Lfo.js";class Cr{constructor(){Jt(this,"apiClient");this.apiClient=yr.create({baseURL:tn.BASE_URL,timeout:tn.TIMEOUT,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.apiClient.interceptors.request.use(t=>{try{const n=localStorage.getItem("accessToken");n&&(t.headers.Authorization=`Bearer ${n}`)}catch(n){console.error("Error getting token:",n)}return t},t=>Promise.reject(t)),this.apiClient.interceptors.response.use(t=>t,t=>{var n;return((n=t.response)==null?void 0:n.status)===401&&window.location.pathname!=="/login"&&window.location.assign("/login"),Promise.reject(t)})}async getAllConfigs(){return(await this.apiClient.get("/api/admin/config")).data}async getConfig(t){return(await this.apiClient.get(`/api/admin/config/${t}`)).data}async updateConfig(t,n,r){return(await this.apiClient.put(`/api/admin/config/${t}`,{value:n,description:r})).data}}const at=new Cr,Sr=({rules:e,onUpdate:t,disabled:n=!1})=>{const[r,o]=a.useState(e),[i,l]=a.useState(!1),[c,d]=a.useState(!1);a.useEffect(()=>{o(e),l(!1)},[e]);const f=(p,v)=>{o(b=>{const g=p==="reactivationThreshold"?typeof v=="number"&&!isNaN(v)?v:b.reactivationThreshold:v;return{...b,[p]:g}}),l(!0)},u=async()=>{d(!0);try{await t(r),l(!1)}finally{d(!1)}},h=()=>{o(e),l(!1)},x=n||c;return s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(I,{variant:"h6",fontWeight:600,children:"Bot Trigger Rules"}),subheader:s.jsx(I,{variant:"body2",color:"text.secondary",children:"Configure when and how bot messages are triggered"}),sx:{pb:1}}),s.jsx(G,{children:s.jsxs(q,{spacing:3,children:[s.jsx(j,{sx:{p:2,bgcolor:"background.default",borderRadius:2,border:"1px solid",borderColor:"divider"},children:s.jsx(Qt,{control:s.jsx(Et,{checked:r.isEnabled,onChange:p=>f("isEnabled",p.target.checked),disabled:x,color:"primary"}),label:s.jsxs(j,{children:[s.jsx(I,{variant:"body1",fontWeight:600,children:"Enable Bot Messages"}),s.jsx(I,{variant:"caption",color:"text.secondary",children:"Turn on/off automated bot messages for this chat type"})]})})}),s.jsx(nr,{}),s.jsxs(j,{children:[s.jsx(I,{variant:"body2",fontWeight:600,sx:{mb:1.5},children:"Reactivation Threshold"}),s.jsx(be,{type:"number",value:r.reactivationThreshold||5,onChange:p=>{const v=parseInt(p.target.value,10);f("reactivationThreshold",isNaN(v)?5:v)},disabled:x||!r.isEnabled,fullWidth:!0,size:"small",helperText:"Number of user messages after admin reply before bot reactivates",slotProps:{htmlInput:{min:1,max:20}},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),s.jsx(j,{sx:{p:2,bgcolor:"background.default",borderRadius:2,border:"1px solid",borderColor:"divider"},children:s.jsx(Qt,{control:s.jsx(Et,{checked:r.resetStepsOnReactivate,onChange:p=>f("resetStepsOnReactivate",p.target.checked),disabled:x||!r.isEnabled,color:"primary"}),label:s.jsxs(j,{children:[s.jsx(I,{variant:"body1",fontWeight:600,children:"Reset Steps on Reactivation"}),s.jsx(I,{variant:"caption",color:"text.secondary",children:"Start from step 1 when bot reactivates (otherwise continues from last step)"})]})})}),i&&s.jsxs(q,{direction:"row",spacing:2,justifyContent:"flex-end",sx:{pt:2},children:[s.jsx(le,{variant:"outlined",startIcon:s.jsx(rr,{}),onClick:h,disabled:x,sx:{textTransform:"none",fontWeight:600,borderRadius:2},children:"Cancel"}),s.jsx(le,{variant:"contained",startIcon:c?s.jsx(ze,{size:20,color:"inherit"}):s.jsx(bn,{}),onClick:u,disabled:x,sx:{textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:c?"Saving...":"Save Changes"})]})]})})]})};function jr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Lt(e){return"nodeType"in e}function Z(e){var t,n;return e?Pe(e)?e:Lt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function kt(e){const{Document:t}=Z(e);return e instanceof t}function tt(e){return Pe(e)?!1:e instanceof Z(e).HTMLElement}function Sn(e){return e instanceof Z(e).SVGElement}function $e(e){return e?Pe(e)?e.document:Lt(e)?kt(e)?e:tt(e)||Sn(e)?e.ownerDocument:document:document:document}const fe=pt?a.useLayoutEffect:a.useEffect;function Bt(e){const t=a.useRef(e);return fe(()=>{t.current=e}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Rr(){const e=a.useRef(null),t=a.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=a.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Je(e,t){t===void 0&&(t=[e]);const n=a.useRef(e);return fe(()=>{n.current!==e&&(n.current=e)},t),n}function nt(e,t){const n=a.useRef();return a.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ut(e){const t=Bt(e),n=a.useRef(null),r=a.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function Mt(e){const t=a.useRef();return a.useEffect(()=>{t.current=e},[e]),t.current}let St={};function rt(e,t){return a.useMemo(()=>{if(t)return t;const n=St[e]==null?0:St[e]+1;return St[e]=n,e+"-"+n},[e,t])}function jn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,l)=>{const c=Object.entries(l);for(const[d,f]of c){const u=i[d];u!=null&&(i[d]=u+e*f)}return i},{...t})}}const We=jn(1),Qe=jn(-1);function Dr(e){return"clientX"in e&&"clientY"in e}function Wt(e){if(!e)return!1;const{KeyboardEvent:t}=Z(e.target);return t&&e instanceof t}function Er(e){if(!e)return!1;const{TouchEvent:t}=Z(e.target);return t&&e instanceof t}function Tt(e){if(Er(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Dr(e)?{x:e.clientX,y:e.clientY}:null}const Ze=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ze.Translate.toString(e),Ze.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),nn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ir(e){return e.matches(nn)?e:e.querySelector(nn)}const Mr={display:"none"};function Tr(e){let{id:t,value:n}=e;return Q.createElement("div",{id:t,style:Mr},n)}function Ar(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Q.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Nr(){const[e,t]=a.useState("");return{announce:a.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Rn=a.createContext(null);function Or(e){const t=a.useContext(Rn);a.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Lr(){const[e]=a.useState(()=>new Set),t=a.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[a.useCallback(r=>{let{type:o,event:i}=r;e.forEach(l=>{var c;return(c=l[o])==null?void 0:c.call(l,i)})},[e]),t]}const kr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Br={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Wr(e){let{announcements:t=Br,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=kr}=e;const{announce:i,announcement:l}=Nr(),c=rt("DndLiveRegion"),[d,f]=a.useState(!1);if(a.useEffect(()=>{f(!0)},[]),Or(a.useMemo(()=>({onDragStart(h){let{active:x}=h;i(t.onDragStart({active:x}))},onDragMove(h){let{active:x,over:p}=h;t.onDragMove&&i(t.onDragMove({active:x,over:p}))},onDragOver(h){let{active:x,over:p}=h;i(t.onDragOver({active:x,over:p}))},onDragEnd(h){let{active:x,over:p}=h;i(t.onDragEnd({active:x,over:p}))},onDragCancel(h){let{active:x,over:p}=h;i(t.onDragCancel({active:x,over:p}))}}),[i,t])),!d)return null;const u=Q.createElement(Q.Fragment,null,Q.createElement(Tr,{id:r,value:o.draggable}),Q.createElement(Ar,{id:c,announcement:l}));return n?Ye.createPortal(u,n):u}var F;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function ht(){}function rn(e,t){return a.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ce=Object.freeze({x:0,y:0});function Dn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function En(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Pr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function sn(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function In(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function on(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const $r=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=on(t,t.left,t.top),i=[];for(const l of r){const{id:c}=l,d=n.get(c);if(d){const f=Dn(on(d),o);i.push({id:c,data:{droppableContainer:l,value:f}})}}return i.sort(En)},Fr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=sn(t),i=[];for(const l of r){const{id:c}=l,d=n.get(c);if(d){const f=sn(d),u=o.reduce((x,p,v)=>x+Dn(f[v],p),0),h=Number((u/4).toFixed(4));i.push({id:c,data:{droppableContainer:l,value:h}})}}return i.sort(En)};function Ur(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),l=o-r,c=i-n;if(r<o&&n<i){const d=t.width*t.height,f=e.width*e.height,u=l*c,h=u/(d+f-u);return Number(h.toFixed(4))}return 0}const qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const d=Ur(c,t);d>0&&o.push({id:l,data:{droppableContainer:i,value:d}})}}return o.sort(Pr)};function Hr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Mn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ce}function Xr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((l,c)=>({...l,top:l.top+e*c.y,bottom:l.bottom+e*c.y,left:l.left+e*c.x,right:l.right+e*c.x}),{...n})}}const Kr=Xr(1);function Yr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function _r(e,t,n){const r=Yr(t);if(!r)return e;const{scaleX:o,scaleY:i,x:l,y:c}=r,d=e.left-l-(1-o)*parseFloat(n),f=e.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:f,right:d+u,bottom:f+h,left:d}}const Vr={ignoreTransform:!1};function Fe(e,t){t===void 0&&(t=Vr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:u}=Z(e).getComputedStyle(e);f&&(n=_r(n,f,u))}const{top:r,left:o,width:i,height:l,bottom:c,right:d}=n;return{top:r,left:o,width:i,height:l,bottom:c,right:d}}function an(e){return Fe(e,{ignoreTransform:!0})}function Gr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Jr(e,t){return t===void 0&&(t=Z(e).getComputedStyle(e)),t.position==="fixed"}function Qr(e,t){t===void 0&&(t=Z(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function xt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(kt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!tt(o)||Sn(o)||n.includes(o))return n;const i=Z(e).getComputedStyle(o);return o!==e&&Qr(o,i)&&n.push(o),Jr(o,i)?n:r(o.parentNode)}return e?r(e):n}function Tn(e){const[t]=xt(e,1);return t??null}function jt(e){return!pt||!e?null:Pe(e)?e:Lt(e)?kt(e)||e===$e(e).scrollingElement?window:tt(e)?e:null:null}function An(e){return Pe(e)?e.scrollX:e.scrollLeft}function Nn(e){return Pe(e)?e.scrollY:e.scrollTop}function At(e){return{x:An(e),y:Nn(e)}}var U;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(U||(U={}));function On(e){return!pt||!e?!1:e===document.scrollingElement}function Ln(e){const t={x:0,y:0},n=On(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:l,isRight:c,maxScroll:r,minScroll:t}}const Zr={x:.2,y:.2};function es(e,t,n,r,o){let{top:i,left:l,right:c,bottom:d}=n;r===void 0&&(r=10),o===void 0&&(o=Zr);const{isTop:f,isBottom:u,isLeft:h,isRight:x}=Ln(e),p={x:0,y:0},v={x:0,y:0},b={height:t.height*o.y,width:t.width*o.x};return!f&&i<=t.top+b.height?(p.y=U.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!u&&d>=t.bottom-b.height&&(p.y=U.Forward,v.y=r*Math.abs((t.bottom-b.height-d)/b.height)),!x&&c>=t.right-b.width?(p.x=U.Forward,v.x=r*Math.abs((t.right-b.width-c)/b.width)):!h&&l<=t.left+b.width&&(p.x=U.Backward,v.x=r*Math.abs((t.left+b.width-l)/b.width)),{direction:p,speed:v}}function ts(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function kn(e){return e.reduce((t,n)=>We(t,At(n)),ce)}function ns(e){return e.reduce((t,n)=>t+An(n),0)}function rs(e){return e.reduce((t,n)=>t+Nn(n),0)}function ss(e,t){if(t===void 0&&(t=Fe),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);Tn(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const os=[["x",["left","right"],ns],["y",["top","bottom"],rs]];class zt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=xt(n),o=kn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,l,c]of os)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=c(r),u=o[i]-f;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _e{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function is(e){const{EventTarget:t}=Z(e);return e instanceof t?e:$e(e)}function Rt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var oe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(oe||(oe={}));function ln(e){e.preventDefault()}function as(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(A||(A={}));const Bn={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter,A.Tab]},ls=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case A.Right:return{...n,x:n.x+25};case A.Left:return{...n,x:n.x-25};case A.Down:return{...n,y:n.y+25};case A.Up:return{...n,y:n.y-25}}};class Pt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new _e($e(n)),this.windowListeners=new _e(Z(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ss(r),n(ce)}handleKeyDown(t){if(Wt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:i=Bn,coordinateGetter:l=ls,scrollBehavior:c="smooth"}=o,{code:d}=t;if(i.end.includes(d)){this.handleEnd(t);return}if(i.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:f}=r.current,u=f?{x:f.left,y:f.top}:ce;this.referenceCoordinates||(this.referenceCoordinates=u);const h=l(t,{active:n,context:r.current,currentCoordinates:u});if(h){const x=Qe(h,u),p={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const g=t.code,{isTop:w,isRight:C,isLeft:m,isBottom:R,maxScroll:S,minScroll:E}=Ln(b),D=ts(b),M={x:Math.min(g===A.Right?D.right-D.width/2:D.right,Math.max(g===A.Right?D.left:D.left+D.width/2,h.x)),y:Math.min(g===A.Down?D.bottom-D.height/2:D.bottom,Math.max(g===A.Down?D.top:D.top+D.height/2,h.y))},W=g===A.Right&&!C||g===A.Left&&!m,k=g===A.Down&&!R||g===A.Up&&!w;if(W&&M.x!==h.x){const L=b.scrollLeft+x.x,$=g===A.Right&&L<=S.x||g===A.Left&&L>=E.x;if($&&!x.y){b.scrollTo({left:L,behavior:c});return}$?p.x=b.scrollLeft-L:p.x=g===A.Right?b.scrollLeft-S.x:b.scrollLeft-E.x,p.x&&b.scrollBy({left:-p.x,behavior:c});break}else if(k&&M.y!==h.y){const L=b.scrollTop+x.y,$=g===A.Down&&L<=S.y||g===A.Up&&L>=E.y;if($&&!x.x){b.scrollTo({top:L,behavior:c});return}$?p.y=b.scrollTop-L:p.y=g===A.Down?b.scrollTop-S.y:b.scrollTop-E.y,p.y&&b.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(t,We(Qe(h,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Bn,onActivation:o}=t,{active:i}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function cn(e){return!!(e&&"distance"in e)}function dn(e){return!!(e&&"delay"in e)}class $t{constructor(t,n,r){var o;r===void 0&&(r=is(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:l}=i;this.props=t,this.events=n,this.document=$e(l),this.documentListeners=new _e(this.document),this.listeners=new _e(r),this.windowListeners=new _e(Z(l)),this.initialCoordinates=(o=Tt(i))!=null?o:ce,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.DragStart,ln),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),this.windowListeners.add(oe.ContextMenu,ln),this.documentListeners.add(oe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(cn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(oe.Click,as,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:l,options:{activationConstraint:c}}=i;if(!o)return;const d=(n=Tt(t))!=null?n:ce,f=Qe(o,d);if(!r&&c){if(cn(c)){if(c.tolerance!=null&&Rt(f,c.tolerance))return this.handleCancel();if(Rt(f,c.distance))return this.handleStart()}if(dn(c)&&Rt(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===A.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const cs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ft extends $t{constructor(t){const{event:n}=t,r=$e(n.target);super(t,cs,r)}}Ft.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const ds={move:{name:"mousemove"},end:{name:"mouseup"}};var Nt;(function(e){e[e.RightClick=2]="RightClick"})(Nt||(Nt={}));class us extends $t{constructor(t){super(t,ds,$e(t.event.target))}}us.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Nt.RightClick?!1:(r==null||r({event:n}),!0)}}];const Dt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hs extends $t{constructor(t){super(t,Dt)}static setup(){return window.addEventListener(Dt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Dt.move.name,t)};function t(){}}}hs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Ve;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ve||(Ve={}));var ft;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ft||(ft={}));function fs(e){let{acceleration:t,activator:n=Ve.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:l=5,order:c=ft.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:u,delta:h,threshold:x}=e;const p=ps({delta:h,disabled:!i}),[v,b]=Rr(),g=a.useRef({x:0,y:0}),w=a.useRef({x:0,y:0}),C=a.useMemo(()=>{switch(n){case Ve.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Ve.DraggableRect:return o}},[n,o,d]),m=a.useRef(null),R=a.useCallback(()=>{const E=m.current;if(!E)return;const D=g.current.x*w.current.x,M=g.current.y*w.current.y;E.scrollBy(D,M)},[]),S=a.useMemo(()=>c===ft.TreeOrder?[...f].reverse():f,[c,f]);a.useEffect(()=>{if(!i||!f.length||!C){b();return}for(const E of S){if((r==null?void 0:r(E))===!1)continue;const D=f.indexOf(E),M=u[D];if(!M)continue;const{direction:W,speed:k}=es(E,M,C,t,x);for(const L of["x","y"])p[L][W[L]]||(k[L]=0,W[L]=0);if(k.x>0||k.y>0){b(),m.current=E,v(R,l),g.current=k,w.current=W;return}}g.current={x:0,y:0},w.current={x:0,y:0},b()},[t,R,r,b,i,l,JSON.stringify(C),JSON.stringify(p),v,f,S,u,JSON.stringify(x)])}const gs={x:{[U.Backward]:!1,[U.Forward]:!1},y:{[U.Backward]:!1,[U.Forward]:!1}};function ps(e){let{delta:t,disabled:n}=e;const r=Mt(t);return nt(o=>{if(n||!r||!o)return gs;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[U.Backward]:o.x[U.Backward]||i.x===-1,[U.Forward]:o.x[U.Forward]||i.x===1},y:{[U.Backward]:o.y[U.Backward]||i.y===-1,[U.Forward]:o.y[U.Forward]||i.y===1}}},[n,t,r])}function xs(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return nt(o=>{var i;return t==null?null:(i=r??o)!=null?i:null},[r,t])}function bs(e,t){return a.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,i=o.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...i]},[]),[e,t])}var et;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(et||(et={}));var Ot;(function(e){e.Optimized="optimized"})(Ot||(Ot={}));const un=new Map;function vs(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,l]=a.useState(null),{frequency:c,measure:d,strategy:f}=o,u=a.useRef(e),h=g(),x=Je(h),p=a.useCallback(function(w){w===void 0&&(w=[]),!x.current&&l(C=>C===null?w:C.concat(w.filter(m=>!C.includes(m))))},[x]),v=a.useRef(null),b=nt(w=>{if(h&&!n)return un;if(!w||w===un||u.current!==e||i!=null){const C=new Map;for(let m of e){if(!m)continue;if(i&&i.length>0&&!i.includes(m.id)&&m.rect.current){C.set(m.id,m.rect.current);continue}const R=m.node.current,S=R?new zt(d(R),R):null;m.rect.current=S,S&&C.set(m.id,S)}return C}return w},[e,i,n,h,d]);return a.useEffect(()=>{u.current=e},[e]),a.useEffect(()=>{h||p()},[n,h]),a.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),a.useEffect(()=>{h||typeof c!="number"||v.current!==null||(v.current=setTimeout(()=>{p(),v.current=null},c))},[c,h,p,...r]),{droppableRects:b,measureDroppableContainers:p,measuringScheduled:i!=null};function g(){switch(f){case et.Always:return!1;case et.BeforeDragging:return n;default:return!n}}}function Wn(e,t){return nt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ms(e,t){return Wn(e,t)}function ys(e){let{callback:t,disabled:n}=e;const r=Bt(t),o=a.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return a.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function bt(e){let{callback:t,disabled:n}=e;const r=Bt(t),o=a.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return a.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function ws(e){return new zt(Fe(e),e)}function hn(e,t,n){t===void 0&&(t=ws);const[r,o]=a.useState(null);function i(){o(d=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=d??n)!=null?f:null}const u=t(e);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const l=ys({callback(d){if(e)for(const f of d){const{type:u,target:h}=f;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),c=bt({callback:i});return fe(()=>{i(),e?(c==null||c.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[e]),r}function Cs(e){const t=Wn(e);return Mn(e,t)}const fn=[];function Ss(e){const t=a.useRef(e),n=nt(r=>e?r&&r!==fn&&e&&t.current&&e.parentNode===t.current.parentNode?r:xt(e):fn,[e]);return a.useEffect(()=>{t.current=e},[e]),n}function js(e){const[t,n]=a.useState(null),r=a.useRef(e),o=a.useCallback(i=>{const l=jt(i.target);l&&n(c=>c?(c.set(l,At(l)),new Map(c)):null)},[]);return a.useEffect(()=>{const i=r.current;if(e!==i){l(i);const c=e.map(d=>{const f=jt(d);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,At(f)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),r.current=e}return()=>{l(e),l(i)};function l(c){c.forEach(d=>{const f=jt(d);f==null||f.removeEventListener("scroll",o)})}},[o,e]),a.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,l)=>We(i,l),ce):kn(e):ce,[e,t])}function gn(e,t){t===void 0&&(t=[]);const n=a.useRef(null);return a.useEffect(()=>{n.current=null},t),a.useEffect(()=>{const r=e!==ce;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Qe(e,n.current):ce}function Rs(e){a.useEffect(()=>{if(!pt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ds(e,t){return a.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:i}=r;return n[o]=l=>{i(l,t)},n},{}),[e,t])}function zn(e){return a.useMemo(()=>e?Gr(e):null,[e])}const pn=[];function Es(e,t){t===void 0&&(t=Fe);const[n]=e,r=zn(n?Z(n):null),[o,i]=a.useState(pn);function l(){i(()=>e.length?e.map(d=>On(d)?r:new zt(t(d),d)):pn)}const c=bt({callback:l});return fe(()=>{c==null||c.disconnect(),l(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),o}function Is(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tt(t)?t:e}function Ms(e){let{measure:t}=e;const[n,r]=a.useState(null),o=a.useCallback(f=>{for(const{target:u}of f)if(tt(u)){r(h=>{const x=t(u);return h?{...h,width:x.width,height:x.height}:x});break}},[t]),i=bt({callback:o}),l=a.useCallback(f=>{const u=Is(f);i==null||i.disconnect(),u&&(i==null||i.observe(u)),r(u?t(u):null)},[t,i]),[c,d]=ut(l);return a.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const Ts=[{sensor:Ft,options:{}},{sensor:Pt,options:{}}],As={current:{}},dt={draggable:{measure:an},droppable:{measure:an,strategy:et.WhileDragging,frequency:Ot.Optimized},dragOverlay:{measure:Fe}};class Ge extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ns={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ge,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ht},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dt,measureDroppableContainers:ht,windowRect:null,measuringScheduled:!1},Os={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ht,draggableNodes:new Map,over:null,measureDroppableContainers:ht},vt=a.createContext(Os),Pn=a.createContext(Ns);function Ls(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ge}}}function ks(e,t){switch(t.type){case F.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case F.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case F.DragEnd:case F.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case F.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Ge(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case F.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const l=new Ge(e.droppable.containers);return l.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case F.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Ge(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Bs(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=a.useContext(vt),i=Mt(r),l=Mt(n==null?void 0:n.id);return a.useEffect(()=>{if(!t&&!r&&i&&l!=null){if(!Wt(i)||document.activeElement===i.target)return;const c=o.get(l);if(!c)return;const{activatorNode:d,node:f}=c;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const u of[d.current,f.current]){if(!u)continue;const h=Ir(u);if(h){h.focus();break}}})}},[r,t,o,l,i]),null}function Ws(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...r}),n):n}function zs(e){return a.useMemo(()=>({draggable:{...dt.draggable,...e==null?void 0:e.draggable},droppable:{...dt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...dt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ps(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=a.useRef(!1),{x:l,y:c}=typeof o=="boolean"?{x:o,y:o}:o;fe(()=>{if(!l&&!c||!t){i.current=!1;return}if(i.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const u=n(f),h=Mn(u,r);if(l||(h.x=0),c||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const x=Tn(f);x&&x.scrollBy({top:h.y,left:h.x})}},[t,l,c,r,n])}const $n=a.createContext({...ce,scaleX:1,scaleY:1});var Re;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Re||(Re={}));const $s=a.memo(function(t){var n,r,o,i;let{id:l,accessibility:c,autoScroll:d=!0,children:f,sensors:u=Ts,collisionDetection:h=qr,measuring:x,modifiers:p,...v}=t;const b=a.useReducer(ks,void 0,Ls),[g,w]=b,[C,m]=Lr(),[R,S]=a.useState(Re.Uninitialized),E=R===Re.Initialized,{draggable:{active:D,nodes:M,translate:W},droppable:{containers:k}}=g,L=D!=null?M.get(D):null,$=a.useRef({initial:null,translated:null}),J=a.useMemo(()=>{var Y;return D!=null?{id:D,data:(Y=L==null?void 0:L.data)!=null?Y:As,rect:$}:null},[D,L]),re=a.useRef(null),[De,Ie]=a.useState(null),[_,Me]=a.useState(null),ie=Je(v,Object.values(v)),Ee=rt("DndDescribedBy",l),Te=a.useMemo(()=>k.getEnabled(),[k]),X=zs(x),{droppableRects:ae,measureDroppableContainers:y,measuringScheduled:T}=vs(Te,{dragging:E,dependencies:[W.x,W.y],config:X.droppable}),B=xs(M,D),z=a.useMemo(()=>_?Tt(_):null,[_]),K=Zn(),ge=ms(B,X.draggable.measure);Ps({activeNode:D!=null?M.get(D):null,config:K.layoutShiftCompensation,initialRect:ge,measure:X.draggable.measure});const O=hn(B,X.draggable.measure,ge),Ue=hn(B?B.parentElement:null),de=a.useRef({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=k.getNodeFor((n=de.current.over)==null?void 0:n.id),pe=Ms({measure:X.dragOverlay.measure}),Ne=(r=pe.nodeRef.current)!=null?r:B,Oe=E?(o=pe.rect)!=null?o:O:null,qt=!!(pe.nodeRef.current&&pe.rect),Ht=Cs(qt?null:O),mt=zn(Ne?Z(Ne):null),ve=Ss(E?Ae??B:null),st=Es(ve),ot=Ws(p,{transform:{x:W.x-Ht.x,y:W.y-Ht.y,scaleX:1,scaleY:1},activatorEvent:_,active:J,activeNodeRect:O,containerNodeRect:Ue,draggingNodeRect:Oe,over:de.current.over,overlayNodeRect:pe.rect,scrollableAncestors:ve,scrollableAncestorRects:st,windowRect:mt}),Xt=z?We(z,W):null,Kt=js(ve),Kn=gn(Kt),Yn=gn(Kt,[O]),Le=We(ot,Kn),ke=Oe?Kr(Oe,ot):null,qe=J&&ke?h({active:J,collisionRect:ke,droppableRects:ae,droppableContainers:Te,pointerCoordinates:Xt}):null,Yt=In(qe,"id"),[me,_t]=a.useState(null),_n=qt?ot:We(ot,Yn),Vn=Hr(_n,(i=me==null?void 0:me.rect)!=null?i:null,O),yt=a.useRef(null),Vt=a.useCallback((Y,ee)=>{let{sensor:te,options:ye}=ee;if(re.current==null)return;const se=M.get(re.current);if(!se)return;const ne=Y.nativeEvent,ue=new te({active:re.current,activeNode:se,event:ne,options:ye,context:de,onAbort(H){if(!M.get(H))return;const{onDragAbort:he}=ie.current,xe={id:H};he==null||he(xe),C({type:"onDragAbort",event:xe})},onPending(H,we,he,xe){if(!M.get(H))return;const{onDragPending:Xe}=ie.current,Ce={id:H,constraint:we,initialCoordinates:he,offset:xe};Xe==null||Xe(Ce),C({type:"onDragPending",event:Ce})},onStart(H){const we=re.current;if(we==null)return;const he=M.get(we);if(!he)return;const{onDragStart:xe}=ie.current,He={activatorEvent:ne,active:{id:we,data:he.data,rect:$}};Ye.unstable_batchedUpdates(()=>{xe==null||xe(He),S(Re.Initializing),w({type:F.DragStart,initialCoordinates:H,active:we}),C({type:"onDragStart",event:He}),Ie(yt.current),Me(ne)})},onMove(H){w({type:F.DragMove,coordinates:H})},onEnd:Be(F.DragEnd),onCancel:Be(F.DragCancel)});yt.current=ue;function Be(H){return async function(){const{active:he,collisions:xe,over:He,scrollAdjustedTranslate:Xe}=de.current;let Ce=null;if(he&&Xe){const{cancelDrop:Ke}=ie.current;Ce={activatorEvent:ne,active:he,collisions:xe,delta:Xe,over:He},H===F.DragEnd&&typeof Ke=="function"&&await Promise.resolve(Ke(Ce))&&(H=F.DragCancel)}re.current=null,Ye.unstable_batchedUpdates(()=>{w({type:H}),S(Re.Uninitialized),_t(null),Ie(null),Me(null),yt.current=null;const Ke=H===F.DragEnd?"onDragEnd":"onDragCancel";if(Ce){const wt=ie.current[Ke];wt==null||wt(Ce),C({type:Ke,event:Ce})}})}}},[M]),Gn=a.useCallback((Y,ee)=>(te,ye)=>{const se=te.nativeEvent,ne=M.get(ye);if(re.current!==null||!ne||se.dndKit||se.defaultPrevented)return;const ue={active:ne};Y(te,ee.options,ue)===!0&&(se.dndKit={capturedBy:ee.sensor},re.current=ye,Vt(te,ee))},[M,Vt]),Gt=bs(u,Gn);Rs(u),fe(()=>{O&&R===Re.Initializing&&S(Re.Initialized)},[O,R]),a.useEffect(()=>{const{onDragMove:Y}=ie.current,{active:ee,activatorEvent:te,collisions:ye,over:se}=de.current;if(!ee||!te)return;const ne={active:ee,activatorEvent:te,collisions:ye,delta:{x:Le.x,y:Le.y},over:se};Ye.unstable_batchedUpdates(()=>{Y==null||Y(ne),C({type:"onDragMove",event:ne})})},[Le.x,Le.y]),a.useEffect(()=>{const{active:Y,activatorEvent:ee,collisions:te,droppableContainers:ye,scrollAdjustedTranslate:se}=de.current;if(!Y||re.current==null||!ee||!se)return;const{onDragOver:ne}=ie.current,ue=ye.get(Yt),Be=ue&&ue.rect.current?{id:ue.id,rect:ue.rect.current,data:ue.data,disabled:ue.disabled}:null,H={active:Y,activatorEvent:ee,collisions:te,delta:{x:se.x,y:se.y},over:Be};Ye.unstable_batchedUpdates(()=>{_t(Be),ne==null||ne(H),C({type:"onDragOver",event:H})})},[Yt]),fe(()=>{de.current={activatorEvent:_,active:J,activeNode:B,collisionRect:ke,collisions:qe,droppableRects:ae,draggableNodes:M,draggingNode:Ne,draggingNodeRect:Oe,droppableContainers:k,over:me,scrollableAncestors:ve,scrollAdjustedTranslate:Le},$.current={initial:Oe,translated:ke}},[J,B,qe,ke,M,Ne,Oe,ae,k,me,ve,Le]),fs({...K,delta:W,draggingRect:ke,pointerCoordinates:Xt,scrollableAncestors:ve,scrollableAncestorRects:st});const Jn=a.useMemo(()=>({active:J,activeNode:B,activeNodeRect:O,activatorEvent:_,collisions:qe,containerNodeRect:Ue,dragOverlay:pe,draggableNodes:M,droppableContainers:k,droppableRects:ae,over:me,measureDroppableContainers:y,scrollableAncestors:ve,scrollableAncestorRects:st,measuringConfiguration:X,measuringScheduled:T,windowRect:mt}),[J,B,O,_,qe,Ue,pe,M,k,ae,me,y,ve,st,X,T,mt]),Qn=a.useMemo(()=>({activatorEvent:_,activators:Gt,active:J,activeNodeRect:O,ariaDescribedById:{draggable:Ee},dispatch:w,draggableNodes:M,over:me,measureDroppableContainers:y}),[_,Gt,J,O,w,Ee,M,me,y]);return Q.createElement(Rn.Provider,{value:m},Q.createElement(vt.Provider,{value:Qn},Q.createElement(Pn.Provider,{value:Jn},Q.createElement($n.Provider,{value:Vn},f)),Q.createElement(Bs,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Q.createElement(Wr,{...c,hiddenTextDescribedById:Ee}));function Zn(){const Y=(De==null?void 0:De.autoScrollEnabled)===!1,ee=typeof d=="object"?d.enabled===!1:d===!1,te=E&&!Y&&!ee;return typeof d=="object"?{...d,enabled:te}:{enabled:te}}}),Fs=a.createContext(null),xn="button",Us="Draggable";function qs(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=rt(Us),{activators:l,activatorEvent:c,active:d,activeNodeRect:f,ariaDescribedById:u,draggableNodes:h,over:x}=a.useContext(vt),{role:p=xn,roleDescription:v="draggable",tabIndex:b=0}=o??{},g=(d==null?void 0:d.id)===t,w=a.useContext(g?$n:Fs),[C,m]=ut(),[R,S]=ut(),E=Ds(l,t),D=Je(n);fe(()=>(h.set(t,{id:t,key:i,node:C,activatorNode:R,data:D}),()=>{const W=h.get(t);W&&W.key===i&&h.delete(t)}),[h,t]);const M=a.useMemo(()=>({role:p,tabIndex:b,"aria-disabled":r,"aria-pressed":g&&p===xn?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[r,p,b,g,v,u.draggable]);return{active:d,activatorEvent:c,activeNodeRect:f,attributes:M,isDragging:g,listeners:r?void 0:E,node:C,over:x,setNodeRef:m,setActivatorNodeRef:S,transform:w}}function Hs(){return a.useContext(Pn)}const Xs="Droppable",Ks={timeout:25};function Ys(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=rt(Xs),{active:l,dispatch:c,over:d,measureDroppableContainers:f}=a.useContext(vt),u=a.useRef({disabled:n}),h=a.useRef(!1),x=a.useRef(null),p=a.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:g}={...Ks,...o},w=Je(b??r),C=a.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{f(Array.isArray(w.current)?w.current:[w.current]),p.current=null},g)},[g]),m=bt({callback:C,disabled:v||!l}),R=a.useCallback((M,W)=>{m&&(W&&(m.unobserve(W),h.current=!1),M&&m.observe(M))},[m]),[S,E]=ut(R),D=Je(t);return a.useEffect(()=>{!m||!S.current||(m.disconnect(),h.current=!1,m.observe(S.current))},[S,m]),a.useEffect(()=>(c({type:F.RegisterDroppable,element:{id:r,key:i,disabled:n,node:S,rect:x,data:D}}),()=>c({type:F.UnregisterDroppable,key:i,id:r})),[r]),a.useEffect(()=>{n!==u.current.disabled&&(c({type:F.SetDroppableDisabled,id:r,key:i,disabled:n}),u.current.disabled=n)},[r,i,n,c]),{active:l,rect:x,isOver:(d==null?void 0:d.id)===r,node:S,over:d,setNodeRef:E}}function Ut(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function _s(e,t){return e.reduce((n,r,o)=>{const i=t.get(r);return i&&(n[o]=i),n},Array(e.length))}function lt(e){return e!==null&&e>=0}function Vs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gs(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Fn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=Ut(t,r,n),l=t[o],c=i[o];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},ct={scaleX:1,scaleY:1},Js=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:l}=e;const c=(t=i[n])!=null?t:r;if(!c)return null;if(o===n){const f=i[l];return f?{x:0,y:n<l?f.top+f.height-(c.top+c.height):f.top-c.top,...ct}:null}const d=Qs(i,o,n);return o>n&&o<=l?{x:0,y:-c.height-d,...ct}:o<n&&o>=l?{x:0,y:c.height+d,...ct}:{x:0,y:0,...ct}};function Qs(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];return r?n<t?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Un="Sortable",qn=Q.createContext({activeIndex:-1,containerId:Un,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fn,disabled:{draggable:!1,droppable:!1}});function Zs(e){let{children:t,id:n,items:r,strategy:o=Fn,disabled:i=!1}=e;const{active:l,dragOverlay:c,droppableRects:d,over:f,measureDroppableContainers:u}=Hs(),h=rt(Un,n),x=c.rect!==null,p=a.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),v=l!=null,b=l?p.indexOf(l.id):-1,g=f?p.indexOf(f.id):-1,w=a.useRef(p),C=!Vs(p,w.current),m=g!==-1&&b===-1||C,R=Gs(i);fe(()=>{C&&v&&u(p)},[C,p,v,u]),a.useEffect(()=>{w.current=p},[p]);const S=a.useMemo(()=>({activeIndex:b,containerId:h,disabled:R,disableTransforms:m,items:p,overIndex:g,useDragOverlay:x,sortedRects:_s(p,d),strategy:o}),[b,h,R.draggable,R.droppable,m,p,g,d,x,o]);return Q.createElement(qn.Provider,{value:S},t)}const eo=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Ut(n,r,o).indexOf(t)},to=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:l,previousItems:c,previousContainerId:d,transition:f}=e;return!f||!r||c!==i&&o===l?!1:n?!0:l!==o&&t===d},no={duration:200,easing:"ease"},Hn="transform",ro=Ze.Transition.toString({property:Hn,duration:0,easing:"linear"}),so={roleDescription:"sortable"};function oo(e){let{disabled:t,index:n,node:r,rect:o}=e;const[i,l]=a.useState(null),c=a.useRef(n);return fe(()=>{if(!t&&n!==c.current&&r.current){const d=o.current;if(d){const f=Fe(r.current,{ignoreTransform:!0}),u={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(u.x||u.y)&&l(u)}}n!==c.current&&(c.current=n)},[t,n,r,o]),a.useEffect(()=>{i&&l(null)},[i]),i}function io(e){let{animateLayoutChanges:t=to,attributes:n,disabled:r,data:o,getNewIndex:i=eo,id:l,strategy:c,resizeObserverConfig:d,transition:f=no}=e;const{items:u,containerId:h,activeIndex:x,disabled:p,disableTransforms:v,sortedRects:b,overIndex:g,useDragOverlay:w,strategy:C}=a.useContext(qn),m=ao(r,p),R=u.indexOf(l),S=a.useMemo(()=>({sortable:{containerId:h,index:R,items:u},...o}),[h,o,R,u]),E=a.useMemo(()=>u.slice(u.indexOf(l)),[u,l]),{rect:D,node:M,isOver:W,setNodeRef:k}=Ys({id:l,data:S,disabled:m.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...d}}),{active:L,activatorEvent:$,activeNodeRect:J,attributes:re,setNodeRef:De,listeners:Ie,isDragging:_,over:Me,setActivatorNodeRef:ie,transform:Ee}=qs({id:l,data:S,attributes:{...so,...n},disabled:m.draggable}),Te=jr(k,De),X=!!L,ae=X&&!v&&lt(x)&&lt(g),y=!w&&_,T=y&&ae?Ee:null,z=ae?T??(c??C)({rects:b,activeNodeRect:J,activeIndex:x,overIndex:g,index:R}):null,K=lt(x)&&lt(g)?i({id:l,items:u,activeIndex:x,overIndex:g}):R,ge=L==null?void 0:L.id,O=a.useRef({activeId:ge,items:u,newIndex:K,containerId:h}),Ue=u!==O.current.items,de=t({active:L,containerId:h,isDragging:_,isSorting:X,id:l,index:R,items:u,newIndex:O.current.newIndex,previousItems:O.current.items,previousContainerId:O.current.containerId,transition:f,wasDragging:O.current.activeId!=null}),Ae=oo({disabled:!de,index:R,node:M,rect:D});return a.useEffect(()=>{X&&O.current.newIndex!==K&&(O.current.newIndex=K),h!==O.current.containerId&&(O.current.containerId=h),u!==O.current.items&&(O.current.items=u)},[X,K,h,u]),a.useEffect(()=>{if(ge===O.current.activeId)return;if(ge!=null&&O.current.activeId==null){O.current.activeId=ge;return}const Ne=setTimeout(()=>{O.current.activeId=ge},50);return()=>clearTimeout(Ne)},[ge]),{active:L,activeIndex:x,attributes:re,data:S,rect:D,index:R,newIndex:K,items:u,isOver:W,isSorting:X,isDragging:_,listeners:Ie,node:M,overIndex:g,over:Me,setNodeRef:Te,setActivatorNodeRef:ie,setDroppableNodeRef:k,setDraggableNodeRef:De,transform:Ae??z,transition:pe()};function pe(){if(Ae||Ue&&O.current.newIndex===R)return ro;if(!(y&&!Wt($)||!f)&&(X||de))return Ze.Transition.toString({...f,property:Hn})}}function ao(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function gt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const lo=[A.Down,A.Right,A.Up,A.Left],co=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:i,over:l,scrollableAncestors:c}}=t;if(lo.includes(e.code)){if(e.preventDefault(),!n||!r)return;const d=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const x=o.get(h.id);if(x)switch(e.code){case A.Down:r.top<x.top&&d.push(h);break;case A.Up:r.top>x.top&&d.push(h);break;case A.Left:r.left>x.left&&d.push(h);break;case A.Right:r.left<x.left&&d.push(h);break}});const f=Fr({collisionRect:r,droppableRects:o,droppableContainers:d});let u=In(f,"id");if(u===(l==null?void 0:l.id)&&f.length>1&&(u=f[1].id),u!=null){const h=i.get(n.id),x=i.get(u),p=x?o.get(x.id):null,v=x==null?void 0:x.node.current;if(v&&p&&h&&x){const g=xt(v).some((E,D)=>c[D]!==E),w=Xn(h,x),C=uo(h,x),m=g||!w?{x:0,y:0}:{x:C?r.width-p.width:0,y:C?r.height-p.height:0},R={x:p.left,y:p.top};return m.x&&m.y?R:Qe(R,m)}}}};function Xn(e,t){return!gt(e)||!gt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function uo(e,t){return!gt(e)||!gt(t)||!Xn(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const ho=({message:e,onEdit:t,onDelete:n,onToggleActive:r,disabled:o=!1})=>{const[i,l]=a.useState(!1),{attributes:c,listeners:d,setNodeRef:f,transform:u,transition:h,isDragging:x}=io({id:e.id}),p={transform:Ze.Transform.toString(u),transition:h,opacity:x?.5:1},v=async b=>{l(!0);try{await r(e.id,b)}finally{l(!1)}};return s.jsx(V,{ref:f,style:p,sx:{border:"2px solid",borderColor:e.isActive?"primary.light":"divider",borderRadius:2,boxShadow:1,bgcolor:e.isActive?"background.paper":"action.hover",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:4,borderColor:"primary.main",transform:"translateY(-2px)"}},children:s.jsx(G,{children:s.jsxs(j,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[s.jsx(j,{...c,...d,sx:{display:"flex",alignItems:"center",color:"text.secondary",cursor:o?"default":"grab",p:1,borderRadius:1,transition:"all 0.2s","&:hover":{bgcolor:"action.hover",color:"primary.main"},"&:active":{cursor:o?"default":"grabbing",bgcolor:"action.selected"}},children:s.jsx(sr,{})}),s.jsxs(j,{sx:{flex:1,minWidth:0},children:[s.jsxs(q,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1.5,flexWrap:"wrap"},children:[s.jsx(Zt,{label:`Step ${e.stepNumber}`,size:"small",color:"primary",variant:"filled",sx:{fontWeight:600}}),s.jsx(Zt,{label:e.isActive?"Active":"Inactive",size:"small",color:e.isActive?"success":"default",sx:{fontWeight:600}}),s.jsx(I,{variant:"caption",color:"text.secondary",sx:{fontFamily:"monospace",bgcolor:"action.hover",px:1,py:.5,borderRadius:1},children:e.messageKey})]}),s.jsxs(j,{sx:{mb:1.5,p:1.5,bgcolor:"background.default",borderRadius:1.5,border:"1px solid",borderColor:"divider"},children:[s.jsx(I,{variant:"caption",color:"text.secondary",sx:{fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:"English"}),s.jsx(I,{variant:"body2",sx:{mt:.5,lineHeight:1.6},children:e.content})]}),s.jsxs(j,{sx:{p:1.5,bgcolor:"background.default",borderRadius:1.5,border:"1px solid",borderColor:"divider"},children:[s.jsx(I,{variant:"caption",color:"text.secondary",sx:{fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:""}),s.jsx(I,{variant:"body2",sx:{mt:.5,lineHeight:1.6},children:e.contentBn})]})]}),s.jsxs(q,{direction:"row",spacing:.5,alignItems:"center",children:[s.jsx(Ct,{title:e.isActive?"Deactivate":"Activate",arrow:!0,children:s.jsxs(j,{sx:{position:"relative",display:"inline-flex"},children:[s.jsx(Et,{checked:e.isActive,onChange:b=>v(b.target.checked),disabled:o||i,size:"small",color:"success"}),i&&s.jsx(ze,{size:20,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-10px",marginLeft:"-10px"}})]})}),s.jsx(Ct,{title:"Edit",arrow:!0,children:s.jsx(It,{size:"small",onClick:()=>t(e),disabled:o||i,color:"primary",sx:{"&:hover":{bgcolor:"primary.light",color:"primary.dark"}},children:s.jsx(or,{fontSize:"small"})})}),s.jsx(Ct,{title:"Delete",arrow:!0,children:s.jsx(It,{size:"small",onClick:()=>n(e.id),disabled:o||i,color:"error",sx:{"&:hover":{bgcolor:"error.light",color:"error.dark"}},children:s.jsx(ir,{fontSize:"small"})})})]})]})})})},fo=({messages:e,onEdit:t,onDelete:n,onToggleActive:r,onReorder:o,disabled:i=!1})=>{const l=zr(rn(Ft),rn(Pt,{coordinateGetter:co})),c=d=>{const{active:f,over:u}=d;if(!u||f.id===u.id)return;const h=e.findIndex(v=>v.id===f.id),x=e.findIndex(v=>v.id===u.id),p=Ut(e,h,x).map((v,b)=>({...v,displayOrder:b}));o(p)};return e.length===0?s.jsxs(j,{sx:{py:10,px:3,textAlign:"center",color:"text.secondary",bgcolor:"background.default",borderRadius:2,border:"2px dashed",borderColor:"divider"},children:[s.jsx(I,{variant:"h6",fontWeight:600,sx:{mb:1},children:"No bot messages configured yet"}),s.jsx(I,{variant:"body2",children:'Click "Add Message" to create your first bot message.'})]}):s.jsx($s,{sensors:l,collisionDetection:$r,onDragEnd:c,children:s.jsx(Zs,{items:e.map(d=>d.id),strategy:Js,disabled:i,children:s.jsx(ar,{children:e.map(d=>s.jsx(j,{sx:{mb:2},children:s.jsx(ho,{message:d,onEdit:t,onDelete:n,onToggleActive:r,disabled:i})},d.id))})})})},go=({open:e,message:t,onClose:n,onSave:r,saving:o=!1})=>{const{control:i,handleSubmit:l,reset:c,formState:{errors:d}}=wr({defaultValues:{messageKey:"",content:"",contentBn:"",stepNumber:1}});a.useEffect(()=>{c(t?{messageKey:t.messageKey,content:t.content,contentBn:t.contentBn,stepNumber:t.stepNumber}:{messageKey:"",content:"",contentBn:"",stepNumber:1})},[t,c]);const f=async u=>{await r(u)};return s.jsxs(vn,{open:e,onClose:n,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:24}},children:[s.jsx(mn,{sx:{pb:2},children:s.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx(I,{variant:"h5",fontWeight:700,children:t?"Edit Bot Message":"Add Bot Message"}),s.jsx(It,{edge:"end",onClick:n,disabled:o,size:"small",sx:{"&:hover":{bgcolor:"action.hover",transform:"rotate(90deg)"},transition:"all 0.2s"},children:s.jsx(lr,{})})]})}),s.jsxs("form",{onSubmit:l(f),children:[s.jsx(yn,{dividers:!0,children:s.jsxs(q,{spacing:3,children:[s.jsx(it,{name:"messageKey",control:i,rules:{required:"Message key is required",pattern:{value:/^[a-z0-9_-]+$/,message:"Only lowercase letters, numbers, hyphens, and underscores allowed"}},render:({field:u})=>{var h;return s.jsx(be,{...u,label:"Message Key",placeholder:"e.g., welcome_message",error:!!d.messageKey,helperText:((h=d.messageKey)==null?void 0:h.message)||"Unique identifier for this message (lowercase, no spaces)",disabled:o||!!t,fullWidth:!0,required:!0})}}),s.jsx(it,{name:"stepNumber",control:i,rules:{required:"Step number is required",min:{value:1,message:"Step number must be at least 1"},max:{value:100,message:"Step number cannot exceed 100"}},render:({field:u})=>{var h;return s.jsx(be,{...u,type:"number",label:"Step Number",error:!!d.stepNumber,helperText:((h=d.stepNumber)==null?void 0:h.message)||"Order in which this message appears (1-100) - Bot will loop through all steps dynamically",disabled:o,fullWidth:!0,required:!0,inputProps:{min:1,max:100}})}}),s.jsx(it,{name:"content",control:i,rules:{required:"English content is required",validate:{notEmpty:u=>u.trim().length>0||"Content cannot be empty or whitespace only",minLength:u=>u.trim().length>=10||"Content must be at least 10 characters"},maxLength:{value:500,message:"Content cannot exceed 500 characters"}},render:({field:u})=>{var h;return s.jsx(be,{...u,label:"English Content",placeholder:"Enter message in English",error:!!d.content,helperText:((h=d.content)==null?void 0:h.message)||`${u.value.length}/500 characters`,disabled:o,fullWidth:!0,required:!0,multiline:!0,rows:4})}}),s.jsx(it,{name:"contentBn",control:i,rules:{required:"Bangla content is required",validate:{notEmpty:u=>u.trim().length>0||"Content cannot be empty or whitespace only",minLength:u=>u.trim().length>=10||"Content must be at least 10 characters"},maxLength:{value:500,message:"Content cannot exceed 500 characters"}},render:({field:u})=>{var h;return s.jsx(be,{...u,label:"Bangla Content ()",placeholder:"  ",error:!!d.contentBn,helperText:((h=d.contentBn)==null?void 0:h.message)||`${u.value.length}/500 characters`,disabled:o,fullWidth:!0,required:!0,multiline:!0,rows:4})}})]})}),s.jsxs(wn,{sx:{px:3,py:2.5,gap:1},children:[s.jsx(le,{variant:"outlined",onClick:n,disabled:o,sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Cancel"}),s.jsx(le,{type:"submit",variant:"contained",startIcon:o?s.jsx(ze,{size:20}):s.jsx(bn,{}),disabled:o,sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3,boxShadow:2,"&:hover":{boxShadow:4}},children:o?"Saving...":t?"Update":"Create"})]})]})]})},po=({chatType:e})=>{const[t,n]=a.useState(null),[r,o]=a.useState(!0),[i,l]=a.useState(null),[c,d]=a.useState(""),[f,u]=a.useState(""),h=async()=>{try{o(!0),l(null);const g=await je.getBotAnalytics({chatType:e,startDate:c||void 0,endDate:f||void 0});n(g)}catch(g){const w=g instanceof Error?g.message:"Failed to load analytics";l(w)}finally{o(!1)}};a.useEffect(()=>{h()},[e]);const x=()=>{h()},p=()=>{d(""),u(""),setTimeout(()=>h(),0)},v=g=>g<60?`${Math.round(g)}s`:g<3600?`${Math.round(g/60)}m`:`${Math.round(g/3600)}h`,b=()=>{if(!t)return;const g=[];g.push("Bot Analytics Report"),g.push(`Chat Type: ${e}`),g.push(`Generated: ${new Date().toLocaleString()}`),(c||f)&&g.push(`Date Range: ${c||"All"} to ${f||"All"}`),g.push(""),g.push("Summary Metrics"),g.push("Metric,Value"),g.push(`Total Triggers,${t.totalTriggers}`),g.push(`Admin Reply Rate,${Math.round(t.adminReplyRate*100)}%`),g.push(`Average Response Time,${v(t.avgResponseTime)}`),g.push(""),g.push("Step Breakdown"),g.push("Step,Triggers,Replies,Reply Rate"),t.stepBreakdown.forEach(S=>{const E=S.triggers>0?`${Math.round(S.replies/S.triggers*100)}%`:"N/A";g.push(`Step ${S.step},${S.triggers},${S.replies},${E}`)});const w=g.join(`
`),C=new Blob([w],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),R=URL.createObjectURL(C);m.setAttribute("href",R),m.setAttribute("download",`bot-analytics-${e}-${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)};return r?s.jsx(j,{sx:{display:"flex",justifyContent:"center",py:4},children:s.jsx(ze,{})}):i?s.jsx(Cn,{severity:"error",onClose:()=>l(null),children:i}):t?s.jsxs(j,{children:[s.jsxs(q,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:3},alignItems:{xs:"stretch",sm:"center"},children:[s.jsx(be,{type:"date",label:"Start Date",value:c,onChange:g=>d(g.target.value),size:"small",slotProps:{inputLabel:{shrink:!0}},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),s.jsx(be,{type:"date",label:"End Date",value:f,onChange:g=>u(g.target.value),size:"small",slotProps:{inputLabel:{shrink:!0}},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),s.jsx(le,{variant:"contained",onClick:x,size:"small",sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Filter"}),s.jsx(le,{variant:"outlined",onClick:p,size:"small",sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Reset"}),s.jsx(le,{variant:"outlined",onClick:b,size:"small",startIcon:s.jsx(cr,{}),sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Export CSV"})]}),s.jsxs(j,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:3,mb:3},children:[s.jsx(V,{sx:{borderRadius:2,boxShadow:2},children:s.jsx(G,{children:s.jsxs(q,{direction:"row",spacing:2,alignItems:"center",children:[s.jsx(j,{sx:{bgcolor:"primary.light",color:"primary.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(dr,{fontSize:"large"})}),s.jsxs(j,{children:[s.jsx(I,{variant:"h4",fontWeight:700,children:t.totalTriggers}),s.jsx(I,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Total Triggers"})]})]})})}),s.jsx(V,{sx:{borderRadius:2,boxShadow:2},children:s.jsx(G,{children:s.jsxs(q,{direction:"row",spacing:2,alignItems:"center",children:[s.jsx(j,{sx:{bgcolor:"success.light",color:"success.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(ur,{fontSize:"large"})}),s.jsxs(j,{children:[s.jsxs(I,{variant:"h4",fontWeight:700,children:[Math.round(t.adminReplyRate*100),"%"]}),s.jsx(I,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Reply Rate"})]})]})})}),s.jsx(V,{sx:{borderRadius:2,boxShadow:2},children:s.jsx(G,{children:s.jsxs(q,{direction:"row",spacing:2,alignItems:"center",children:[s.jsx(j,{sx:{bgcolor:"warning.light",color:"warning.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(hr,{fontSize:"large"})}),s.jsxs(j,{children:[s.jsx(I,{variant:"h4",fontWeight:700,children:v(t.avgResponseTime)}),s.jsx(I,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Avg Response"})]})]})})}),s.jsx(V,{sx:{borderRadius:2,boxShadow:2},children:s.jsx(G,{children:s.jsxs(q,{direction:"row",spacing:2,alignItems:"center",children:[s.jsx(j,{sx:{bgcolor:"info.light",color:"info.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(fr,{fontSize:"large"})}),s.jsxs(j,{children:[s.jsx(I,{variant:"h4",fontWeight:700,children:t.adminReplyRate>.7?"High":t.adminReplyRate>.4?"Medium":"Low"}),s.jsx(I,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Effectiveness"})]})]})})})]}),s.jsx(V,{sx:{borderRadius:2,boxShadow:2},children:s.jsxs(G,{children:[s.jsx(I,{variant:"h6",fontWeight:700,sx:{mb:3},children:"Step Breakdown"}),s.jsx(j,{sx:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"2px solid #e0e0e0",backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{padding:"16px 12px",textAlign:"left",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Step"}),s.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Triggers"}),s.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Replies"}),s.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Reply Rate"})]})}),s.jsx("tbody",{children:t.stepBreakdown.map((g,w)=>s.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0",backgroundColor:w%2===0?"#ffffff":"#fafafa"},children:[s.jsxs("td",{style:{padding:"14px 12px",fontWeight:600},children:["Step ",g.step]}),s.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:500},children:g.triggers}),s.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:500},children:g.replies}),s.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:600,color:g.triggers>0?g.replies/g.triggers>.7?"#2e7d32":g.replies/g.triggers>.4?"#ed6c02":"#d32f2f":"#666"},children:g.triggers>0?`${Math.round(g.replies/g.triggers*100)}%`:"N/A"})]},g.step))})]})})]})})]}):s.jsx(I,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No analytics data available"})},xo=({open:e,onClose:t,onConfirm:n,loading:r=!1,title:o="Delete Bot Message",message:i="Are you sure you want to delete this bot message? This action cannot be undone."})=>s.jsxs(vn,{open:e,onClose:r?void 0:t,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",PaperProps:{sx:{borderRadius:3,boxShadow:24}},children:[s.jsx(mn,{id:"delete-dialog-title",sx:{pb:2},children:s.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[s.jsx(j,{sx:{bgcolor:"error.light",color:"error.main",p:1,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(gr,{})}),s.jsx(I,{variant:"h6",fontWeight:700,children:o})]})}),s.jsx(yn,{sx:{py:2},children:s.jsx(pr,{id:"delete-dialog-description",sx:{fontSize:"1rem"},children:i})}),s.jsxs(wn,{sx:{px:3,pb:2.5,gap:1},children:[s.jsx(le,{onClick:t,disabled:r,variant:"outlined",sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Cancel"}),s.jsx(le,{onClick:n,disabled:r,variant:"contained",color:"error",startIcon:r?s.jsx(ze,{size:16}):null,sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3,boxShadow:2,"&:hover":{boxShadow:4}},children:r?"Deleting...":"Delete"})]})]}),bo=()=>s.jsx(V,{sx:{border:"1px solid",borderColor:"divider",boxShadow:"none",mb:2},children:s.jsx(G,{children:s.jsxs(j,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[s.jsx(N,{variant:"rectangular",width:24,height:24}),s.jsxs(j,{sx:{flex:1,minWidth:0},children:[s.jsxs(q,{direction:"row",spacing:1,sx:{mb:1},children:[s.jsx(N,{variant:"rounded",width:60,height:24}),s.jsx(N,{variant:"rounded",width:60,height:24}),s.jsx(N,{variant:"text",width:120,height:24})]}),s.jsxs(j,{sx:{mb:1},children:[s.jsx(N,{variant:"text",width:80,height:16}),s.jsx(N,{variant:"text",width:"100%",height:20}),s.jsx(N,{variant:"text",width:"80%",height:20})]}),s.jsxs(j,{children:[s.jsx(N,{variant:"text",width:80,height:16}),s.jsx(N,{variant:"text",width:"100%",height:20}),s.jsx(N,{variant:"text",width:"70%",height:20})]})]}),s.jsxs(q,{direction:"row",spacing:1,alignItems:"center",children:[s.jsx(N,{variant:"rectangular",width:40,height:24}),s.jsx(N,{variant:"circular",width:32,height:32}),s.jsx(N,{variant:"circular",width:32,height:32})]})]})})}),vo=({count:e=3})=>s.jsx(j,{children:Array.from({length:e}).map((t,n)=>s.jsx(bo,{},n))}),Eo=()=>{const[e,t]=a.useState("LIVE_CHAT"),[n,r]=a.useState([]),[o,i]=a.useState(null),[l,c]=a.useState(!0),[d,f]=a.useState(null),[u,h]=a.useState(!1),[x,p]=a.useState(null),[v,b]=a.useState(!1),[g,w]=a.useState(null),[C,m]=a.useState(!1),[R,S]=a.useState("20"),[E,D]=a.useState("10"),[M,W]=a.useState(!0),[k,L]=a.useState(!1),$=a.useCallback(async()=>{try{c(!0),f(null);const y=await je.getBotMessages(e);r(y.messages),i(y.rules)}catch(y){const T=y instanceof Error?y.message:"Failed to load bot messages";f(T),P.error(T)}finally{c(!1)}},[e]),J=a.useCallback(async()=>{try{W(!0);const y=await at.getConfig("daily_complaint_limit");y.success&&y.data&&S(y.data.value);const T=await at.getConfig("ward_image_limit");T.success&&T.data&&D(T.data.value)}catch(y){console.error("Error loading complaint limits:",y)}finally{W(!1)}},[]);a.useEffect(()=>{$(),J()},[$,J]);const re=(y,T)=>{t(T)},De=()=>{p(null),h(!0)},Ie=y=>{p(y),h(!0)},_=y=>{w(y),b(!0)},Me=async()=>{if(g)try{m(!0),await je.deleteBotMessage(g),P.success("Bot message deleted successfully"),await $()}catch(y){const T=y instanceof Error?y.message:"Failed to delete bot message";P.error(T)}finally{m(!1),b(!1),w(null)}},ie=async(y,T)=>{try{await je.toggleBotMessageActive(y,T),P.success(`Bot message ${T?"activated":"deactivated"} successfully`),await $()}catch(B){const z=B instanceof Error?B.message:"Failed to update bot message";P.error(z)}},Ee=async()=>{try{L(!0);const y=parseInt(R,10),T=parseInt(E,10);if(isNaN(y)||y<1){P.error("Daily complaint limit must be a positive number");return}if(isNaN(T)||T<1){P.error("Ward image limit must be a positive number");return}await at.updateConfig("daily_complaint_limit",R,"Maximum complaints a user can submit per day"),await at.updateConfig("ward_image_limit",E,"Maximum images allowed per ward"),P.success("Complaint limits updated successfully")}catch(y){console.error("Error saving complaint limits:",y),P.error("Failed to save complaint limits")}finally{L(!1)}},Te=async y=>{var T,B;try{m(!0);const z={...y,content:(T=y.content)==null?void 0:T.trim(),contentBn:(B=y.contentBn)==null?void 0:B.trim(),stepNumber:Number(y.stepNumber)};if(!z.content||z.content.length===0){P.error("English content cannot be empty");return}if(!z.contentBn||z.contentBn.length===0){P.error("Bangla content cannot be empty");return}if(isNaN(z.stepNumber)||z.stepNumber<1){P.error("Step number must be a valid positive number");return}if(x){const K={};if(z.content!==x.content&&(K.content=z.content),z.contentBn!==x.contentBn&&(K.contentBn=z.contentBn),z.stepNumber!==x.stepNumber&&(K.stepNumber=z.stepNumber),Object.keys(K).length===0){P.info("No changes to save"),h(!1),p(null);return}await je.updateBotMessage(x.id,K),P.success("Bot message updated successfully")}else await je.createBotMessage({...z,chatType:e,displayOrder:n.length}),P.success("Bot message created successfully");h(!1),p(null),await $()}catch(z){const K=z instanceof Error?z.message:"Failed to save bot message";P.error(K)}finally{m(!1)}},X=async y=>{try{const T=y.map(B=>B.id);await je.reorderBotMessages(e,T),r(y),P.success("Bot messages reordered successfully")}catch(T){const B=T instanceof Error?T.message:"Failed to reorder bot messages";P.error(B),await $()}},ae=async y=>{try{m(!0);const T=typeof y.reactivationThreshold=="number"&&!isNaN(y.reactivationThreshold)?y.reactivationThreshold:5;await je.updateTriggerRules(e,{isEnabled:y.isEnabled??!0,reactivationThreshold:T,resetStepsOnReactivate:y.resetStepsOnReactivate??!1}),P.success("Trigger rules updated successfully"),await $()}catch(T){const B=T instanceof Error?T.message:"Failed to update trigger rules";P.error(B)}finally{m(!1)}};return s.jsx(mr,{children:s.jsxs(j,{sx:{p:{xs:2,sm:3},maxWidth:1400,mx:"auto"},children:[s.jsxs(j,{sx:{mb:4},children:[s.jsx(I,{variant:"h4",sx:{fontWeight:700,mb:1,color:"primary.main",fontSize:{xs:"1.75rem",sm:"2.125rem"}},children:"Bot Message System Control"}),s.jsx(I,{variant:"body1",color:"text.secondary",sx:{maxWidth:800},children:"Manage automated bot messages, trigger rules, and complaint limits"})]}),s.jsx(j,{sx:{borderBottom:1,borderColor:"divider",mb:4,bgcolor:"background.paper",borderRadius:"8px 8px 0 0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:s.jsxs(xr,{value:e,onChange:re,sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem",minHeight:56}},children:[s.jsx(en,{label:"Live Chat",value:"LIVE_CHAT"}),s.jsx(en,{label:"Complaint Chat",value:"COMPLAINT_CHAT"})]})}),d&&s.jsx(Cn,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{width:"100%"}},onClose:()=>f(null),children:d}),l?s.jsxs(q,{spacing:3,children:[s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(N,{width:250}),subheader:s.jsx(N,{width:350})}),s.jsx(G,{children:s.jsxs(q,{spacing:3,children:[s.jsx(N,{variant:"rectangular",height:56,sx:{borderRadius:1}}),s.jsx(N,{variant:"rectangular",height:56,sx:{borderRadius:1}}),s.jsx(N,{variant:"rectangular",height:40,width:150,sx:{borderRadius:1}})]})})]}),s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(N,{width:200}),subheader:s.jsx(N,{width:300})}),s.jsx(G,{children:s.jsxs(q,{spacing:3,children:[s.jsx(N,{variant:"rectangular",height:40,sx:{borderRadius:1}}),s.jsx(N,{variant:"rectangular",height:56,sx:{borderRadius:1}}),s.jsx(N,{variant:"rectangular",height:40,sx:{borderRadius:1}})]})})]}),s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(N,{width:150}),subheader:s.jsx(N,{width:250})}),s.jsx(G,{children:s.jsx(vo,{count:3})})]}),s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(N,{width:250}),subheader:s.jsx(N,{width:350})}),s.jsx(G,{children:s.jsx(N,{variant:"rectangular",height:300,sx:{borderRadius:1}})})]})]}):s.jsxs(q,{spacing:3,children:[s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(I,{variant:"h6",fontWeight:600,children:"  (Complaint Limits)"}),subheader:s.jsx(I,{variant:"body2",color:"text.secondary",children:"Configure daily complaint and image upload limits"}),sx:{pb:1}}),s.jsx(G,{children:M?s.jsxs(q,{spacing:3,children:[s.jsx(N,{variant:"rectangular",height:56,sx:{borderRadius:1}}),s.jsx(N,{variant:"rectangular",height:56,sx:{borderRadius:1}}),s.jsx(N,{variant:"rectangular",height:40,width:150,sx:{borderRadius:1}})]}):s.jsxs(q,{spacing:3,children:[s.jsxs(j,{children:[s.jsx(I,{variant:"subtitle2",sx:{mb:1,color:"text.secondary",fontWeight:600},children:"   (Daily Complaint Limit)"}),s.jsx(be,{fullWidth:!0,type:"number",value:R,onChange:y=>S(y.target.value),helperText:"      ",InputProps:{inputProps:{min:1}},disabled:k,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),s.jsxs(j,{children:[s.jsx(I,{variant:"subtitle2",sx:{mb:1,color:"text.secondary",fontWeight:600},children:"   (Ward Image Limit)"}),s.jsx(be,{fullWidth:!0,type:"number",value:E,onChange:y=>D(y.target.value),helperText:"         ",InputProps:{inputProps:{min:1}},disabled:k,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),s.jsx(j,{children:s.jsx(le,{variant:"contained",startIcon:k?s.jsx(ze,{size:20,color:"inherit"}):s.jsx(br,{}),onClick:Ee,disabled:k,sx:{textTransform:"none",fontWeight:600,px:3,py:1.5,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:k?"Saving...":"Save Changes"})})]})})]}),o&&s.jsx(Sr,{rules:o,onUpdate:ae,disabled:C}),s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(I,{variant:"h6",fontWeight:600,children:"Bot Messages"}),subheader:s.jsxs(I,{variant:"body2",color:"text.secondary",children:["Manage automated messages for ",e==="LIVE_CHAT"?"Live Chat":"Complaint Chat"]}),action:s.jsx(le,{variant:"contained",startIcon:s.jsx(vr,{}),onClick:De,disabled:C,sx:{textTransform:"none",fontWeight:600,px:3,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:"Add Message"}),sx:{pb:1}}),s.jsx(G,{children:s.jsx(fo,{messages:n,onEdit:Ie,onDelete:_,onToggleActive:ie,onReorder:X,disabled:C})})]}),s.jsxs(V,{sx:{borderRadius:2,boxShadow:2},children:[s.jsx(Se,{title:s.jsx(I,{variant:"h6",fontWeight:600,children:"Bot Performance Analytics"}),subheader:s.jsx(I,{variant:"body2",color:"text.secondary",children:"View bot message effectiveness and user engagement metrics"}),sx:{pb:1}}),s.jsx(G,{children:s.jsx(po,{chatType:e})})]})]}),s.jsx(go,{open:u,message:x,onClose:()=>{h(!1),p(null)},onSave:Te,saving:C}),s.jsx(xo,{open:v,onClose:()=>{b(!1),w(null)},onConfirm:Me,loading:C,title:"Delete Bot Message",message:"Are you sure you want to delete this bot message? This action cannot be undone and will remove the message from the bot's response sequence."})]})})};export{Eo as default};
