import{j as e,B as d,C as O,A as de,T as r,az as s,e as $,f as N,a4 as Je,l as De,O as Qe,aj as et,aF as Ae,ap as Ie,P as ge,aq as ze,ar as Re,as as X,at as x,au as Te,p as T,b as w,bk as je,aK as tt,aL as ye,g as u,a1 as S,i as K,y as be,V as at,aX as fe,s as ne,t as re,w as oe,D as st,bc as he,x as le}from"./mui-vendor-Y6GvQTLC.js";import{r as c}from"./react-vendor-D7yrL1sD.js";import{A as ve,f as F,a as n,s as W,d as it,k as nt,w as rt,M as ot,V as Ce}from"./index-B_PiLh6w.js";import{a as lt}from"./query-vendor-D4yC0Jq7.js";import{R as we,P as dt,a as ct,C as xt,T as Se,d as $e,B as ht,b as ut,X as gt,Y as mt,c as ue}from"./chart-vendor-BgnY-Lfo.js";const b=lt.create({baseURL:ve.BASE_URL,timeout:ve.TIMEOUT,withCredentials:!0,headers:{"Content-Type":"application/json"}});b.interceptors.request.use(h=>{const a=localStorage.getItem("accessToken");return a&&(h.headers.Authorization=`Bearer ${a}`),h});class pt{async getAllNotices(a={},g=1,C=20){const m=new URLSearchParams({page:g.toString(),limit:C.toString()});return a.categoryId&&m.append("categoryId",a.categoryId.toString()),a.type&&m.append("type",a.type),a.priority&&m.append("priority",a.priority),a.isActive!==void 0&&m.append("isActive",a.isActive.toString()),a.search&&m.append("search",a.search),(await b.get(`/api/notices?${m.toString()}`)).data}async getActiveNotices(a={},g=1,C=20){const m=new URLSearchParams({page:g.toString(),limit:C.toString()});return a.categoryId&&m.append("categoryId",a.categoryId.toString()),a.type&&m.append("type",a.type),(await b.get(`/api/notices/active?${m.toString()}`)).data}async getNoticeById(a){return(await b.get(`/api/notices/${a}`)).data}async createNotice(a){return(await b.post("/api/notices",a)).data}async updateNotice(a,g){return(await b.put(`/api/notices/${a}`,g)).data}async toggleNoticeStatus(a){return(await b.patch(`/api/notices/${a}/toggle`)).data}async deleteNotice(a){await b.delete(`/api/notices/${a}`)}async getAnalytics(){return(await b.get("/api/notices/analytics/stats")).data}async incrementViewCount(a){await b.post(`/api/notices/${a}/view`)}async markAsRead(a){await b.post(`/api/notices/${a}/read`)}async getAllCategories(){return(await b.get("/api/notice-categories")).data.data}async getCategoryTree(){return(await b.get("/api/notice-categories/tree")).data.data}async getCategoryById(a){return(await b.get(`/api/notice-categories/${a}`)).data.data}async createCategory(a){return(await b.post("/api/notice-categories",a)).data.data}async updateCategory(a,g){return(await b.put(`/api/notice-categories/${a}`,g)).data.data}async deleteCategory(a){await b.delete(`/api/notice-categories/${a}`)}}const z=new pt,jt=({categories:h})=>{const[a,g]=c.useState(null),[C,m]=c.useState(!0),[P,Z]=c.useState(null);c.useEffect(()=>{ce()},[]);const ce=async()=>{try{m(!0),Z(null);const o=await z.getAnalytics();g(o)}catch(o){Z(o.message||"Failed to load analytics")}finally{m(!1)}};if(C)return e.jsx(d,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(O,{})});if(P)return e.jsx(de,{severity:"error",sx:{mb:2},children:P});if(!a)return e.jsx(de,{severity:"info",children:"No analytics data available"});const D=a.categoryStats.map(o=>{const l=h.find(j=>j.id===o.categoryId);return{name:(l==null?void 0:l.name)||`Category ${o.categoryId}`,count:o._count,views:o._sum.viewCount||0,reads:o._sum.readCount||0,color:(l==null?void 0:l.color)||"#3FA564"}}),J=[{name:"Active",value:a.activeNotices,color:"#3FA564"},{name:"Expired",value:a.expiredNotices,color:"#FF6B6B"},{name:"Urgent",value:a.urgentNotices,color:"#FFE66D"}],Q=a.totalViews>0?(a.totalReads/a.totalViews*100).toFixed(1):"0";return e.jsxs(d,{sx:{animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"},children:[e.jsx(r,{variant:"h6",sx:{mb:3},fontWeight:"bold",children:"Notice Analytics Dashboard"}),e.jsxs(s,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsx($,{sx:{color:"white",borderRadius:3,background:"linear-gradient(135deg, #16a34a 0%, #22c55e 100%)",boxShadow:"0 10px 24px rgba(34, 197, 94, 0.25)",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-3px)",boxShadow:"0 14px 30px rgba(34, 197, 94, 0.35)"},animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"50ms"},children:e.jsxs(N,{children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Je,{sx:{mr:1}}),e.jsx(r,{variant:"subtitle2",children:"Total Notices"})]}),e.jsx(r,{variant:"h3",fontWeight:"bold",children:a.totalNotices}),e.jsxs(r,{variant:"caption",children:[a.activeNotices," active"]})]})})}),e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsx($,{sx:{color:"white",borderRadius:3,background:"linear-gradient(135deg, #0ea5e9 0%, #22d3ee 100%)",boxShadow:"0 10px 24px rgba(14, 165, 233, 0.25)",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-3px)",boxShadow:"0 14px 30px rgba(14, 165, 233, 0.35)"},animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"110ms"},children:e.jsxs(N,{children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(De,{sx:{mr:1}}),e.jsx(r,{variant:"subtitle2",children:"Total Views"})]}),e.jsx(r,{variant:"h3",fontWeight:"bold",children:a.totalViews.toLocaleString()}),e.jsx(r,{variant:"caption",children:"Across all notices"})]})})}),e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsx($,{sx:{color:"#1f2937",borderRadius:3,background:"linear-gradient(135deg, #fde68a 0%, #fbbf24 100%)",boxShadow:"0 10px 24px rgba(251, 191, 36, 0.25)",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-3px)",boxShadow:"0 14px 30px rgba(251, 191, 36, 0.35)"},animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"170ms"},children:e.jsxs(N,{children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Qe,{sx:{mr:1}}),e.jsx(r,{variant:"subtitle2",children:"Total Reads"})]}),e.jsx(r,{variant:"h3",fontWeight:"bold",children:a.totalReads.toLocaleString()}),e.jsx(r,{variant:"caption",children:"Full content reads"})]})})}),e.jsx(s,{size:{xs:12,sm:6,md:3},children:e.jsx($,{sx:{color:"white",borderRadius:3,background:"linear-gradient(135deg, #f97316 0%, #ef4444 100%)",boxShadow:"0 10px 24px rgba(239, 68, 68, 0.25)",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-3px)",boxShadow:"0 14px 30px rgba(239, 68, 68, 0.35)"},animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"230ms"},children:e.jsxs(N,{children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(et,{sx:{mr:1}}),e.jsx(r,{variant:"subtitle2",children:"Engagement Rate"})]}),e.jsxs(r,{variant:"h3",fontWeight:"bold",children:[Q,"%"]}),e.jsx(r,{variant:"caption",children:"Read/View ratio"})]})})})]}),e.jsxs(s,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(s,{size:{xs:12,md:6},children:e.jsx($,{sx:{animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"80ms"},children:e.jsxs(N,{children:[e.jsx(r,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Notice Status Distribution"}),e.jsx(we,{width:"100%",height:300,children:e.jsxs(dt,{children:[e.jsx(ct,{data:J,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,value:l})=>`${o}: ${l}`,outerRadius:100,fill:"#8884d8",dataKey:"value",animationDuration:1200,children:J.map((o,l)=>e.jsx(xt,{fill:o.color},`cell-${l}`))}),e.jsx(Se,{}),e.jsx($e,{})]})})]})})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx($,{sx:{animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"120ms"},children:e.jsxs(N,{children:[e.jsx(r,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Category Performance"}),e.jsx(we,{width:"100%",height:300,children:e.jsxs(ht,{data:D,children:[e.jsx(ut,{strokeDasharray:"3 3"}),e.jsx(gt,{dataKey:"name"}),e.jsx(mt,{}),e.jsx(Se,{}),e.jsx($e,{}),e.jsx(ue,{dataKey:"count",fill:"#3FA564",name:"Notices",animationDuration:1100}),e.jsx(ue,{dataKey:"views",fill:"#4ECDC4",name:"Views",animationDuration:1300}),e.jsx(ue,{dataKey:"reads",fill:"#FFE66D",name:"Reads",animationDuration:1500})]})})]})})})]}),e.jsx($,{sx:{animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"140ms"},children:e.jsxs(N,{children:[e.jsxs(r,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:[e.jsx(Ae,{sx:{mr:1,verticalAlign:"middle"}}),"Category-wise Statistics"]}),e.jsx(Ie,{component:ge,variant:"outlined",children:e.jsxs(ze,{children:[e.jsx(Re,{children:e.jsxs(X,{sx:{bgcolor:"#f5f5f5"},children:[e.jsx(x,{children:"Category"}),e.jsx(x,{align:"center",children:"Total Notices"}),e.jsx(x,{align:"center",children:"Total Views"}),e.jsx(x,{align:"center",children:"Total Reads"}),e.jsx(x,{align:"center",children:"Avg Views/Notice"}),e.jsx(x,{align:"center",children:"Engagement Rate"})]})}),e.jsxs(Te,{children:[D.map((o,l)=>{const j=o.count>0?(o.views/o.count).toFixed(1):"0",H=o.views>0?(o.reads/o.views*100).toFixed(1):"0";return e.jsxs(X,{children:[e.jsx(x,{children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:o.color}}),e.jsx(r,{fontWeight:"medium",children:o.name})]})}),e.jsx(x,{align:"center",children:e.jsx(T,{label:o.count,size:"small",color:"primary"})}),e.jsx(x,{align:"center",children:o.views.toLocaleString()}),e.jsx(x,{align:"center",children:o.reads.toLocaleString()}),e.jsx(x,{align:"center",children:j}),e.jsx(x,{align:"center",children:e.jsx(T,{label:`${H}%`,size:"small",color:parseFloat(H)>50?"success":"default"})})]},l)}),D.length===0&&e.jsx(X,{children:e.jsx(x,{colSpan:6,align:"center",children:e.jsx(r,{color:"text.secondary",children:"No data available"})})})]})]})})]})}),e.jsx($,{sx:{mt:3,bgcolor:"#f9f9f9",animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"180ms"},children:e.jsxs(N,{children:[e.jsx(r,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Summary Insights"}),e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{size:{xs:12,md:4},children:e.jsxs(d,{sx:{p:2,bgcolor:"white",borderRadius:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Most Active Category"}),e.jsx(r,{variant:"h6",fontWeight:"bold",children:D.length>0?D.reduce((o,l)=>o.count>l.count?o:l).name:"N/A"})]})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsxs(d,{sx:{p:2,bgcolor:"white",borderRadius:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Most Viewed Category"}),e.jsx(r,{variant:"h6",fontWeight:"bold",children:D.length>0?D.reduce((o,l)=>o.views>l.views?o:l).name:"N/A"})]})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsxs(d,{sx:{p:2,bgcolor:"white",borderRadius:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Urgent Notices"}),e.jsxs(r,{variant:"h6",fontWeight:"bold",color:"error",children:[a.urgentNotices," Active"]})]})})]})]})})]})};var B=(h=>(h.GENERAL="GENERAL",h.URGENT="URGENT",h.EVENT="EVENT",h.SCHEDULED="SCHEDULED",h))(B||{}),U=(h=>(h.LOW="LOW",h.NORMAL="NORMAL",h.HIGH="HIGH",h.URGENT="URGENT",h))(U||{});function Ne(h){const{children:a,value:g,index:C,...m}=h;return e.jsx("div",{role:"tabpanel",hidden:g!==C,...m,children:g===C&&e.jsx(d,{sx:{p:{xs:2,md:3},animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"},children:a})})}const St=()=>{const[h,a]=c.useState(0),[g,C]=c.useState([]),[m,P]=c.useState([]),[Z,ce]=c.useState([]),[D,J]=c.useState([]),[Q,o]=c.useState([]),[l,j]=c.useState(!1),[H,f]=c.useState(null),[me,E]=c.useState(null),[A,ee]=c.useState({}),[Fe,We]=c.useState(""),[Ee,V]=c.useState(!1),[Be,M]=c.useState(!1),[Me,te]=c.useState(!1),[Le,ae]=c.useState(!1),[L,se]=c.useState(null),[v,_]=c.useState(null),[I,G]=c.useState({name:"",nameBn:"",color:"#3FA564",icon:"游닉"}),[i,y]=c.useState({title:"",titleBn:"",description:"",descriptionBn:"",content:"",contentBn:"",categoryId:"",type:B.GENERAL,priority:U.NORMAL,publishDate:new Date().toISOString().split("T")[0],expiryDate:"",imageUrl:"",targetCities:[],targetZones:[],targetWards:[]});c.useEffect(()=>{q(),ie(),ke()},[A]);const ke=async()=>{try{const p=(await it.getCityCorporations("ACTIVE")).cityCorporations||[];ce(p);const pe=(await Promise.all(p.map(k=>nt.getZones({cityCorporationId:k.id,status:"ACTIVE"})))).flatMap(k=>k.zones||[]);J(pe);const Xe=(await Promise.all(pe.map(k=>rt.getWards({zoneId:k.id,status:"ACTIVE"})))).flatMap(k=>k.wards||[]);o(Xe)}catch(t){console.error("Failed to load location data:",t)}},q=async()=>{try{j(!0),f(null);const t=await z.getAllNotices(A);C(t.notices)}catch(t){f(t.message||"Failed to load notices")}finally{j(!1)}},ie=async()=>{try{const t=await z.getAllCategories();P(Array.isArray(t)?t:[])}catch(t){console.error("Failed to load categories:",t)}},Oe=async()=>{try{j(!0),f(null),await z.createCategory(I),E("Category created successfully!"),M(!1),Y(),ie()}catch(t){f(t.message||"Failed to create category")}finally{j(!1)}},Ue=async()=>{if(v)try{j(!0),f(null),await z.updateCategory(v.id,I),E("Category updated successfully!"),M(!1),Y(),ie()}catch(t){f(t.message||"Failed to update category")}finally{j(!1)}},Pe=async()=>{if(v)try{j(!0),await z.deleteCategory(v.id),E("Category deleted successfully!"),ae(!1),_(null),ie()}catch(t){f(t.message||"Failed to delete category")}finally{j(!1)}},Y=()=>{G({name:"",nameBn:"",color:"#3FA564",icon:"游닉"}),_(null)},Ve=t=>{_(t),G({name:t.name,nameBn:t.nameBn||"",color:t.color||"#3FA564",icon:t.icon||"游닉"}),M(!0)},Ge=async()=>{try{if(j(!0),f(null),!i.categoryId){f("Please select a category");return}await z.createNotice({...i,categoryId:Number(i.categoryId)}),E("Notice created successfully!"),V(!1),xe(),q()}catch(t){f(t.message||"Failed to create notice")}finally{j(!1)}},Ze=async()=>{if(L)try{if(j(!0),f(null),!i.categoryId){f("Please select a category");return}await z.updateNotice(L.id,{...i,categoryId:Number(i.categoryId)}),E("Notice updated successfully!"),V(!1),xe(),q()}catch(t){f(t.message||"Failed to update notice")}finally{j(!1)}},He=async t=>{try{await z.toggleNoticeStatus(t.id),E(`Notice ${t.isActive?"deactivated":"activated"} successfully!`),q()}catch(p){f(p.message||"Failed to toggle notice status")}},_e=async()=>{if(L)try{j(!0),await z.deleteNotice(L.id),E("Notice deleted successfully!"),te(!1),se(null),q()}catch(t){f(t.message||"Failed to delete notice")}finally{j(!1)}},xe=()=>{y({title:"",titleBn:"",description:"",descriptionBn:"",content:"",contentBn:"",categoryId:"",type:B.GENERAL,priority:U.NORMAL,publishDate:new Date().toISOString().split("T")[0],expiryDate:"",imageUrl:"",targetCities:[],targetZones:[],targetWards:[]}),se(null)},qe=t=>{se(t),y({title:t.title,titleBn:t.titleBn||"",description:t.description,descriptionBn:t.descriptionBn||"",content:t.content,contentBn:t.contentBn||"",categoryId:t.categoryId,type:t.type,priority:t.priority,publishDate:t.publishDate.split("T")[0],expiryDate:t.expiryDate?t.expiryDate.split("T")[0]:"",imageUrl:t.imageUrl||"",targetCities:t.targetCities||[],targetZones:t.targetZones||[],targetWards:t.targetWards||[]}),V(!0)},Ye=t=>{switch(t){case U.URGENT:return"error";case U.HIGH:return"warning";case U.NORMAL:return"info";default:return"default"}},Ke=t=>{switch(t){case B.URGENT:return"error";case B.EVENT:return"success";case B.SCHEDULED:return"warning";default:return"primary"}};return e.jsx(ot,{title:"Notice Board Management",children:e.jsxs(d,{sx:{p:{xs:2,md:3}},children:[e.jsx(ge,{sx:{p:{xs:2,md:3},mb:3,borderRadius:3,background:"linear-gradient(135deg, #0f766e 0%, #22c55e 100%)",color:"white",animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"},children:e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",gap:2},children:[e.jsxs(d,{children:[e.jsx(r,{variant:"h4",fontWeight:"bold",sx:{mb:.5},children:"Notice Board Management"}),e.jsx(r,{variant:"body2",sx:{opacity:.9},children:"Create, manage, and analyze public notices with better clarity"})]}),e.jsxs(d,{sx:{display:"flex",gap:1.5,flexWrap:"wrap",width:{xs:"100%",md:"auto"}},children:[e.jsx(w,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:()=>M(!0),sx:{borderColor:"rgba(255,255,255,0.7)",color:"white",width:{xs:"100%",sm:"auto"},"&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"},...Ce},children:"Manage Categories"}),e.jsx(w,{variant:"contained",startIcon:e.jsx(je,{}),onClick:()=>{xe(),V(!0)},sx:{bgcolor:"white",color:"#0f766e",width:{xs:"100%",sm:"auto"},"&:hover":{bgcolor:"#f0fdf4"},...Ce},children:"Create Notice"})]})]})}),e.jsx(d,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(tt,{value:h,onChange:(t,p)=>a(p),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600},"& .MuiTabs-indicator":{height:3,borderRadius:2}},children:[e.jsx(ye,{label:"Notices"}),e.jsx(ye,{label:"Analytics"})]})}),e.jsxs(Ne,{value:h,index:0,children:[H&&e.jsx(de,{severity:"error",onClose:()=>f(null),sx:{mb:2},children:H}),me&&e.jsx(de,{severity:"success",onClose:()=>E(null),sx:{mb:2},children:me}),e.jsx($,{sx:{mb:3,borderRadius:3,boxShadow:"0 4px 18px rgba(0,0,0,0.06)",border:"1px solid",borderColor:"divider",animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:"40ms"},children:e.jsx(N,{children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{size:{xs:12,md:4},children:e.jsx(u,{fullWidth:!0,label:"Search",value:Fe,onChange:t=>{We(t.target.value),ee({...A,search:t.target.value})},placeholder:"Search by title or description"})}),e.jsx(s,{size:{xs:12,md:3},children:e.jsxs(u,{fullWidth:!0,select:!0,label:"Category",value:A.categoryId||"",onChange:t=>ee({...A,categoryId:Number(t.target.value)||void 0}),children:[e.jsx(S,{value:"",children:"All Categories"}),m.map(t=>e.jsx(S,{value:t.id,children:t.name},t.id))]})}),e.jsx(s,{size:{xs:12,md:2},children:e.jsxs(u,{fullWidth:!0,select:!0,label:"Type",value:A.type||"",onChange:t=>ee({...A,type:t.target.value||void 0}),children:[e.jsx(S,{value:"",children:"All Types"}),Object.values(B).map(t=>e.jsx(S,{value:t,children:t},t))]})}),e.jsx(s,{size:{xs:12,md:3},children:e.jsxs(u,{fullWidth:!0,select:!0,label:"Status",value:A.isActive===void 0?"":A.isActive.toString(),onChange:t=>ee({...A,isActive:t.target.value===""?void 0:t.target.value==="true"}),children:[e.jsx(S,{value:"",children:"All Status"}),e.jsx(S,{value:"true",children:"Active"}),e.jsx(S,{value:"false",children:"Inactive"})]})})]})})}),l?e.jsx(d,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(O,{})}):e.jsxs(s,{container:!0,spacing:2,children:[g.map((t,p)=>e.jsx(s,{size:{xs:12},children:e.jsx($,{sx:{borderRadius:3,border:"1px solid",borderColor:"divider",boxShadow:"0 6px 18px rgba(15, 23, 42, 0.06)",transition:"transform 0.2s ease, box-shadow 0.2s ease",animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both",animationDelay:`${Math.min(p*60,300)}ms`,"&:hover":{transform:"translateY(-3px)",boxShadow:"0 12px 26px rgba(15, 23, 42, 0.12)"}},children:e.jsx(N,{children:e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",gap:2},children:[e.jsxs(d,{sx:{flex:1},children:[e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:1},children:[e.jsx(T,{label:t.type,color:Ke(t.type),size:"small"}),e.jsx(T,{label:t.priority,color:Ye(t.priority),size:"small"}),t.category&&e.jsx(T,{label:t.category.name,size:"small",sx:{bgcolor:t.category.color,color:"white"}}),e.jsx(T,{label:t.isActive?"Active":"Inactive",color:t.isActive?"success":"default",size:"small"})]}),e.jsx(r,{variant:"h6",fontWeight:"bold",children:t.title}),t.titleBn&&e.jsx(r,{variant:"body2",color:"text.secondary",children:t.titleBn}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:1},children:t.description}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,mt:2},children:[e.jsx(T,{label:`Views: ${t.viewCount}`,size:"small",variant:"outlined"}),e.jsx(T,{label:`Reads: ${t.readCount}`,size:"small",variant:"outlined"}),e.jsx(T,{label:`Published: ${new Date(t.publishDate).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),e.jsxs(d,{sx:{display:"flex",gap:1,justifyContent:{xs:"flex-start",md:"flex-end"}},children:[e.jsx(K,{color:"primary",onClick:()=>qe(t),title:"Edit",children:e.jsx(be,{})}),e.jsx(K,{color:t.isActive?"warning":"success",onClick:()=>He(t),title:t.isActive?"Deactivate":"Activate",children:t.isActive?e.jsx(at,{}):e.jsx(De,{})}),e.jsx(K,{color:"error",onClick:()=>{se(t),te(!0)},title:"Delete",children:e.jsx(fe,{})})]})]})})})},t.id)),!l&&g.length===0&&e.jsx(s,{size:{xs:12},children:e.jsx($,{sx:{borderRadius:3,border:"1px dashed",borderColor:"divider",animation:`${F} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"},children:e.jsx(N,{children:e.jsx(r,{color:"text.secondary",align:"center",children:"No notices found. Create a new notice to get started."})})})})]})]}),e.jsx(Ne,{value:h,index:1,children:e.jsx(jt,{categories:m})}),e.jsxs(ne,{open:Ee,onClose:()=>V(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"}},children:[e.jsx(re,{children:L?"Edit Notice":"Create New Notice"}),e.jsx(oe,{children:e.jsxs(s,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Title (English)",value:i.title,onChange:t=>y({...i,title:t.target.value}),required:!0})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Title (Bangla)",value:i.titleBn,onChange:t=>y({...i,titleBn:t.target.value})})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Description (English)",value:i.description,onChange:t=>y({...i,description:t.target.value}),multiline:!0,rows:2,required:!0})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Description (Bangla)",value:i.descriptionBn,onChange:t=>y({...i,descriptionBn:t.target.value}),multiline:!0,rows:2})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Content (English)",value:i.content,onChange:t=>y({...i,content:t.target.value}),multiline:!0,rows:4,required:!0})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Content (Bangla)",value:i.contentBn,onChange:t=>y({...i,contentBn:t.target.value}),multiline:!0,rows:4})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsxs(u,{fullWidth:!0,select:!0,label:"Category",value:i.categoryId||"",onChange:t=>y({...i,categoryId:Number(t.target.value)}),required:!0,children:[e.jsx(S,{value:"",children:"Select Category"}),m.map(t=>e.jsx(S,{value:t.id,children:t.name},t.id))]})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(u,{fullWidth:!0,select:!0,label:"Type",value:i.type,onChange:t=>y({...i,type:t.target.value}),children:Object.values(B).map(t=>e.jsx(S,{value:t,children:t},t))})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(u,{fullWidth:!0,select:!0,label:"Priority",value:i.priority,onChange:t=>y({...i,priority:t.target.value}),children:Object.values(U).map(t=>e.jsx(S,{value:t,children:t},t))})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,type:"date",label:"Publish Date",value:i.publishDate,onChange:t=>y({...i,publishDate:t.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,type:"date",label:"Expiry Date (Optional)",value:i.expiryDate,onChange:t=>y({...i,expiryDate:t.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(s,{size:{xs:12},children:e.jsx(u,{fullWidth:!0,label:"Image URL (Optional)",value:i.imageUrl,onChange:t=>y({...i,imageUrl:t.target.value})})}),e.jsx(s,{size:{xs:12},children:e.jsx(st,{sx:{my:2},children:e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Geographical Targeting (Optional)"})})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(he,{multiple:!0,options:Z,getOptionLabel:t=>t.name||t.code,value:Z.filter(t=>i.targetCities.includes(t.id)),onChange:(t,p)=>y({...i,targetCities:p.map(R=>R.id)}),renderInput:t=>e.jsx(u,{...t,label:"Target Cities",placeholder:"Select Cities"})})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(he,{multiple:!0,options:D,getOptionLabel:t=>{var p;return`${(p=t.cityCorporation)!=null&&p.name?`${t.cityCorporation.name} - `:""}Zone ${t.zoneNumber??t.number??""}`},value:D.filter(t=>i.targetZones.includes(t.id)),onChange:(t,p)=>y({...i,targetZones:p.map(R=>R.id)}),renderInput:t=>e.jsx(u,{...t,label:"Target Zones",placeholder:"Select Zones"})})}),e.jsx(s,{size:{xs:12,md:4},children:e.jsx(he,{multiple:!0,options:Q,getOptionLabel:t=>{var p,R;return`${(R=(p=t.zone)==null?void 0:p.cityCorporation)!=null&&R.name?`${t.zone.cityCorporation.name} - `:""}Ward ${t.wardNumber??t.number??""}`},value:Q.filter(t=>i.targetWards.includes(t.id)),onChange:(t,p)=>y({...i,targetWards:p.map(R=>R.id)}),renderInput:t=>e.jsx(u,{...t,label:"Target Wards",placeholder:"Select Wards"})})})]})}),e.jsxs(le,{children:[e.jsx(w,{onClick:()=>V(!1),children:"Cancel"}),e.jsx(w,{variant:"contained",onClick:L?Ze:Ge,disabled:l,children:l?e.jsx(O,{size:24}):L?"Update":"Create"})]})]}),e.jsxs(ne,{open:Me,onClose:()=>te(!1),PaperProps:{sx:{borderRadius:3,animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"}},children:[e.jsx(re,{children:"Confirm Delete"}),e.jsx(oe,{children:e.jsx(r,{children:"Are you sure you want to delete this notice? This action cannot be undone."})}),e.jsxs(le,{children:[e.jsx(w,{onClick:()=>te(!1),children:"Cancel"}),e.jsx(w,{variant:"contained",color:"error",onClick:_e,disabled:l,children:l?e.jsx(O,{size:24}):"Delete"})]})]}),e.jsxs(ne,{open:Be,onClose:()=>{M(!1),Y()},maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"}},children:[e.jsx(re,{children:v&&v.id?"Edit Category":"Manage Categories"}),e.jsx(oe,{children:!v||!v.id?e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{mb:3,mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(w,{variant:"contained",startIcon:e.jsx(je,{}),onClick:()=>{Y(),_({id:0})},children:"Add Category"})}),e.jsx(Ie,{component:ge,children:e.jsxs(ze,{children:[e.jsx(Re,{children:e.jsxs(X,{children:[e.jsx(x,{children:"Icon"}),e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Name (Bangla)"}),e.jsx(x,{children:"Description"}),e.jsx(x,{children:"Color"}),e.jsx(x,{align:"right",children:"Actions"})]})}),e.jsx(Te,{children:m.map(t=>e.jsxs(X,{children:[e.jsx(x,{children:t.icon}),e.jsx(x,{children:t.name}),e.jsx(x,{children:t.nameBn}),e.jsx(x,{children:e.jsx(d,{sx:{width:30,height:30,bgcolor:t.color,borderRadius:1}})}),e.jsxs(x,{align:"right",children:[e.jsx(K,{color:"primary",onClick:()=>Ve(t),size:"small",children:e.jsx(be,{})}),e.jsx(K,{color:"error",onClick:()=>{_(t),ae(!0),M(!1)},size:"small",children:e.jsx(fe,{})})]})]},t.id))})]})})]}):e.jsxs(s,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Name (English)",value:I.name,onChange:t=>G({...I,name:t.target.value}),required:!0})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Name (Bangla)",value:I.nameBn,onChange:t=>G({...I,nameBn:t.target.value})})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Color",type:"color",value:I.color,onChange:t=>G({...I,color:t.target.value})})}),e.jsx(s,{size:{xs:12,md:6},children:e.jsx(u,{fullWidth:!0,label:"Icon (Emoji)",value:I.icon,onChange:t=>G({...I,icon:t.target.value}),placeholder:"游닉"})})]})}),e.jsxs(le,{children:[e.jsx(w,{onClick:()=>{M(!1),Y()},children:v&&v.id?"Cancel":"Close"}),v&&v.id!==void 0&&v.id>0&&e.jsx(w,{variant:"contained",onClick:Ue,disabled:l,children:l?e.jsx(O,{size:24}):"Update"}),v&&v.id===0&&e.jsx(w,{variant:"contained",onClick:Oe,disabled:l,children:l?e.jsx(O,{size:24}):"Create"})]})]}),e.jsxs(ne,{open:Le,onClose:()=>ae(!1),PaperProps:{sx:{borderRadius:3,animation:`${W} ${n.normal.duration} ${n.smooth.timing}`,animationFillMode:"both"}},children:[e.jsx(re,{children:"Confirm Delete"}),e.jsx(oe,{children:e.jsx(r,{children:"Are you sure you want to delete this category? This action cannot be undone."})}),e.jsxs(le,{children:[e.jsx(w,{onClick:()=>ae(!1),children:"Cancel"}),e.jsx(w,{variant:"contained",color:"error",onClick:Pe,disabled:l,children:l?e.jsx(O,{size:24}):"Delete"})]})]})]})})};export{St as default};
