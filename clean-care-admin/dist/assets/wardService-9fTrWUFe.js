var o=Object.defineProperty;var d=(s,a,t)=>a in s?o(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var n=(s,a,t)=>d(s,typeof a!="symbol"?a+"":a,t);import{R as c,S as i}from"./index-wC2ewM-h.js";class l{constructor(){n(this,"apiClient");this.apiClient=c.create({baseURL:i.BASE_URL,timeout:i.TIMEOUT,withCredentials:!0}),this.apiClient.interceptors.request.use(a=>{const t=localStorage.getItem("accessToken");return t&&(a.headers.Authorization=`Bearer ${t}`),a},a=>Promise.reject(a))}async getWards(a){try{if(!(a!=null&&a.zoneId)&&!(a!=null&&a.cityCorporationCode))return console.warn("‚ö†Ô∏è No zoneId or cityCorporationCode provided"),{wards:[]};const t=new URLSearchParams;a.zoneId&&t.append("zoneId",a.zoneId.toString()),a.cityCorporationCode&&t.append("cityCorporationCode",a.cityCorporationCode),a!=null&&a.status&&a.status!=="ALL"&&t.append("status",a.status);const e=await this.apiClient.get(`/api/admin/wards?${t.toString()}`);console.log("üîç Wards API Response:",e.data);const r=e.data.data||e.data.wards||[];return Array.isArray(r)?{wards:r}:(console.error("‚ùå wards is not an array:",r),{wards:[]})}catch(t){return console.error("‚ùå Error fetching wards:",t),{wards:[]}}}async getWardsByZone(a,t){return(await this.getWards({zoneId:a,status:t})).wards}async getWardById(a){const t=await this.apiClient.get(`/api/admin/wards/${a}`);return t.data.ward||t.data}async createWard(a){const t=await this.apiClient.post("/api/admin/wards",a);return t.data.ward||t.data}async createWardsBulk(a,t){const e=await this.apiClient.post("/api/admin/wards/bulk",{zoneId:a,wardNumbers:t});return e.data.wards||e.data}async updateWard(a,t){const e=await this.apiClient.put(`/api/admin/wards/${a}`,t);return e.data.ward||e.data}async deleteWard(a){await this.apiClient.delete(`/api/admin/wards/${a}`)}async getWardStats(a){return(await this.apiClient.get(`/api/admin/wards/${a}/statistics`)).data}async getAvailableWardNumbers(a){var t;try{const e=await this.apiClient.get(`/api/admin/wards/available/${a}`);console.log("üîç Available wards API response:",e.data);const r=e.data.data||e.data.availableNumbers||e.data;return Array.isArray(r)?r:(console.error("‚ùå Available numbers is not an array:",r),[])}catch(e){throw console.error("‚ùå Error fetching available ward numbers:",e),console.error("Error response:",(t=e.response)==null?void 0:t.data),e}}}const p=new l;export{p as w};
