var ge=Object.defineProperty;var me=(c,e,r)=>e in c?ge(c,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[e]=r;var q=(c,e,r)=>me(c,typeof e!="symbol"?e+"":e,r);import{u as se,o as ee,j as t,B as d,T as S,i as H,v as oe,aJ as xe,g as ye,I as ie,Z as ve,p as J,a3 as le,C as Ce,aZ as we,H as be,J as je,K as Me}from"./mui-vendor-DhgYLev2.js";import{r as o,i as Se,d as Ie}from"./react-vendor-D7yrL1sD.js";import{A as _,x as Q,y as M,z as V,M as Ee}from"./index-pueUXdzt.js";import{a as ke,b as G,C as Ae}from"./browserNotifications-BvguxRB7.js";import{a as te,E as ce,M as Ue}from"./ErrorDisplay-dEZLAl9O.js";import{a as F}from"./query-vendor-dIV3S2E5.js";import"./chart-vendor-Byzruw8x.js";class ze{constructor(){q(this,"apiClient");q(this,"pollingIntervals");q(this,"POLLING_INTERVAL",5e3);this.apiClient=F.create({baseURL:_.BASE_URL,timeout:_.TIMEOUT,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.pollingIntervals=new Map,this.setupInterceptors()}setupInterceptors(){this.apiClient.interceptors.request.use(e=>{try{const r=localStorage.getItem("accessToken");r&&(e.headers.Authorization=`Bearer ${r}`)}catch(r){console.error("Error getting token:",r)}return e},e=>Promise.reject(e)),this.apiClient.interceptors.response.use(e=>e,e=>{var r;return((r=e.response)==null?void 0:r.status)===401&&window.location.pathname!=="/login"&&window.location.assign("/login"),Promise.reject(e)})}isCloudinaryUrl(e){return!!e&&e.includes("res.cloudinary.com")&&e.includes("/upload/")}transformMediaUrl(e){if(!e)return null;if(this.isCloudinaryUrl(e))return e;if(e.startsWith("http://")||e.startsWith("https://")){if(e.startsWith(_.BASE_URL))return e;const i=/^https?:\/\/[^\/]+/;return e.replace(i,_.BASE_URL)}return`${_.BASE_URL}${e.startsWith("/")?"":"/"}${e}`}getCloudinaryThumbnail(e,r=200,i=200){return e&&(this.isCloudinaryUrl(e)?e.replace("/upload/",`/upload/w_${r},h_${i},c_fill,q_auto,f_auto/`):e)}getOptimizedCloudinaryUrl(e){return e&&(this.isCloudinaryUrl(e)?e.replace("/upload/","/upload/q_auto,f_auto/"):e)}transformMessage(e){return{...e,fileUrl:this.transformMediaUrl(e.fileUrl)||void 0,voiceUrl:this.transformMediaUrl(e.voiceUrl)||void 0}}async getConversations(e){var r,i;try{const l={page:(e==null?void 0:e.page)||1,limit:(e==null?void 0:e.limit)||20};e!=null&&e.cityCorporationCode&&(l.cityCorporationCode=e.cityCorporationCode),e!=null&&e.zoneId&&(l.zoneId=e.zoneId),e!=null&&e.wardId&&(l.wardId=e.wardId),e!=null&&e.unreadOnly&&(l.unreadOnly="true"),e!=null&&e.search&&(l.search=e.search);const h=Q.liveChatConversations(JSON.stringify(l)),n=M.get(h);if(n)return n;const p=(await this.apiClient.get("/api/admin/live-chat",{params:l})).data.data;return p.conversations&&(p.conversations=p.conversations.map(g=>({...g,lastMessage:g.lastMessage?this.transformMessage(g.lastMessage):null}))),M.set(h,p,3e4),p}catch(l){throw F.isAxiosError(l)?new Error(((i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to fetch conversations"):l}}async getUserMessages(e,r=1,i=50){var l,h;try{const n=Q.liveChatMessages(e,r),x=M.get(n);if(x)return x;const g=(await this.apiClient.get(`/api/admin/live-chat/${e}`,{params:{page:r,limit:i}})).data.data;return g.messages&&(g.messages=g.messages.map(I=>this.transformMessage(I))),M.set(n,g,3e4),g}catch(n){throw F.isAxiosError(n)?new Error(((h=(l=n.response)==null?void 0:l.data)==null?void 0:h.message)||"Failed to fetch messages"):n}}async sendMessage(e,r,i){var l,h;try{if(i){const n=new FormData;n.append("content",r),n.append("image",i);const x=localStorage.getItem("accessToken"),p=await F.post(`${_.BASE_URL}/api/admin/live-chat/${e}`,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${x}`}});return M.invalidatePattern(`live-chat-messages-${e}`),M.invalidatePattern("live-chat-conversations"),this.transformMessage(p.data.data.message)}else{const n=await this.apiClient.post(`/api/admin/live-chat/${e}`,{content:r});return M.invalidatePattern(`live-chat-messages-${e}`),M.invalidatePattern("live-chat-conversations"),this.transformMessage(n.data.data.message)}}catch(n){throw F.isAxiosError(n)?new Error(((h=(l=n.response)==null?void 0:l.data)==null?void 0:h.message)||"Failed to send message"):n}}async markAsRead(e){var r,i;try{await this.apiClient.patch(`/api/admin/live-chat/${e}/read`),M.invalidatePattern(`live-chat-messages-${e}`),M.invalidatePattern("live-chat-conversations")}catch(l){throw F.isAxiosError(l)?new Error(((i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to mark messages as read"):l}}async getStatistics(){var e,r;try{const i=Q.liveChatStatistics(),l=M.get(i);if(l)return l;const n=(await this.apiClient.get("/api/admin/live-chat/statistics")).data.data;return M.set(i,n,3e4),n}catch(i){throw F.isAxiosError(i)?new Error(((r=(e=i.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to fetch statistics"):i}}startPolling(e,r){this.stopPolling(e);const i=setInterval(async()=>{try{const{messages:l}=await this.getUserMessages(e);r(l)}catch(l){console.error("Error polling messages:",l)}},this.POLLING_INTERVAL);this.pollingIntervals.set(e,i)}stopPolling(e){const r=this.pollingIntervals.get(e);r&&(clearInterval(r),this.pollingIntervals.delete(e))}stopAllPolling(){this.pollingIntervals.forEach(e=>{clearInterval(e)}),this.pollingIntervals.clear()}getThumbnailUrl(e,r=200,i=200){return this.getCloudinaryThumbnail(e,r,i)}getOptimizedUrl(e){return this.getOptimizedCloudinaryUrl(e)}}const K=new ze,Ne=({conversations:c,selectedUserId:e,onUserSelect:r,searchTerm:i,onSearchChange:l,filters:h,onFilterChange:n,statistics:x,loading:p,hasMore:g,onLoadMore:I,totalConversations:N})=>{const T=se(),A=ee(T.breakpoints.down("md")),[R,C]=o.useState(!1),$=o.useRef(null),w=o.useRef(null),U=o.useRef(null);o.useEffect(()=>(w.current&&w.current.disconnect(),w.current=new IntersectionObserver(s=>{s[0].isIntersecting&&g&&!p&&I()},{root:$.current,threshold:.1}),U.current&&w.current.observe(U.current),()=>{w.current&&w.current.disconnect()}),[g,p,I]);const L=s=>{const f=new Date(s),m=new Date().getTime()-f.getTime(),b=Math.floor(m/6e4),B=Math.floor(m/36e5),Z=Math.floor(m/864e5);return b<1?"Just now":b<60?`${b}m ago`:B<24?`${B}h ago`:Z<7?`${Z}d ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric"})},O=s=>{const f=[];return s.ward&&f.push(`Ward ${s.ward.wardNumber||s.ward.number}`),s.zone&&f.push(`Zone ${s.zone.name||s.zone.number}`),f.join(", ")||"No location"},P=()=>{n({unreadOnly:!h.unreadOnly})},j=()=>{l(""),n({cityCorporationCode:void 0,zoneId:void 0,wardId:void 0,unreadOnly:!1})},E=()=>!!(i||h.cityCorporationCode||h.zoneId||h.wardId||h.unreadOnly);return t.jsxs(d,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[t.jsxs(d,{sx:{p:2,borderBottom:`1px solid ${T.palette.divider}`,bgcolor:"background.paper"},children:[t.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[t.jsx(S,{variant:"h6",sx:{fontWeight:600},children:"Live Chat"}),t.jsxs(d,{sx:{display:"flex",gap:1},children:[E()&&t.jsx(H,{size:"small",onClick:j,title:"Clear filters",children:t.jsx(oe,{fontSize:"small"})}),A&&t.jsx(H,{size:"small",onClick:()=>C(!R),color:R?"primary":"default",children:t.jsx(xe,{fontSize:"small"})})]})]}),t.jsx(ye,{fullWidth:!0,size:"small",placeholder:"Search by name or phone...",value:i,onChange:s=>l(s.target.value),InputProps:{startAdornment:t.jsx(ie,{position:"start",children:t.jsx(ve,{fontSize:"small"})}),endAdornment:i&&t.jsx(ie,{position:"end",children:t.jsx(H,{size:"small",onClick:()=>l(""),children:t.jsx(oe,{fontSize:"small"})})})}}),t.jsxs(d,{sx:{display:"flex",gap:1,mt:1.5,flexWrap:"wrap"},children:[t.jsx(J,{label:`All (${x.totalConversations})`,size:"small",onClick:()=>n({unreadOnly:!1}),color:h.unreadOnly?"default":"primary",variant:h.unreadOnly?"outlined":"filled"}),t.jsx(J,{label:t.jsx(le,{badgeContent:x.unreadMessages,color:"error",max:99,children:t.jsx("span",{style:{marginRight:x.unreadMessages>0?16:0},children:"Unread"})}),size:"small",onClick:P,color:h.unreadOnly?"primary":"default",variant:h.unreadOnly?"filled":"outlined"})]}),t.jsx(S,{variant:"caption",sx:{color:"text.secondary",mt:1,display:"block"},children:p?"Loading...":`${N} conversation${N!==1?"s":""}`})]}),t.jsx(d,{ref:$,sx:{flex:1,overflowY:"auto",overflowX:"hidden"},children:p&&c.length===0?t.jsx(ke,{count:5}):c.length===0?t.jsx(te,{type:E()?"no-results":"no-chats",onAction:E()?j:void 0,actionLabel:"Clear filters"}):t.jsxs(t.Fragment,{children:[c.map(s=>{const f=e===s.user.id,u=s.unreadCount>0;return t.jsx(d,{onClick:()=>r(s.user.id),sx:{p:2,borderBottom:`1px solid ${T.palette.divider}`,cursor:"pointer",bgcolor:f?"action.selected":"transparent",transition:"background-color 0.2s","&:hover":{bgcolor:f?"action.selected":"action.hover"}},children:t.jsxs(d,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[t.jsxs(d,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"1.25rem",flexShrink:0},children:[s.user.firstName.charAt(0).toUpperCase(),s.user.lastName.charAt(0).toUpperCase()]}),t.jsxs(d,{sx:{flex:1,minWidth:0},children:[t.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[t.jsxs(S,{variant:"subtitle2",sx:{fontWeight:u?600:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[s.user.firstName," ",s.user.lastName]}),s.lastMessage&&t.jsx(S,{variant:"caption",sx:{color:"text.secondary",flexShrink:0,ml:1},children:L(s.lastMessage.createdAt)})]}),s.user.phone&&t.jsx(S,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:.5},children:s.user.phone}),t.jsx(S,{variant:"caption",sx:{color:"text.secondary",display:"block",mb:.5},children:O(s.user)}),s.lastMessage&&t.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(S,{variant:"body2",sx:{color:u?"text.primary":"text.secondary",fontWeight:u?500:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:[s.lastMessage.senderType==="ADMIN"&&"You: ",s.lastMessage.type==="IMAGE"?"ðŸ“· Image":s.lastMessage.type==="VOICE"?"ðŸŽ¤ Voice message":s.lastMessage.content]}),u&&t.jsx(le,{badgeContent:s.unreadCount,color:"error",max:99,sx:{flexShrink:0}})]})]})]})},s.user.id)}),g&&t.jsx(d,{ref:U,sx:{p:2,display:"flex",justifyContent:"center",alignItems:"center"},children:t.jsx(Ce,{size:24})})]})})]})},Te=({userId:c,onClose:e,onMessagesRead:r})=>{const i=se(),[l,h]=o.useState([]),[n,x]=o.useState(null),[p,g]=o.useState(!1),[I,N]=o.useState(null),[T,A]=o.useState(!1),[R,C]=o.useState(!1),[$,w]=o.useState(1),U=o.useRef(null),L=o.useRef(null),O=o.useRef(!1),P=o.useCallback(()=>{var s;(s=U.current)==null||s.scrollIntoView({behavior:"smooth"})},[]),j=o.useCallback(async(s=!1,f=1)=>{if(c)try{g(!0),N(null);const u=await K.getUserMessages(c,f);if(f===1){if(h(u.messages),w(1),u.messages.length>0){const m=u.messages[0],b=m.senderId===c?m.sender:m.receiver;b&&x({id:b.id,firstName:b.firstName,lastName:b.lastName,avatar:b.avatar,phone:null,ward:null,zone:null})}}else h(m=>[...u.messages,...m]),w(f);C(u.hasMore),f===1&&!O.current&&(await K.markAsRead(c),O.current=!0,r&&r()),f===1&&setTimeout(P,100)}catch(u){const m=u instanceof Error?u.message:"Failed to load messages";N(m),console.error("Error fetching messages:",u),s&&V.error("Failed to load messages. Please try again.",{icon:"âŒ",duration:4e3})}finally{g(!1)}},[c,r,P]);o.useCallback(()=>{if(R&&!p&&c){const s=$+1;j(!1,s)}},[R,p,c,$,j]);const E=o.useCallback(async(s,f)=>{if(!(!c||!s.trim()))try{A(!0);const u=await K.sendMessage(c,s,f);h(m=>[...m,u]),setTimeout(P,100),V.success("Message sent",{icon:"âœ…",duration:2e3})}catch(u){const m=u instanceof Error?u.message:"Failed to send message";console.error("Error sending message:",u),V.error(m,{icon:"âŒ",duration:4e3})}finally{A(!1)}},[c,P]);return o.useEffect(()=>{c&&c!==L.current&&(L.current=c,O.current=!1,h([]),x(null),w(1),j(!0))},[c,j]),o.useEffect(()=>{if(!c)return;const s=setInterval(()=>{j(!1,1)},5e3);return()=>{clearInterval(s)}},[c,j]),c?I&&!p?t.jsx(ce,{error:I,onRetry:()=>j(!0),variant:"centered"}):t.jsxs(d,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[t.jsxs(d,{sx:{p:2,borderBottom:`1px solid ${i.palette.divider}`,bgcolor:"background.paper",display:"flex",alignItems:"center",gap:2},children:[e&&t.jsx(H,{onClick:e,size:"small",children:t.jsx(we,{})}),n&&t.jsxs(t.Fragment,{children:[t.jsxs(be,{sx:{width:40,height:40,bgcolor:"primary.main"},children:[n.firstName.charAt(0).toUpperCase(),n.lastName.charAt(0).toUpperCase()]}),t.jsxs(d,{sx:{flex:1,minWidth:0},children:[t.jsxs(S,{variant:"subtitle1",sx:{fontWeight:600},children:[n.firstName," ",n.lastName]}),t.jsxs(d,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:.5},children:[n.phone&&t.jsx(J,{icon:t.jsx(je,{}),label:n.phone,size:"small",variant:"outlined"}),(n.ward||n.zone)&&t.jsx(J,{icon:t.jsx(Me,{}),label:[n.ward?`Ward ${n.ward.wardNumber||n.ward.number}`:null,n.zone?`Zone ${n.zone.name||n.zone.number}`:null].filter(Boolean).join(", "),size:"small",variant:"outlined"})]})]})]})]}),t.jsx(d,{sx:{flex:1,overflowY:"auto",overflowX:"hidden",bgcolor:"#f5f5f5",p:2},children:p&&l.length===0?t.jsx(d,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(S,{children:"Loading messages..."})}):l.length===0?t.jsx(te,{type:"no-messages"}):t.jsxs(t.Fragment,{children:[l.map(s=>t.jsx(d,{sx:{display:"flex",justifyContent:s.senderType==="ADMIN"?"flex-end":"flex-start",mb:1.5},children:t.jsxs(d,{sx:{maxWidth:"70%",p:1.5,borderRadius:2,bgcolor:s.senderType==="ADMIN"?"primary.main":"white",color:s.senderType==="ADMIN"?"white":"text.primary",boxShadow:1},children:[s.type==="IMAGE"&&s.fileUrl&&t.jsx(d,{component:"img",src:s.fileUrl,alt:"Message attachment",sx:{maxWidth:"100%",borderRadius:1,mb:s.content?1:0}}),s.content&&t.jsx(S,{variant:"body2",children:s.content}),t.jsx(S,{variant:"caption",sx:{display:"block",mt:.5,opacity:.7},children:new Date(s.createdAt).toLocaleTimeString()})]})},s.id)),t.jsx("div",{ref:U})]})}),t.jsx(d,{sx:{borderTop:`1px solid ${i.palette.divider}`,bgcolor:"background.paper"},children:t.jsx(Ue,{onSend:async(s,f)=>{await E(s)},onSendWithFile:async(s,f)=>{await E(s,f)},sending:T,disabled:p})})]}):t.jsx(te,{type:"no-messages"})},_e=()=>{var re,ne;const{userId:c}=Se(),e=Ie(),r=se(),i=ee(r.breakpoints.down("md")),l=ee(r.breakpoints.between("md","lg")),[h,n]=o.useState([]),[x,p]=o.useState(null),[g,I]=o.useState(!0),[N,T]=o.useState(null),[A,R]=o.useState(""),[C,$]=o.useState({cityCorporationCode:void 0,zoneId:void 0,wardId:void 0,unreadOnly:!1,status:"ALL",page:1,limit:20}),[w,U]=o.useState(1),[L,O]=o.useState(!0),[P,j]=o.useState(0),[E,s]=o.useState({totalConversations:0,unreadMessages:0,todayMessages:0}),[f,u]=o.useState(!1),m=o.useRef([]),b=o.useRef(!0);o.useEffect(()=>{if(G.isSupported()&&G.getPermissionStatus()==="default"){const a=setTimeout(()=>{G.requestPermission().then(k=>{k&&console.log("Browser notification permission granted")})},2e3);return()=>clearTimeout(a)}},[]);const B=o.useCallback(a=>{var z;const k=a.user.firstName+" "+a.user.lastName,y=(z=a.lastMessage)!=null&&z.content?a.lastMessage.content.length>50?a.lastMessage.content.substring(0,50)+"...":a.lastMessage.content:"New message",v=()=>{e(`/live-chat/${a.user.id}`),p(a.user.id),i&&u(!0)};V(D=>t.jsxs(d,{onClick:()=>{V.dismiss(D.id),v()},sx:{cursor:"pointer","&:hover":{opacity:.9}},children:[t.jsxs(d,{sx:{fontWeight:600,mb:.5,color:"#3FA564"},children:["New message from ",k]}),t.jsx(d,{sx:{fontSize:"0.875rem",color:"#666"},children:y}),a.user.phone&&t.jsx(d,{sx:{fontSize:"0.75rem",color:"#999",mt:.5},children:a.user.phone})]}),{duration:6e3,icon:"ðŸ’¬",style:{background:"#fff",color:"#333",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",borderLeft:"4px solid #3FA564",padding:"16px",maxWidth:"400px"}}),G.hasPermission()&&!document.hasFocus()&&G.showNewMessageNotification(k,y,a.user.id,a.user.phone||"",v)},[e,i]),Z=o.useCallback(a=>{if(b.current){b.current=!1,m.current=a;return}const k=m.current;a.forEach(y=>{const v=k.find(z=>z.user.id===y.user.id);v?y.lastMessage&&v.lastMessage&&y.lastMessage.id!==v.lastMessage.id&&y.lastMessage.senderType==="CITIZEN"&&y.user.id!==x&&B(y):y.lastMessage&&y.lastMessage.senderType==="CITIZEN"&&B(y)}),m.current=a},[x,B]),W=o.useCallback(async(a=!1,k,y=!1)=>{try{y||I(!0),T(null);const v=k||1,z={...C,search:A||void 0,page:v,limit:20},D=await K.getConversations(z);v===1&&!y&&Z(D.conversations),n(y?fe=>[...fe,...D.conversations]:D.conversations),U(v),j(D.total),O(D.hasMore)}catch(v){const z=v instanceof Error?v.message:"Failed to load conversations";T(z),console.error("Error fetching conversation list:",v),a&&V.error("Failed to load conversations. Please check your connection.",{icon:"âŒ",duration:4e3})}finally{I(!1)}},[C,A,Z]),de=o.useCallback(()=>{if(L&&!g){const a=w+1;W(!1,a,!0)}},[L,g,w,W]),Y=o.useCallback(async()=>{try{const a=await K.getStatistics();s(a)}catch(a){console.error("Error fetching statistics:",a)}},[]);o.useEffect(()=>{W(!0),Y()},[]),o.useEffect(()=>{if(b.current)return;U(1),n([]);const a=setTimeout(()=>{W(!1)},500);return()=>clearTimeout(a)},[C,A]),o.useEffect(()=>{if(c){const a=parseInt(c,10);isNaN(a)||(p(a),i&&u(!0))}},[c,i]),o.useEffect(()=>{const a=setInterval(()=>{W(!1),Y()},1e4);return()=>{clearInterval(a)}},[]);const he=a=>{p(a),i&&u(!0)},ue=()=>{u(!1),p(null)},pe=a=>{R(a)},ae=a=>{$(k=>({...k,...a}))},X=i?{filter:"0%",list:"100%",conversation:"100%"}:l?{filter:"0%",list:"40%",conversation:"60%"}:{filter:"20%",list:"30%",conversation:"50%"};return t.jsx(Ee,{title:"Live Chat",children:t.jsxs(d,{sx:{display:"flex",height:"calc(100vh - 140px)",gap:2,overflow:"hidden"},children:[!i&&!l&&t.jsx(d,{sx:{width:X.filter,display:"flex",flexDirection:"column",overflow:"hidden"},children:t.jsx(Ae,{filters:{cityCorporationCode:C.cityCorporationCode,zone:(re=C.zoneId)==null?void 0:re.toString(),ward:(ne=C.wardId)==null?void 0:ne.toString(),unreadOnly:C.unreadOnly,status:C.status},onFilterChange:a=>{ae({cityCorporationCode:a.cityCorporationCode,zoneId:a.zone?parseInt(a.zone):void 0,wardId:a.ward?parseInt(a.ward):void 0,unreadOnly:a.unreadOnly,status:a.status})},statistics:{totalChats:E.totalConversations,unreadCount:E.unreadMessages,byDistrict:[],byUpazila:[],byWard:[],byZone:[],byStatus:[]},showStatusFilter:!0,statusOptions:[{label:"Active",value:"ACTIVE"},{label:"Inactive",value:"INACTIVE"},{label:"Banned",value:"BANNED"}]})}),(!i||!f)&&t.jsx(d,{sx:{width:X.list,display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:2,boxShadow:1,overflow:"hidden"},children:N&&!g?t.jsx(ce,{error:N,onRetry:()=>W(!0),variant:"centered"}):t.jsx(Ne,{conversations:h,selectedUserId:x,onUserSelect:he,searchTerm:A,onSearchChange:pe,filters:C,onFilterChange:ae,statistics:E,loading:g,hasMore:L,onLoadMore:de,totalConversations:P})}),(!i||f)&&t.jsx(d,{sx:{width:X.conversation,display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:2,boxShadow:1,overflow:"hidden"},children:t.jsx(Te,{userId:x,onClose:i?ue:void 0,onMessagesRead:()=>{W(!1),Y()}})})]})})};export{Te as LiveChatConversationPanel,Ne as UserListPanel,_e as default};
