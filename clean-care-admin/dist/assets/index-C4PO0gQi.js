var kt=Object.defineProperty;var Bt=(a,s,d)=>s in a?kt(a,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[s]=d;var xt=(a,s,d)=>Bt(a,typeof s!="symbol"?s+"":s,d);import{j as e,e as W,cF as N,T as l,f as A,bh as j,B as o,F,bg as q,D as O,g as m,b as k,Q as Dt,C as U,b9 as bt,cG as Nt,p as gt,q as me,i as fe,bq as Ot,bo as zt,a6 as qt,s as jt,t as vt,v as Kt,w as yt,x as Ct,A as St,aT as Vt,cH as Ft,cI as Ut,cJ as $t,aj as Ht,cK as Gt,cL as Jt,G as u,aO as Qt,aP as pt,cM as Xt,bn as Yt}from"./mui-vendor-Brc-2iiC.js";import{r}from"./react-vendor-D7yrL1sD.js";import{A as mt,n as C,M as Zt}from"./index-DBuvollO.js";import{b as z}from"./botMessageService-XOYex6Xc.js";import{a as es}from"./query-vendor-CZVuOxbJ.js";import{u as ts,C as ss,a as as,b as ft,D as rs,c as is,S as ns,v as os,d as ls,s as ds,K as cs,P as us}from"./sortable.esm-CBBmJpQ9.js";import{u as hs,C as G}from"./index.esm-BZx2A40c.js";import"./chart-vendor-CrjdDA16.js";class xs{constructor(){xt(this,"apiClient");this.apiClient=es.create({baseURL:mt.BASE_URL,timeout:mt.TIMEOUT,withCredentials:!0,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.apiClient.interceptors.request.use(s=>{try{const d=localStorage.getItem("accessToken");d&&(s.headers.Authorization=`Bearer ${d}`)}catch(d){console.error("Error getting token:",d)}return s},s=>Promise.reject(s)),this.apiClient.interceptors.response.use(s=>s,s=>{var d;return((d=s.response)==null?void 0:d.status)===401&&window.location.pathname!=="/login"&&window.location.assign("/login"),Promise.reject(s)})}async getAllConfigs(){return(await this.apiClient.get("/api/admin/config")).data}async getConfig(s){return(await this.apiClient.get(`/api/admin/config/${s}`)).data}async updateConfig(s,d,b){return(await this.apiClient.put(`/api/admin/config/${s}`,{value:d,description:b})).data}}const i=new xs,gs=({rules:a,onUpdate:s,disabled:d=!1})=>{const[b,h]=r.useState(a),[y,I]=r.useState(!1),[R,f]=r.useState(!1);r.useEffect(()=>{h(a),I(!1)},[a]);const T=(S,w)=>{h(E=>{const n=S==="reactivationThreshold"?typeof w=="number"&&!isNaN(w)?w:E.reactivationThreshold:w;return{...E,[S]:n}}),I(!0)},c=async()=>{f(!0);try{await s(b),I(!1)}finally{f(!1)}},p=()=>{h(a),I(!1)},M=d||R;return e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(l,{variant:"h6",fontWeight:600,children:"Bot Trigger Rules"}),subheader:e.jsx(l,{variant:"body2",color:"text.secondary",children:"Configure when and how bot messages are triggered"}),sx:{pb:1}}),e.jsx(A,{children:e.jsxs(j,{spacing:3,children:[e.jsx(o,{sx:{p:2,bgcolor:"background.default",borderRadius:2,border:"1px solid",borderColor:"divider"},children:e.jsx(F,{control:e.jsx(q,{checked:b.isEnabled,onChange:S=>T("isEnabled",S.target.checked),disabled:M,color:"primary"}),label:e.jsxs(o,{children:[e.jsx(l,{variant:"body1",fontWeight:600,children:"Enable Bot Messages"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Turn on/off automated bot messages for this chat type"})]})})}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"body2",fontWeight:600,sx:{mb:1.5},children:"Reactivation Threshold"}),e.jsx(m,{type:"number",value:b.reactivationThreshold||5,onChange:S=>{const w=parseInt(S.target.value,10);T("reactivationThreshold",isNaN(w)?5:w)},disabled:M||!b.isEnabled,fullWidth:!0,size:"small",helperText:"Number of user messages after admin reply before bot reactivates",slotProps:{htmlInput:{min:1,max:20}},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsx(o,{sx:{p:2,bgcolor:"background.default",borderRadius:2,border:"1px solid",borderColor:"divider"},children:e.jsx(F,{control:e.jsx(q,{checked:b.resetStepsOnReactivate,onChange:S=>T("resetStepsOnReactivate",S.target.checked),disabled:M||!b.isEnabled,color:"primary"}),label:e.jsxs(o,{children:[e.jsx(l,{variant:"body1",fontWeight:600,children:"Reset Steps on Reactivation"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Start from step 1 when bot reactivates (otherwise continues from last step)"})]})})}),y&&e.jsxs(j,{direction:"row",spacing:2,justifyContent:"flex-end",sx:{pt:2},children:[e.jsx(k,{variant:"outlined",startIcon:e.jsx(Dt,{}),onClick:p,disabled:M,sx:{textTransform:"none",fontWeight:600,borderRadius:2},children:"Cancel"}),e.jsx(k,{variant:"contained",startIcon:R?e.jsx(U,{size:20,color:"inherit"}):e.jsx(bt,{}),onClick:c,disabled:M,sx:{textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:R?"Saving...":"Save Changes"})]})]})})]})},ps=({message:a,onEdit:s,onDelete:d,onToggleActive:b,disabled:h=!1})=>{const[y,I]=r.useState(!1),{attributes:R,listeners:f,setNodeRef:T,transform:c,transition:p,isDragging:M}=ts({id:a.id}),S={transform:ss.Transform.toString(c),transition:p,opacity:M?.5:1},w=async E=>{I(!0);try{await b(a.id,E)}finally{I(!1)}};return e.jsx(W,{ref:T,style:S,sx:{border:"2px solid",borderColor:a.isActive?"primary.light":"divider",borderRadius:2,boxShadow:1,bgcolor:a.isActive?"background.paper":"action.hover",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{boxShadow:4,borderColor:"primary.main",transform:"translateY(-2px)"}},children:e.jsx(A,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(o,{...R,...f,sx:{display:"flex",alignItems:"center",color:"text.secondary",cursor:h?"default":"grab",p:1,borderRadius:1,transition:"all 0.2s","&:hover":{bgcolor:"action.hover",color:"primary.main"},"&:active":{cursor:h?"default":"grabbing",bgcolor:"action.selected"}},children:e.jsx(Nt,{})}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1.5,flexWrap:"wrap"},children:[e.jsx(gt,{label:`Step ${a.stepNumber}`,size:"small",color:"primary",variant:"filled",sx:{fontWeight:600}}),e.jsx(gt,{label:a.isActive?"Active":"Inactive",size:"small",color:a.isActive?"success":"default",sx:{fontWeight:600}}),e.jsx(l,{variant:"caption",color:"text.secondary",sx:{fontFamily:"monospace",bgcolor:"action.hover",px:1,py:.5,borderRadius:1},children:a.messageKey})]}),e.jsxs(o,{sx:{mb:1.5,p:1.5,bgcolor:"background.default",borderRadius:1.5,border:"1px solid",borderColor:"divider"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",sx:{fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:"English"}),e.jsx(l,{variant:"body2",sx:{mt:.5,lineHeight:1.6},children:a.content})]}),e.jsxs(o,{sx:{p:1.5,bgcolor:"background.default",borderRadius:1.5,border:"1px solid",borderColor:"divider"},children:[e.jsx(l,{variant:"caption",color:"text.secondary",sx:{fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:"বাংলা"}),e.jsx(l,{variant:"body2",sx:{mt:.5,lineHeight:1.6},children:a.contentBn})]})]}),e.jsxs(j,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(me,{title:a.isActive?"Deactivate":"Activate",arrow:!0,children:e.jsxs(o,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(q,{checked:a.isActive,onChange:E=>w(E.target.checked),disabled:h||y,size:"small",color:"success"}),y&&e.jsx(U,{size:20,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-10px",marginLeft:"-10px"}})]})}),e.jsx(me,{title:"Edit",arrow:!0,children:e.jsx(fe,{size:"small",onClick:()=>s(a),disabled:h||y,color:"primary",sx:{"&:hover":{bgcolor:"primary.light",color:"primary.dark"}},children:e.jsx(Ot,{fontSize:"small"})})}),e.jsx(me,{title:"Delete",arrow:!0,children:e.jsx(fe,{size:"small",onClick:()=>d(a.id),disabled:h||y,color:"error",sx:{"&:hover":{bgcolor:"error.light",color:"error.dark"}},children:e.jsx(zt,{fontSize:"small"})})})]})]})})})},ms=({messages:a,onEdit:s,onDelete:d,onToggleActive:b,onReorder:h,disabled:y=!1})=>{const I=as(ft(us),ft(cs,{coordinateGetter:ds})),R=f=>{const{active:T,over:c}=f;if(!c||T.id===c.id)return;const p=a.findIndex(w=>w.id===T.id),M=a.findIndex(w=>w.id===c.id),S=ls(a,p,M).map((w,E)=>({...w,displayOrder:E}));h(S)};return a.length===0?e.jsxs(o,{sx:{py:10,px:3,textAlign:"center",color:"text.secondary",bgcolor:"background.default",borderRadius:2,border:"2px dashed",borderColor:"divider"},children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:1},children:"No bot messages configured yet"}),e.jsx(l,{variant:"body2",children:'Click "Add Message" to create your first bot message.'})]}):e.jsx(rs,{sensors:I,collisionDetection:is,onDragEnd:R,children:e.jsx(ns,{items:a.map(f=>f.id),strategy:os,disabled:y,children:e.jsx(qt,{children:a.map(f=>e.jsx(o,{sx:{mb:2},children:e.jsx(ps,{message:f,onEdit:s,onDelete:d,onToggleActive:b,disabled:y})},f.id))})})})},fs=({open:a,message:s,onClose:d,onSave:b,saving:h=!1})=>{const{control:y,handleSubmit:I,reset:R,formState:{errors:f}}=hs({defaultValues:{messageKey:"",content:"",contentBn:"",stepNumber:1}});r.useEffect(()=>{R(s?{messageKey:s.messageKey,content:s.content,contentBn:s.contentBn,stepNumber:s.stepNumber}:{messageKey:"",content:"",contentBn:"",stepNumber:1})},[s,R]);const T=async c=>{await b(c)};return e.jsxs(jt,{open:a,onClose:d,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:24}},children:[e.jsx(vt,{sx:{pb:2},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(l,{variant:"h5",fontWeight:700,children:s?"Edit Bot Message":"Add Bot Message"}),e.jsx(fe,{edge:"end",onClick:d,disabled:h,size:"small",sx:{"&:hover":{bgcolor:"action.hover",transform:"rotate(90deg)"},transition:"all 0.2s"},children:e.jsx(Kt,{})})]})}),e.jsxs("form",{onSubmit:I(T),children:[e.jsx(yt,{dividers:!0,children:e.jsxs(j,{spacing:3,children:[e.jsx(G,{name:"messageKey",control:y,rules:{required:"Message key is required",pattern:{value:/^[a-z0-9_-]+$/,message:"Only lowercase letters, numbers, hyphens, and underscores allowed"}},render:({field:c})=>{var p;return e.jsx(m,{...c,label:"Message Key",placeholder:"e.g., welcome_message",error:!!f.messageKey,helperText:((p=f.messageKey)==null?void 0:p.message)||"Unique identifier for this message (lowercase, no spaces)",disabled:h||!!s,fullWidth:!0,required:!0})}}),e.jsx(G,{name:"stepNumber",control:y,rules:{required:"Step number is required",min:{value:1,message:"Step number must be at least 1"},max:{value:100,message:"Step number cannot exceed 100"}},render:({field:c})=>{var p;return e.jsx(m,{...c,type:"number",label:"Step Number",error:!!f.stepNumber,helperText:((p=f.stepNumber)==null?void 0:p.message)||"Order in which this message appears (1-100) - Bot will loop through all steps dynamically",disabled:h,fullWidth:!0,required:!0,inputProps:{min:1,max:100}})}}),e.jsx(G,{name:"content",control:y,rules:{required:"English content is required",validate:{notEmpty:c=>c.trim().length>0||"Content cannot be empty or whitespace only",minLength:c=>c.trim().length>=10||"Content must be at least 10 characters"},maxLength:{value:500,message:"Content cannot exceed 500 characters"}},render:({field:c})=>{var p;return e.jsx(m,{...c,label:"English Content",placeholder:"Enter message in English",error:!!f.content,helperText:((p=f.content)==null?void 0:p.message)||`${c.value.length}/500 characters`,disabled:h,fullWidth:!0,required:!0,multiline:!0,rows:4})}}),e.jsx(G,{name:"contentBn",control:y,rules:{required:"Bangla content is required",validate:{notEmpty:c=>c.trim().length>0||"Content cannot be empty or whitespace only",minLength:c=>c.trim().length>=10||"Content must be at least 10 characters"},maxLength:{value:500,message:"Content cannot exceed 500 characters"}},render:({field:c})=>{var p;return e.jsx(m,{...c,label:"Bangla Content (বাংলা)",placeholder:"বাংলায় বার্তা লিখুন",error:!!f.contentBn,helperText:((p=f.contentBn)==null?void 0:p.message)||`${c.value.length}/500 characters`,disabled:h,fullWidth:!0,required:!0,multiline:!0,rows:4})}})]})}),e.jsxs(Ct,{sx:{px:3,py:2.5,gap:1},children:[e.jsx(k,{variant:"outlined",onClick:d,disabled:h,sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Cancel"}),e.jsx(k,{type:"submit",variant:"contained",startIcon:h?e.jsx(U,{size:20}):e.jsx(bt,{}),disabled:h,sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3,boxShadow:2,"&:hover":{boxShadow:4}},children:h?"Saving...":s?"Update":"Create"})]})]})]})},bs=({chatType:a})=>{const[s,d]=r.useState(null),[b,h]=r.useState(!0),[y,I]=r.useState(null),[R,f]=r.useState(""),[T,c]=r.useState(""),p=async()=>{try{h(!0),I(null);const n=await z.getBotAnalytics({chatType:a,startDate:R||void 0,endDate:T||void 0});d(n)}catch(n){const B=n instanceof Error?n.message:"Failed to load analytics";I(B)}finally{h(!1)}};r.useEffect(()=>{p()},[a]);const M=()=>{p()},S=()=>{f(""),c(""),setTimeout(()=>p(),0)},w=n=>n<60?`${Math.round(n)}s`:n<3600?`${Math.round(n/60)}m`:`${Math.round(n/3600)}h`,E=()=>{if(!s)return;const n=[];n.push("Bot Analytics Report"),n.push(`Chat Type: ${a}`),n.push(`Generated: ${new Date().toLocaleString()}`),(R||T)&&n.push(`Date Range: ${R||"All"} to ${T||"All"}`),n.push(""),n.push("Summary Metrics"),n.push("Metric,Value"),n.push(`Total Triggers,${s.totalTriggers}`),n.push(`Admin Reply Rate,${Math.round(s.adminReplyRate*100)}%`),n.push(`Average Response Time,${w(s.avgResponseTime)}`),n.push(""),n.push("Step Breakdown"),n.push("Step,Triggers,Replies,Reply Rate"),s.stepBreakdown.forEach(D=>{const H=D.triggers>0?`${Math.round(D.replies/D.triggers*100)}%`:"N/A";n.push(`Step ${D.step},${D.triggers},${D.replies},${H}`)});const B=n.join(`
`),K=new Blob([B],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),$=URL.createObjectURL(K);L.setAttribute("href",$),L.setAttribute("download",`bot-analytics-${a}-${new Date().toISOString().split("T")[0]}.csv`),L.style.visibility="hidden",document.body.appendChild(L),L.click(),document.body.removeChild(L)};return b?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(U,{})}):y?e.jsx(St,{severity:"error",onClose:()=>I(null),children:y}):s?e.jsxs(o,{children:[e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:3},alignItems:{xs:"stretch",sm:"center"},children:[e.jsx(m,{type:"date",label:"Start Date",value:R,onChange:n=>f(n.target.value),size:"small",slotProps:{inputLabel:{shrink:!0}},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{type:"date",label:"End Date",value:T,onChange:n=>c(n.target.value),size:"small",slotProps:{inputLabel:{shrink:!0}},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(k,{variant:"contained",onClick:M,size:"small",sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Filter"}),e.jsx(k,{variant:"outlined",onClick:S,size:"small",sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Reset"}),e.jsx(k,{variant:"outlined",onClick:E,size:"small",startIcon:e.jsx(Vt,{}),sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Export CSV"})]}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:3,mb:3},children:[e.jsx(W,{sx:{borderRadius:2,boxShadow:2},children:e.jsx(A,{children:e.jsxs(j,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(o,{sx:{bgcolor:"primary.light",color:"primary.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ft,{fontSize:"large"})}),e.jsxs(o,{children:[e.jsx(l,{variant:"h4",fontWeight:700,children:s.totalTriggers}),e.jsx(l,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Total Triggers"})]})]})})}),e.jsx(W,{sx:{borderRadius:2,boxShadow:2},children:e.jsx(A,{children:e.jsxs(j,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(o,{sx:{bgcolor:"success.light",color:"success.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ut,{fontSize:"large"})}),e.jsxs(o,{children:[e.jsxs(l,{variant:"h4",fontWeight:700,children:[Math.round(s.adminReplyRate*100),"%"]}),e.jsx(l,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Reply Rate"})]})]})})}),e.jsx(W,{sx:{borderRadius:2,boxShadow:2},children:e.jsx(A,{children:e.jsxs(j,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(o,{sx:{bgcolor:"warning.light",color:"warning.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($t,{fontSize:"large"})}),e.jsxs(o,{children:[e.jsx(l,{variant:"h4",fontWeight:700,children:w(s.avgResponseTime)}),e.jsx(l,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Avg Response"})]})]})})}),e.jsx(W,{sx:{borderRadius:2,boxShadow:2},children:e.jsx(A,{children:e.jsxs(j,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(o,{sx:{bgcolor:"info.light",color:"info.main",p:1.5,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ht,{fontSize:"large"})}),e.jsxs(o,{children:[e.jsx(l,{variant:"h4",fontWeight:700,children:s.adminReplyRate>.7?"High":s.adminReplyRate>.4?"Medium":"Low"}),e.jsx(l,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Effectiveness"})]})]})})})]}),e.jsx(W,{sx:{borderRadius:2,boxShadow:2},children:e.jsxs(A,{children:[e.jsx(l,{variant:"h6",fontWeight:700,sx:{mb:3},children:"Step Breakdown"}),e.jsx(o,{sx:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #e0e0e0",backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{padding:"16px 12px",textAlign:"left",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Step"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Triggers"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Replies"}),e.jsx("th",{style:{padding:"16px 12px",textAlign:"right",fontWeight:700,fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Reply Rate"})]})}),e.jsx("tbody",{children:s.stepBreakdown.map((n,B)=>e.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0",backgroundColor:B%2===0?"#ffffff":"#fafafa"},children:[e.jsxs("td",{style:{padding:"14px 12px",fontWeight:600},children:["Step ",n.step]}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:500},children:n.triggers}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:500},children:n.replies}),e.jsx("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:600,color:n.triggers>0?n.replies/n.triggers>.7?"#2e7d32":n.replies/n.triggers>.4?"#ed6c02":"#d32f2f":"#666"},children:n.triggers>0?`${Math.round(n.replies/n.triggers*100)}%`:"N/A"})]},n.step))})]})})]})})]}):e.jsx(l,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No analytics data available"})},js=({open:a,onClose:s,onConfirm:d,loading:b=!1,title:h="Delete Bot Message",message:y="Are you sure you want to delete this bot message? This action cannot be undone."})=>e.jsxs(jt,{open:a,onClose:b?void 0:s,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",PaperProps:{sx:{borderRadius:3,boxShadow:24}},children:[e.jsx(vt,{id:"delete-dialog-title",sx:{pb:2},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(o,{sx:{bgcolor:"error.light",color:"error.main",p:1,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{})}),e.jsx(l,{variant:"h6",fontWeight:700,children:h})]})}),e.jsx(yt,{sx:{py:2},children:e.jsx(Jt,{id:"delete-dialog-description",sx:{fontSize:"1rem"},children:y})}),e.jsxs(Ct,{sx:{px:3,pb:2.5,gap:1},children:[e.jsx(k,{onClick:s,disabled:b,variant:"outlined",sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3},children:"Cancel"}),e.jsx(k,{onClick:d,disabled:b,variant:"contained",color:"error",startIcon:b?e.jsx(U,{size:16}):null,sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3,boxShadow:2,"&:hover":{boxShadow:4}},children:b?"Deleting...":"Delete"})]})]}),vs=()=>e.jsx(W,{sx:{border:"1px solid",borderColor:"divider",boxShadow:"none",mb:2},children:e.jsx(A,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(u,{variant:"rectangular",width:24,height:24}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsxs(j,{direction:"row",spacing:1,sx:{mb:1},children:[e.jsx(u,{variant:"rounded",width:60,height:24}),e.jsx(u,{variant:"rounded",width:60,height:24}),e.jsx(u,{variant:"text",width:120,height:24})]}),e.jsxs(o,{sx:{mb:1},children:[e.jsx(u,{variant:"text",width:80,height:16}),e.jsx(u,{variant:"text",width:"100%",height:20}),e.jsx(u,{variant:"text",width:"80%",height:20})]}),e.jsxs(o,{children:[e.jsx(u,{variant:"text",width:80,height:16}),e.jsx(u,{variant:"text",width:"100%",height:20}),e.jsx(u,{variant:"text",width:"70%",height:20})]})]}),e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(u,{variant:"rectangular",width:40,height:24}),e.jsx(u,{variant:"circular",width:32,height:32}),e.jsx(u,{variant:"circular",width:32,height:32})]})]})})}),ys=({count:a=3})=>e.jsx(o,{children:Array.from({length:a}).map((s,d)=>e.jsx(vs,{},d))}),As=()=>{const[a,s]=r.useState("LIVE_CHAT"),[d,b]=r.useState([]),[h,y]=r.useState(null),[I,R]=r.useState(!0),[f,T]=r.useState(null),[c,p]=r.useState(!1),[M,S]=r.useState(null),[w,E]=r.useState(!1),[n,B]=r.useState(null),[K,L]=r.useState(!1),[$,D]=r.useState("20"),[H,be]=r.useState("10"),[J,je]=r.useState("120"),[ve,ye]=r.useState(!0),[Ce,Se]=r.useState(!0),[we,Re]=r.useState(!0),[Te,Me]=r.useState(!1),[_e,Ie]=r.useState(""),[We,Ae]=r.useState(""),[Ee,Le]=r.useState(""),[Pe,ke]=r.useState(""),[Be,De]=r.useState(""),[Ne,Oe]=r.useState("15"),[ze,qe]=r.useState("6"),[Ke,Ve]=r.useState("24"),[Fe,Ue]=r.useState("smtp.gmail.com"),[$e,He]=r.useState("587"),[Ge,Je]=r.useState(!1),[Qe,Xe]=r.useState(""),[Ye,Ze]=r.useState(""),[et,tt]=r.useState("Clean Care Bangladesh"),[st,at]=r.useState(""),[rt,it]=r.useState("3"),[nt,ot]=r.useState("15"),[lt,dt]=r.useState("5"),[wt,ct]=r.useState(!0),[g,ut]=r.useState(!1),V=r.useCallback(async()=>{try{R(!0),T(null);const t=await z.getBotMessages(a);b(t.messages),y(t.rules)}catch(t){const x=t instanceof Error?t.message:"Failed to load bot messages";T(x),C.error(x)}finally{R(!1)}},[a]),ht=r.useCallback(async()=>{try{ct(!0);const t=await i.getConfig("daily_complaint_limit");t.success&&t.data&&D(t.data.value);const x=await i.getConfig("ward_image_limit");x.success&&x.data&&be(x.data.value);const _=await i.getConfig("LIVE_CHAT_MESSAGE_LIMIT");_.success&&_.data&&je(_.data.value);const v=await i.getConfig("verification_sms_enabled");v.success&&v.data&&ye(v.data.value!=="false");const P=await i.getConfig("verification_email_enabled");P.success&&P.data&&Se(P.data.value!=="false");const Q=await i.getConfig("verification_whatsapp_enabled");Q.success&&Q.data&&Re(Q.data.value!=="false");const X=await i.getConfig("verification_truecaller_enabled");X.success&&X.data&&Me(X.data.value==="true");const Y=await i.getConfig("verification_code_expiry_minutes");Y.success&&Y.data&&Oe(Y.data.value);const Z=await i.getConfig("verification_code_length");Z.success&&Z.data&&qe(Z.data.value);const ee=await i.getConfig("pending_account_cleanup_hours");ee.success&&ee.data&&Ve(ee.data.value);const te=await i.getConfig("verification_sms_api_url");te.success&&te.data&&Ie(te.data.value);const se=await i.getConfig("verification_sms_api_key");se.success&&se.data&&Ae(se.data.value);const ae=await i.getConfig("verification_whatsapp_api_url");ae.success&&ae.data&&Le(ae.data.value);const re=await i.getConfig("verification_truecaller_app_key");re.success&&re.data&&ke(re.data.value);const ie=await i.getConfig("verification_truecaller_partner_key");ie.success&&ie.data&&De(ie.data.value);const ne=await i.getConfig("smtp_host");ne.success&&ne.data&&Ue(ne.data.value);const oe=await i.getConfig("smtp_port");oe.success&&oe.data&&He(oe.data.value);const le=await i.getConfig("smtp_secure");le.success&&le.data&&Je(le.data.value==="true");const de=await i.getConfig("smtp_user");de.success&&de.data&&Xe(de.data.value);const ce=await i.getConfig("smtp_pass");ce.success&&ce.data&&Ze(ce.data.value);const ue=await i.getConfig("smtp_from_name");ue.success&&ue.data&&tt(ue.data.value);const he=await i.getConfig("smtp_from_email");he.success&&he.data&&at(he.data.value);const xe=await i.getConfig("verification_request_limit");xe.success&&xe.data&&it(xe.data.value);const ge=await i.getConfig("verification_request_window_minutes");ge.success&&ge.data&&ot(ge.data.value);const pe=await i.getConfig("verification_attempt_limit");pe.success&&pe.data&&dt(pe.data.value)}catch(t){console.error("Error loading complaint limits:",t)}finally{ct(!1)}},[]);r.useEffect(()=>{V(),ht()},[V,ht]);const Rt=(t,x)=>{s(x)},Tt=()=>{S(null),p(!0)},Mt=t=>{S(t),p(!0)},_t=t=>{B(t),E(!0)},It=async()=>{if(n)try{L(!0),await z.deleteBotMessage(n),C.success("Bot message deleted successfully"),await V()}catch(t){const x=t instanceof Error?t.message:"Failed to delete bot message";C.error(x)}finally{L(!1),E(!1),B(null)}},Wt=async(t,x)=>{try{await z.toggleBotMessageActive(t,x),C.success(`Bot message ${x?"activated":"deactivated"} successfully`),await V()}catch(_){const v=_ instanceof Error?_.message:"Failed to update bot message";C.error(v)}},At=async()=>{try{ut(!0);const t=parseInt($,10),x=parseInt(H,10),_=parseInt(J,10);if(isNaN(t)||t<1){C.error("Daily complaint limit must be a positive number");return}if(isNaN(x)||x<1){C.error("Ward image limit must be a positive number");return}if(isNaN(_)||_<1){C.error("Live chat message limit must be a positive number");return}await i.updateConfig("daily_complaint_limit",$,"Maximum complaints a user can submit per day"),await i.updateConfig("ward_image_limit",H,"Maximum images allowed per ward"),await i.updateConfig("LIVE_CHAT_MESSAGE_LIMIT",J,"Maximum number of messages to load in live chat"),await i.updateConfig("verification_sms_enabled",String(ve),"Enable/Disable SMS verification"),await i.updateConfig("verification_email_enabled",String(Ce),"Enable/Disable Email verification"),await i.updateConfig("verification_whatsapp_enabled",String(we),"Enable/Disable WhatsApp verification"),await i.updateConfig("verification_truecaller_enabled",String(Te),"Enable/Disable Truecaller verification"),await i.updateConfig("verification_code_expiry_minutes",Ne,"OTP Expiry in Minutes"),await i.updateConfig("verification_code_length",ze,"OTP Length (4-10)"),await i.updateConfig("pending_account_cleanup_hours",Ke,"Hours before unverified accounts are deleted"),await i.updateConfig("verification_sms_api_url",_e,"SMS Gateway API URL"),await i.updateConfig("verification_sms_api_key",We,"SMS Gateway API Key"),await i.updateConfig("verification_whatsapp_api_url",Ee,"WhatsApp Gateway API URL"),await i.updateConfig("verification_truecaller_app_key",Pe,"Truecaller App Key"),await i.updateConfig("verification_truecaller_partner_key",Be,"Truecaller Partner Key"),await i.updateConfig("smtp_host",Fe,"SMTP Host"),await i.updateConfig("smtp_port",$e,"SMTP Port"),await i.updateConfig("smtp_secure",String(Ge),"SMTP Secure"),await i.updateConfig("smtp_user",Qe,"SMTP User"),await i.updateConfig("smtp_pass",Ye,"SMTP Password"),await i.updateConfig("smtp_from_name",et,"SMTP From Name"),await i.updateConfig("smtp_from_email",st,"SMTP From Email"),await i.updateConfig("verification_request_limit",rt,"Verification Request Limit"),await i.updateConfig("verification_request_window_minutes",nt,"Verification Window (Minutes)"),await i.updateConfig("verification_attempt_limit",lt,"Verification Attempt Limit"),C.success("System settings updated successfully")}catch(t){console.error("Error saving complaint limits:",t),C.error("Failed to save complaint limits")}finally{ut(!1)}},Et=async t=>{var x,_;try{L(!0);const v={...t,content:(x=t.content)==null?void 0:x.trim(),contentBn:(_=t.contentBn)==null?void 0:_.trim(),stepNumber:Number(t.stepNumber)};if(!v.content||v.content.length===0){C.error("English content cannot be empty");return}if(!v.contentBn||v.contentBn.length===0){C.error("Bangla content cannot be empty");return}if(isNaN(v.stepNumber)||v.stepNumber<1){C.error("Step number must be a valid positive number");return}if(M){const P={};if(v.content!==M.content&&(P.content=v.content),v.contentBn!==M.contentBn&&(P.contentBn=v.contentBn),v.stepNumber!==M.stepNumber&&(P.stepNumber=v.stepNumber),Object.keys(P).length===0){C.info("No changes to save"),p(!1),S(null);return}await z.updateBotMessage(M.id,P),C.success("Bot message updated successfully")}else await z.createBotMessage({...v,chatType:a,displayOrder:d.length}),C.success("Bot message created successfully");p(!1),S(null),await V()}catch(v){const P=v instanceof Error?v.message:"Failed to save bot message";C.error(P)}finally{L(!1)}},Lt=async t=>{try{const x=t.map(_=>_.id);await z.reorderBotMessages(a,x),b(t),C.success("Bot messages reordered successfully")}catch(x){const _=x instanceof Error?x.message:"Failed to reorder bot messages";C.error(_),await V()}},Pt=async t=>{try{L(!0);const x=typeof t.reactivationThreshold=="number"&&!isNaN(t.reactivationThreshold)?t.reactivationThreshold:5;await z.updateTriggerRules(a,{isEnabled:t.isEnabled??!0,reactivationThreshold:x,resetStepsOnReactivate:t.resetStepsOnReactivate??!1}),C.success("Trigger rules updated successfully"),await V()}catch(x){const _=x instanceof Error?x.message:"Failed to update trigger rules";C.error(_)}finally{L(!1)}};return e.jsx(Zt,{children:e.jsxs(o,{sx:{p:{xs:2,sm:3},maxWidth:1400,mx:"auto"},children:[e.jsxs(o,{sx:{mb:4},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:700,mb:1,color:"primary.main",fontSize:{xs:"1.75rem",sm:"2.125rem"}},children:"Bot Message System Control"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{maxWidth:800},children:"Manage automated bot messages, trigger rules, and complaint limits"})]}),e.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:4,bgcolor:"background.paper",borderRadius:"8px 8px 0 0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:e.jsxs(Qt,{value:a,onChange:Rt,sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem",minHeight:56}},children:[e.jsx(pt,{label:"Live Chat",value:"LIVE_CHAT"}),e.jsx(pt,{label:"Complaint Chat",value:"COMPLAINT_CHAT"})]})}),f&&e.jsx(St,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{width:"100%"}},onClose:()=>T(null),children:f}),I?e.jsxs(j,{spacing:3,children:[e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(u,{width:250}),subheader:e.jsx(u,{width:350})}),e.jsx(A,{children:e.jsxs(j,{spacing:3,children:[e.jsx(u,{variant:"rectangular",height:56,sx:{borderRadius:1}}),e.jsx(u,{variant:"rectangular",height:56,sx:{borderRadius:1}}),e.jsx(u,{variant:"rectangular",height:40,width:150,sx:{borderRadius:1}})]})})]}),e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(u,{width:200}),subheader:e.jsx(u,{width:300})}),e.jsx(A,{children:e.jsxs(j,{spacing:3,children:[e.jsx(u,{variant:"rectangular",height:40,sx:{borderRadius:1}}),e.jsx(u,{variant:"rectangular",height:56,sx:{borderRadius:1}}),e.jsx(u,{variant:"rectangular",height:40,sx:{borderRadius:1}})]})})]}),e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(u,{width:150}),subheader:e.jsx(u,{width:250})}),e.jsx(A,{children:e.jsx(ys,{count:3})})]}),e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(u,{width:250}),subheader:e.jsx(u,{width:350})}),e.jsx(A,{children:e.jsx(u,{variant:"rectangular",height:300,sx:{borderRadius:1}})})]})]}):e.jsxs(j,{spacing:3,children:[e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(l,{variant:"h6",fontWeight:600,children:"অভিযোগের সীমা (Complaint Limits)"}),subheader:e.jsx(l,{variant:"body2",color:"text.secondary",children:"Configure daily complaint and image upload limits"}),sx:{pb:1}}),e.jsx(A,{children:wt?e.jsxs(j,{spacing:3,children:[e.jsx(u,{variant:"rectangular",height:56,sx:{borderRadius:1}}),e.jsx(u,{variant:"rectangular",height:56,sx:{borderRadius:1}}),e.jsx(u,{variant:"rectangular",height:40,width:150,sx:{borderRadius:1}})]}):e.jsxs(j,{spacing:3,children:[e.jsxs(o,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1,color:"text.secondary",fontWeight:600},children:"দৈনিক অভিযোগের সীমা (Daily Complaint Limit)"}),e.jsx(m,{fullWidth:!0,type:"number",value:$,onChange:t=>D(t.target.value),helperText:"একজন ব্যবহারকারী প্রতিদিন কতগুলো অভিযোগ করতে পারবেন",InputProps:{inputProps:{min:1}},disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(o,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1,color:"text.secondary",fontWeight:600},children:"ওয়ার্ডের ছবির সীমা (Ward Image Limit)"}),e.jsx(m,{fullWidth:!0,type:"number",value:H,onChange:t=>be(t.target.value),helperText:"প্রতি অভিযোগের জন্য ওয়ার্ডে সর্বোচ্চ কতগুলো ছবি আপলোড করা যাবে",InputProps:{inputProps:{min:1}},disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(o,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1,color:"text.secondary",fontWeight:600},children:"লাইভ চ্যাট মেসেজ সীমা (Live Chat Message Limit)"}),e.jsx(m,{fullWidth:!0,type:"number",value:J,onChange:t=>je(t.target.value),helperText:"একসাথে কতগুলো পুরনো মেসেজ লোড হবে (Default: 120)",InputProps:{inputProps:{min:1}},disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"যাচাইকরণ সেটিংস (Verification Settings)"}),e.jsxs(j,{spacing:2,children:[e.jsx(F,{control:e.jsx(q,{checked:Ce,onChange:t=>Se(t.target.checked),disabled:g}),label:"Email Verification (Enable/Disable)"}),e.jsx(F,{control:e.jsx(q,{checked:ve,onChange:t=>ye(t.target.checked),disabled:g}),label:"SMS Verification (Enable/Disable)"}),e.jsx(F,{control:e.jsx(q,{checked:we,onChange:t=>Re(t.target.checked),disabled:g}),label:"WhatsApp Verification (Enable/Disable)"}),e.jsx(F,{control:e.jsx(q,{checked:Te,onChange:t=>Me(t.target.checked),disabled:g}),label:"Truecaller Verification (Enable/Disable)"})]})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"উন্নত সেটিংস (Advanced Settings)"}),e.jsxs(j,{spacing:3,children:[e.jsx(m,{fullWidth:!0,label:"Verification Code Expiry (Minutes)",value:Ne,onChange:t=>Oe(t.target.value),helperText:"Enter the number of minutes before OTP expires",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Verification Code Length",value:ze,onChange:t=>qe(t.target.value),helperText:"Length of the OTP (4-10 digits)",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Pending Account Cleanup (Hours)",value:Ke,onChange:t=>Ve(t.target.value),helperText:"How many hours unverified accounts stay before deletion",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"SMS Gateway Configuration"}),e.jsxs(j,{spacing:3,children:[e.jsx(m,{fullWidth:!0,label:"SMS API URL",value:_e,onChange:t=>Ie(t.target.value),helperText:"Full URL for the SMS Gateway API",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"SMS API Key",value:We,onChange:t=>Ae(t.target.value),helperText:"API Key for authentication",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"WhatsApp Gateway Configuration"}),e.jsx(j,{spacing:3,children:e.jsx(m,{fullWidth:!0,label:"WhatsApp API URL",value:Ee,onChange:t=>Le(t.target.value),helperText:"Full URL for the WhatsApp Gateway API",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"Truecaller Configuration"}),e.jsxs(j,{spacing:3,children:[e.jsx(m,{fullWidth:!0,label:"Truecaller App Key",value:Pe,onChange:t=>ke(t.target.value),helperText:"App Key from Truecaller Developer Portal",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Truecaller Partner Key",value:Be,onChange:t=>De(t.target.value),helperText:"Partner Key from Truecaller",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"ইমেইল কনফিগারেশন (Email Configuration - SMTP)"}),e.jsxs(j,{spacing:3,children:[e.jsx(m,{fullWidth:!0,label:"SMTP Host",value:Fe,onChange:t=>Ue(t.target.value),helperText:"e.g., smtp.gmail.com",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"SMTP Port",value:$e,onChange:t=>He(t.target.value),helperText:"e.g., 587",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(F,{control:e.jsx(q,{checked:Ge,onChange:t=>Je(t.target.checked),disabled:g}),label:"SMTP Secure (Enable for SSL/TLS)"}),e.jsx(m,{fullWidth:!0,label:"SMTP User",value:Qe,onChange:t=>Xe(t.target.value),helperText:"Email address for SMTP authentication",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"SMTP Password",value:Ye,onChange:t=>Ze(t.target.value),helperText:"Password or App Password for SMTP",disabled:g,type:"password",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Sender Name",value:et,onChange:t=>tt(t.target.value),helperText:"Name displayed in emails",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Sender Email",value:st,onChange:t=>at(t.target.value),helperText:"Email address displayed as sender",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]}),e.jsx(O,{}),e.jsxs(o,{children:[e.jsx(l,{variant:"h6",fontWeight:600,sx:{mb:2},children:"রেট লিমিটিং (Rate Limiting)"}),e.jsxs(j,{spacing:3,children:[e.jsx(m,{fullWidth:!0,label:"Verification Request Limit",value:rt,onChange:t=>it(t.target.value),helperText:"Max verification requests allowed in the window",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Request Window (Minutes)",value:nt,onChange:t=>ot(t.target.value),helperText:"Time window for rate limiting",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(m,{fullWidth:!0,label:"Verification Attempt Limit",value:lt,onChange:t=>dt(t.target.value),helperText:"Max incorrect attempts before lockout",disabled:g,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]}),e.jsx(o,{children:e.jsx(k,{variant:"contained",startIcon:g?e.jsx(U,{size:20,color:"inherit"}):e.jsx(Xt,{}),onClick:At,disabled:g,sx:{textTransform:"none",fontWeight:600,px:3,py:1.5,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:g?"Saving...":"Save Changes"})})]})})]}),h&&e.jsx(gs,{rules:h,onUpdate:Pt,disabled:K}),e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(l,{variant:"h6",fontWeight:600,children:"Bot Messages"}),subheader:e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Manage automated messages for ",a==="LIVE_CHAT"?"Live Chat":"Complaint Chat"]}),action:e.jsx(k,{variant:"contained",startIcon:e.jsx(Yt,{}),onClick:Tt,disabled:K,sx:{textTransform:"none",fontWeight:600,px:3,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:"Add Message"}),sx:{pb:1}}),e.jsx(A,{children:e.jsx(ms,{messages:d,onEdit:Mt,onDelete:_t,onToggleActive:Wt,onReorder:Lt,disabled:K})})]}),e.jsxs(W,{sx:{borderRadius:2,boxShadow:2},children:[e.jsx(N,{title:e.jsx(l,{variant:"h6",fontWeight:600,children:"Bot Performance Analytics"}),subheader:e.jsx(l,{variant:"body2",color:"text.secondary",children:"View bot message effectiveness and user engagement metrics"}),sx:{pb:1}}),e.jsx(A,{children:e.jsx(bs,{chatType:a})})]})]}),e.jsx(fs,{open:c,message:M,onClose:()=>{p(!1),S(null)},onSave:Et,saving:K}),e.jsx(js,{open:w,onClose:()=>{E(!1),B(null)},onConfirm:It,loading:K,title:"Delete Bot Message",message:"Are you sure you want to delete this bot message? This action cannot be undone and will remove the message from the bot's response sequence."})]})})};export{As as default};
